var jb=Object.defineProperty,Bb=Object.defineProperties;var $b=Object.getOwnPropertyDescriptors;var by=Object.getOwnPropertySymbols,qb=Object.getPrototypeOf,Hb=Object.prototype.hasOwnProperty,zb=Object.prototype.propertyIsEnumerable,Gb=Reflect.get;var Cy=(t,e,n)=>e in t?jb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ht=(t,e)=>{for(var n in e||={})Hb.call(e,n)&&Cy(t,n,e[n]);if(by)for(var n of by(e))zb.call(e,n)&&Cy(t,n,e[n]);return t},zt=(t,e)=>Bb(t,$b(e));var _n=(t,e,n)=>Gb(qb(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(l){i(l)}},o=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});function Ay(t,e){return Object.is(t,e)}var Ne=null,Ho=!1,zo=1,vn=Symbol("SIGNAL");function se(t){let e=Ne;return Ne=t,e}var Wo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _l(t){if(Ho)throw new Error("");if(Ne===null)return;Ne.consumerOnSignalRead(t);let e=Ne.nextProducerIndex++;if(ti(Ne),e<Ne.producerNode.length&&Ne.producerNode[e]!==t&&Is(Ne)){let n=Ne.producerNode[e];Ko(n,Ne.producerIndexOfThis[e])}Ne.producerNode[e]!==t&&(Ne.producerNode[e]=t,Ne.producerIndexOfThis[e]=Is(Ne)?Py(t,Ne,e):0),Ne.producerLastReadVersion[e]=t.version}function Wb(){zo++}function Sy(t){if(!(Is(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===zo)){if(!t.producerMustRecompute(t)&&!wl(t)){t.dirty=!1,t.lastCleanEpoch=zo;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=zo}}function Ry(t){if(t.liveConsumerNode===void 0)return;let e=Ho;Ho=!0;try{for(let n of t.liveConsumerNode)n.dirty||Kb(n)}finally{Ho=e}}function Ny(){return Ne?.consumerAllowSignalWrites!==!1}function Kb(t){t.dirty=!0,Ry(t),t.consumerMarkedDirty?.(t)}function vl(t){return t&&(t.nextProducerIndex=0),se(t)}function Il(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Is(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ko(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function wl(t){ti(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Sy(n),r!==n.version))return!0}return!1}function xy(t){if(ti(t),Is(t))for(let e=0;e<t.producerNode.length;e++)Ko(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Py(t,e,n){if(My(t),ti(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Py(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ko(t,e){if(My(t),ti(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Ko(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ti(i),i.producerIndexOfThis[r]=e}}function Is(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ti(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function My(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ky(t){let e=Object.create(Qb);e.computation=t;let n=()=>{if(Sy(e),_l(e),e.value===Go)throw e.error;return e.value};return n[vn]=e,n}var gl=Symbol("UNSET"),yl=Symbol("COMPUTING"),Go=Symbol("ERRORED"),Qb=zt(Ht({},Wo),{value:gl,dirty:!0,error:null,equal:Ay,producerMustRecompute(t){return t.value===gl||t.value===yl},producerRecomputeValue(t){if(t.value===yl)throw new Error("Detected cycle in computations.");let e=t.value;t.value=yl;let n=vl(t),r;try{r=t.computation()}catch(i){r=Go,t.error=i}finally{Il(t,n)}if(e!==gl&&e!==Go&&r!==Go&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function Yb(){throw new Error}var Oy=Yb;function Fy(){Oy()}function Ly(t){Oy=t}var Jb=null;function Vy(t){let e=Object.create(jy);e.value=t;let n=()=>(_l(e),e.value);return n[vn]=e,n}function El(t,e){Ny()||Fy(),t.equal(t.value,e)||(t.value=e,Xb(t))}function Uy(t,e){Ny()||Fy(),El(t,e(t.value))}var jy=zt(Ht({},Wo),{equal:Ay,value:void 0});function Xb(t){t.version++,Wb(),Ry(t),Jb?.()}function G(t){return typeof t=="function"}function ni(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Qo=ni(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Zn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(G(r))try{r()}catch(s){e=s instanceof Qo?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{By(s)}catch(o){e=e??[],o instanceof Qo?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Qo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)By(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Zn(n,e)}remove(e){let{_finalizers:n}=this;n&&Zn(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var Tl=Ae.EMPTY;function Yo(t){return t instanceof Ae||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function By(t){G(t)?t():t.unsubscribe()}var gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ri={setTimeout(t,e,...n){let{delegate:r}=ri;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ri;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Jo(t){ri.setTimeout(()=>{let{onUnhandledError:e}=gt;if(e)e(t);else throw t})}function ws(){}var $y=Dl("C",void 0,void 0);function qy(t){return Dl("E",void 0,t)}function Hy(t){return Dl("N",t,void 0)}function Dl(t,e,n){return{kind:t,value:e,error:n}}var er=null;function ii(t){if(gt.useDeprecatedSynchronousErrorHandling){let e=!er;if(e&&(er={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=er;if(er=null,n)throw r}}else t()}function zy(t){gt.useDeprecatedSynchronousErrorHandling&&er&&(er.errorThrown=!0,er.error=t)}var tr=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yo(e)&&e.add(this)):this.destination=tC}static create(e,n,r){return new si(e,n,r)}next(e){this.isStopped?Cl(Hy(e),this):this._next(e)}error(e){this.isStopped?Cl(qy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cl($y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Zb=Function.prototype.bind;function bl(t,e){return Zb.call(t,e)}var Al=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Xo(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Xo(r)}else Xo(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Xo(n)}}},si=class extends tr{constructor(e,n,r){super();let i;if(G(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&gt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bl(e.next,s),error:e.error&&bl(e.error,s),complete:e.complete&&bl(e.complete,s)}):i=e}this.destination=new Al(i)}};function Xo(t){gt.useDeprecatedSynchronousErrorHandling?zy(t):Jo(t)}function eC(t){throw t}function Cl(t,e){let{onStoppedNotification:n}=gt;n&&ri.setTimeout(()=>n(t,e))}var tC={closed:!0,next:ws,error:eC,complete:ws};var oi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function at(t){return t}function Gy(...t){return Sl(t)}function Sl(t){return t.length===0?at:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=rC(n)?n:new si(n,r,i);return ii(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Wy(r),new r((i,s)=>{let o=new si({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[oi](){return this}pipe(...n){return Sl(n)(this)}toPromise(n){return n=Wy(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Wy(t){var e;return(e=t??gt.Promise)!==null&&e!==void 0?e:Promise}function nC(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function rC(t){return t&&t instanceof tr||nC(t)&&Yo(t)}function Rl(t){return G(t?.lift)}function re(t){return e=>{if(Rl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e,n,r,i){return new Nl(t,e,n,r,i)}var Nl=class extends tr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function xl(){return re((t,e)=>{let n=null;t._refCount++;let r=X(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Pl=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Rl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(X(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return xl()(this)}};var Ky=ni(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var In=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Zo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ky}next(n){ii(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ii(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ii(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Tl:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,Zn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Zo(e,n),t})(),Zo=class extends In{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tl}};var Es=class extends In{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ml={now(){return(Ml.delegate||Date).now()},delegate:void 0};var ea=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var Ts={setInterval(t,e,...n){let{delegate:r}=Ts;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ts;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ai=class extends ea{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ts.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ts.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Zn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ci=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ci.now=Ml.now;var ui=class extends ci{constructor(e,n=ci.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var kl=new ui(ai);var ta=class extends ai{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var na=class extends ui{};var Ol=new na(ta);var Ds=new J(t=>t.complete());function Qy(t){return t&&G(t.schedule)}function Yy(t){return t[t.length-1]}function ra(t){return G(Yy(t))?t.pop():void 0}function wn(t){return Qy(Yy(t))?t.pop():void 0}function Fl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Xy(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(f){try{l(r.next(f))}catch(p){o(p)}}function u(f){try{l(r.throw(f))}catch(p){o(p)}}function l(f){f.done?s(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function Jy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nr(t){return this instanceof nr?(this.v=t,this):new nr(t)}function Zy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(A){return Promise.resolve(A).then(_,p)}}function c(_,A){r[_]&&(i[_]=function(x){return new Promise(function(R,k){s.push([_,x,R,k])>1||u(_,x)})},A&&(i[_]=A(i[_])))}function u(_,A){try{l(r[_](A))}catch(x){g(s[0][3],x)}}function l(_){_.value instanceof nr?Promise.resolve(_.value.v).then(f,p):g(s[0][2],_)}function f(_){u("next",_)}function p(_){u("throw",_)}function g(_,A){_(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function e_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Jy=="function"?Jy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(l){s({value:l,done:c})},o)}}var ia=t=>t&&typeof t.length=="number"&&typeof t!="function";function sa(t){return G(t?.then)}function oa(t){return G(t[oi])}function aa(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function ca(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ua=iC();function la(t){return G(t?.[ua])}function da(t){return Zy(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield nr(n.read());if(i)return yield nr(void 0);yield yield nr(r)}}finally{n.releaseLock()}})}function ha(t){return G(t?.getReader)}function Ee(t){if(t instanceof J)return t;if(t!=null){if(oa(t))return sC(t);if(ia(t))return oC(t);if(sa(t))return aC(t);if(aa(t))return t_(t);if(la(t))return cC(t);if(ha(t))return uC(t)}throw ca(t)}function sC(t){return new J(e=>{let n=t[oi]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oC(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function aC(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Jo)})}function cC(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function t_(t){return new J(e=>{lC(t,e).catch(n=>e.error(n))})}function uC(t){return t_(da(t))}function lC(t,e){var n,r,i,s;return Xy(this,void 0,void 0,function*(){try{for(n=e_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function et(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function En(t,e=0){return re((n,r)=>{n.subscribe(X(r,i=>et(r,t,()=>r.next(i),e),()=>et(r,t,()=>r.complete(),e),i=>et(r,t,()=>r.error(i),e)))})}function Tn(t,e=0){return re((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function n_(t,e){return Ee(t).pipe(Tn(e),En(e))}function r_(t,e){return Ee(t).pipe(Tn(e),En(e))}function i_(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function s_(t,e){return new J(n=>{let r;return et(n,e,()=>{r=t[ua](),et(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>G(r?.return)&&r.return()})}function fa(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{et(n,e,()=>{let r=t[Symbol.asyncIterator]();et(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function o_(t,e){return fa(da(t),e)}function a_(t,e){if(t!=null){if(oa(t))return n_(t,e);if(ia(t))return i_(t,e);if(sa(t))return r_(t,e);if(aa(t))return fa(t,e);if(la(t))return s_(t,e);if(ha(t))return o_(t,e)}throw ca(t)}function Gt(t,e){return e?a_(t,e):Ee(t)}function dC(...t){let e=wn(t);return Gt(t,e)}function hC(t,e){let n=G(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function fC(t){return!!t&&(t instanceof J||G(t.lift)&&G(t.subscribe))}var rr=ni(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function lt(t,e){return re((n,r)=>{let i=0;n.subscribe(X(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:pC}=Array;function mC(t,e){return pC(e)?t(...e):t(e)}function pa(t){return lt(e=>mC(t,e))}var{isArray:gC}=Array,{getPrototypeOf:yC,prototype:_C,keys:vC}=Object;function ma(t){if(t.length===1){let e=t[0];if(gC(e))return{args:e,keys:null};if(IC(e)){let n=vC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function IC(t){return t&&typeof t=="object"&&yC(t)===_C}function ga(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function wC(...t){let e=wn(t),n=ra(t),{args:r,keys:i}=ma(t);if(r.length===0)return Gt([],e);let s=new J(EC(r,e,i?o=>ga(i,o):at));return n?s.pipe(pa(n)):s}function EC(t,e,n=at){return r=>{c_(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)c_(e,()=>{let l=Gt(t[u],e),f=!1;l.subscribe(X(r,p=>{s[u]=p,f||(f=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function c_(t,e,n){t?et(n,t,e):e()}function u_(t,e,n,r,i,s,o,c){let u=[],l=0,f=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},_=x=>l<r?A(x):u.push(x),A=x=>{s&&e.next(x),l++;let R=!1;Ee(n(x,f++)).subscribe(X(e,k=>{i?.(k),s?_(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();o?et(e,o,()=>A(k)):A(k)}g()}catch(k){e.error(k)}}))};return t.subscribe(X(e,_,()=>{p=!0,g()})),()=>{c?.()}}function ir(t,e,n=1/0){return G(e)?ir((r,i)=>lt((s,o)=>e(r,s,i,o))(Ee(t(r,i))),n):(typeof e=="number"&&(n=e),re((r,i)=>u_(r,i,t,n)))}function l_(t=1/0){return ir(at,t)}function d_(){return l_(1)}function ya(...t){return d_()(Gt(t,wn(t)))}function TC(t){return new J(e=>{Ee(t()).subscribe(e)})}function DC(...t){let e=ra(t),{args:n,keys:r}=ma(t),i=new J(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),u=o,l=o;for(let f=0;f<o;f++){let p=!1;Ee(n[f]).subscribe(X(s,g=>{p||(p=!0,l--),c[f]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?ga(r,c):c),s.complete())}))}});return e?i.pipe(pa(e)):i}function sr(t,e){return re((n,r)=>{let i=0;n.subscribe(X(r,s=>t.call(e,s,i++)&&r.next(s)))})}function h_(t){return re((e,n)=>{let r=null,i=!1,s;r=e.subscribe(X(n,void 0,void 0,o=>{s=Ee(t(o,h_(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function f_(t,e,n,r,i){return(s,o)=>{let c=n,u=e,l=0;s.subscribe(X(o,f=>{let p=l++;u=c?t(u,f,p):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function bC(t,e){return G(e)?ir(t,e,1):ir(t,1)}function bs(t){return re((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ll(t){return t<=0?()=>Ds:re((e,n)=>{let r=0;e.subscribe(X(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function CC(t){return lt(()=>t)}function _a(t=AC){return re((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function AC(){return new rr}function SC(t){return re((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function p_(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sr((i,s)=>t(i,s,r)):at,Ll(1),n?bs(e):_a(()=>new rr))}function Vl(t){return t<=0?()=>Ds:re((e,n)=>{let r=[];e.subscribe(X(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function RC(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sr((i,s)=>t(i,s,r)):at,Vl(1),n?bs(e):_a(()=>new rr))}function m_(t,e){return re(f_(t,e,arguments.length>=2,!0))}function g_(...t){let e=wn(t);return re((n,r)=>{(e?ya(t,n,e):ya(t,n)).subscribe(r)})}function NC(t,e){return re((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(X(r,u=>{i?.unsubscribe();let l=0,f=s++;Ee(t(u,f)).subscribe(i=X(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function xC(t){return re((e,n)=>{Ee(t).subscribe(X(n,()=>n.complete(),ws)),!n.closed&&e.subscribe(n)})}function Ul(t,e,n){let r=G(t)||e||n?{next:t,error:e,complete:n}:t;return r?re((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(X(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):at}var ev="https://g.co/ng/security#xss",Y=class extends Error{constructor(e,n){super(tv(e,n)),this.code=e}};function tv(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ls(t){return{toString:t}.toString()}var va="__parameters__";function PC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function nv(t,e,n){return Ls(()=>{let r=PC(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,l,f){let p=u.hasOwnProperty(va)?u[va]:Object.defineProperty(u,va,{value:[]})[va];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Dt=globalThis;function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function MC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Qe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Qe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function y_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var kC=fe({__forward_ref__:fe});function rv(t){return t.__forward_ref__=rv,t.toString=function(){return Qe(this())},t}function Ke(t){return iv(t)?t():t}function iv(t){return typeof t=="function"&&t.hasOwnProperty(kC)&&t.__forward_ref__===rv}function me(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sv(t){return{providers:t.providers||[],imports:t.imports||[]}}function Za(t){return __(t,ov)||__(t,av)}function B$(t){return Za(t)!==null}function __(t,e){return t.hasOwnProperty(e)?t[e]:null}function OC(t){let e=t&&(t[ov]||t[av]);return e||null}function v_(t){return t&&(t.hasOwnProperty(I_)||t.hasOwnProperty(FC))?t[I_]:null}var ov=fe({\u0275prov:fe}),I_=fe({\u0275inj:fe}),av=fe({ngInjectableDef:fe}),FC=fe({ngInjectorDef:fe}),ue=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=me({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cv(t){return t&&!!t.\u0275providers}var LC=fe({\u0275cmp:fe}),VC=fe({\u0275dir:fe}),UC=fe({\u0275pipe:fe}),jC=fe({\u0275mod:fe}),Ra=fe({\u0275fac:fe}),Cs=fe({__NG_ELEMENT_ID__:fe}),w_=fe({__NG_ENV_ID__:fe});function ec(t){return typeof t=="string"?t:t==null?"":String(t)}function BC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ec(t)}function $C(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Y(-200,t)}function th(t,e){throw new Y(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),nd;function uv(){return nd}function tt(t){let e=nd;return nd=t,e}function lv(t,e,n){let r=Za(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;th(t,"Injector")}var qC={},As=qC,rd="__NG_DI_FLAG__",Na="ngTempTokenPath",HC="ngTokenPath",zC=/\n/gm,GC="\u0275",E_="__source",pi;function WC(){return pi}function Dn(t){let e=pi;return pi=t,e}function KC(t,e=te.Default){if(pi===void 0)throw new Y(-203,!1);return pi===null?lv(t,void 0,e):pi.get(t,e&te.Optional?null:void 0,e)}function $e(t,e=te.Default){return(uv()||KC)(Ke(t),e)}function ce(t,e=te.Default){return $e(t,tc(e))}function tc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function id(t){let e=[];for(let n=0;n<t.length;n++){let r=Ke(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,s=te.Default;for(let o=0;o<r.length;o++){let c=r[o],u=QC(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push($e(i,s))}else e.push($e(r))}return e}function dv(t,e){return t[rd]=e,t.prototype[rd]=e,t}function QC(t){return t[rd]}function YC(t,e,n,r){let i=t[Na];throw e[E_]&&i.unshift(e[E_]),t.message=JC(`
`+t.message,i,n,r),t[HC]=i,t[Na]=null,t}function JC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==GC?t.slice(2):t;let i=Qe(e);if(Array.isArray(e))i=e.map(Qe).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):Qe(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(zC,`
  `)}`}var Re=dv(nv("Optional"),8);var hv=dv(nv("SkipSelf"),4);function lr(t,e){let n=t.hasOwnProperty(Ra);return n?t[Ra]:null}function XC(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function ZC(t){return t.flat(Number.POSITIVE_INFINITY)}function nh(t,e){t.forEach(n=>Array.isArray(n)?nh(n,e):e(n))}function fv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function xa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function e0(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function t0(t,e,n){let r=Vs(t,e);return r>=0?t[r|1]=n:(r=~r,e0(t,r,e,n)),r}function jl(t,e){let n=Vs(t,e);if(n>=0)return t[n|1]}function Vs(t,e){return n0(t,e,1)}function n0(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var gi={},dt=[],Pa=new ue(""),pv=new ue("",-1),mv=new ue(""),Ma=class{get(e,n=As){if(n===As){let r=new Error(`NullInjectorError: No provider for ${Qe(e)}!`);throw r.name="NullInjectorError",r}return n}},gv=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gv||{}),Ss=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ss||{}),Cn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Cn||{});function r0(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function sd(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];i0(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function yv(t){return t===3||t===4||t===6}function i0(t){return t.charCodeAt(0)===64}function Rs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?T_(t,n,i,null,e[++r]):T_(t,n,i,null,null))}}return t}function T_(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var _v="ng-template";function s0(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&r0(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(rh(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function rh(t){return t.type===4&&t.value!==_v}function o0(t,e,n){let r=t.type===4&&!n?_v:t.value;return e===r}function a0(t,e,n){let r=4,i=t.attrs,s=i!==null?l0(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!yt(r)&&!yt(u))return!1;if(o&&yt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!o0(t,u,n)||u===""&&e.length===1){if(yt(r))return!1;o=!0}}else if(r&8){if(i===null||!s0(t,i,u,n)){if(yt(r))return!1;o=!0}}else{let l=e[++c],f=c0(u,i,rh(t),n);if(f===-1){if(yt(r))return!1;o=!0;continue}if(l!==""){let p;if(f>s?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(yt(r))return!1;o=!0}}}}return yt(r)||o}function yt(t){return(t&1)===0}function c0(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return d0(e,t)}function u0(t,e,n=!1){for(let r=0;r<e.length;r++)if(a0(t,e[r],n))return!0;return!1}function l0(t){for(let e=0;e<t.length;e++){let n=t[e];if(yv(n))return e}return t.length}function d0(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function D_(t,e){return t?":not("+e.trim()+")":e}function h0(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!yt(o)&&(e+=D_(s,i),i=""),r=o,s=s||!yt(r);n++}return i!==""&&(e+=D_(s,i)),e}function f0(t){return t.map(h0).join(",")}function p0(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!yt(i))break;i=s}r++}return{attrs:e,classes:n}}function $$(t){return Ls(()=>{let e=Tv(t),n=zt(Ht({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ss.Emulated,styles:t.styles||dt,_:null,schemas:t.schemas||null,tView:null,id:""});Dv(n);let r=t.dependencies;return n.directiveDefs=C_(r,!1),n.pipeDefs=C_(r,!0),n.id=_0(n),n})}function m0(t){return dr(t)||Iv(t)}function g0(t){return t!==null}function vv(t){return Ls(()=>({type:t.type,bootstrap:t.bootstrap||dt,declarations:t.declarations||dt,imports:t.imports||dt,exports:t.exports||dt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function b_(t,e){if(t==null)return gi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=Cn.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==Cn.None?[r,c]:r,e[s]=o):n[s]=r}return n}function nc(t){return Ls(()=>{let e=Tv(t);return Dv(e),e})}function rc(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function dr(t){return t[LC]||null}function Iv(t){return t[VC]||null}function wv(t){return t[UC]||null}function y0(t){let e=dr(t)||Iv(t)||wv(t);return e!==null?e.standalone:!1}function Ev(t,e){let n=t[jC]||null;if(!n&&e===!0)throw new Error(`Type ${Qe(t)} does not have '\u0275mod' property.`);return n}function Tv(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||gi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||dt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:b_(t.inputs,e),outputs:b_(t.outputs),debugInfo:null}}function Dv(t){t.features?.forEach(e=>e(t))}function C_(t,e){if(!t)return null;let n=e?wv:m0;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(g0)}function _0(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Kt(t){return{\u0275providers:t}}function v0(...t){return{\u0275providers:bv(!0,t),\u0275fromNgModule:!0}}function bv(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return nh(e,o=>{let c=o;od(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Cv(i,s),n}function Cv(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ih(i,s=>{e(s,r)})}}function od(t,e,n,r){if(t=Ke(t),!t)return!1;let i=null,s=v_(t),o=!s&&dr(t);if(!s&&!o){let u=t.ngModule;if(s=v_(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)od(l,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let l;try{nh(s.imports,f=>{od(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&Cv(l,e)}if(!c){let l=lr(i)||(()=>new i);e({provide:i,useFactory:l,deps:dt},i),e({provide:mv,useValue:i,multi:!0},i),e({provide:Pa,useValue:()=>$e(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let l=t;ih(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ih(t,e){for(let n of t)cv(n)&&(n=n.\u0275providers),Array.isArray(n)?ih(n,e):e(n)}var I0=fe({provide:String,useValue:fe});function Av(t){return t!==null&&typeof t=="object"&&I0 in t}function w0(t){return!!(t&&t.useExisting)}function E0(t){return!!(t&&t.useFactory)}function yi(t){return typeof t=="function"}function T0(t){return!!t.useClass}var Sv=new ue(""),Ta={},D0={},Bl;function sh(){return Bl===void 0&&(Bl=new Ma),Bl}var An=class{},Ns=class extends An{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cd(e,o=>this.processProvider(o)),this.records.set(pv,li(void 0,this)),i.has("environment")&&this.records.set(An,li(void 0,this));let s=this.records.get(Sv);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(mv,dt,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Dn(this),r=tt(void 0),i;try{return e()}finally{Dn(n),tt(r)}}get(e,n=As,r=te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(w_))return e[w_](this);r=tc(r);let i,s=Dn(this),o=tt(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=R0(e)&&Za(e);l&&this.injectableDefInScope(l)?u=li(ad(e),Ta):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&te.Self?sh():this.parent;return n=r&te.Optional&&n===As?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Na]=c[Na]||[]).unshift(Qe(e)),s)throw c;return YC(c,e,"R3InjectorError",this.source)}else throw c}finally{tt(o),Dn(s)}}resolveInjectorInitializers(){let e=se(null),n=Dn(this),r=tt(void 0),i;try{let s=this.get(Pa,dt,te.Self);for(let o of s)o()}finally{Dn(n),tt(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){e=Ke(e);let n=yi(e)?e:Ke(e&&e.provide),r=C0(e);if(!yi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=li(void 0,Ta,!0),i.factory=()=>id(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=se(null);try{return n.value===Ta&&(n.value=D0,n.value=n.factory()),typeof n.value=="object"&&n.value&&S0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ke(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ad(t){let e=Za(t),n=e!==null?e.factory:lr(t);if(n!==null)return n;if(t instanceof ue)throw new Y(204,!1);if(t instanceof Function)return b0(t);throw new Y(204,!1)}function b0(t){if(t.length>0)throw new Y(204,!1);let n=OC(t);return n!==null?()=>n.factory(t):()=>new t}function C0(t){if(Av(t))return li(void 0,t.useValue);{let e=Rv(t);return li(e,Ta)}}function Rv(t,e,n){let r;if(yi(t)){let i=Ke(t);return lr(i)||ad(i)}else if(Av(t))r=()=>Ke(t.useValue);else if(E0(t))r=()=>t.useFactory(...id(t.deps||[]));else if(w0(t))r=()=>$e(Ke(t.useExisting));else{let i=Ke(t&&(t.useClass||t.provide));if(A0(t))r=()=>new i(...id(t.deps));else return lr(i)||ad(i)}return r}function li(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function A0(t){return!!t.deps}function S0(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function R0(t){return typeof t=="function"||typeof t=="object"&&t instanceof ue}function cd(t,e){for(let n of t)Array.isArray(n)?cd(n,e):n&&cv(n)?cd(n.\u0275providers,e):e(n)}function N0(t,e){t instanceof Ns&&t.assertNotDestroyed();let n,r=Dn(t),i=tt(void 0);try{return e()}finally{Dn(r),tt(i)}}function Nv(){return uv()!==void 0||WC()!=null}function oh(t){if(!Nv())throw new Y(-203,!1)}function x0(t){return typeof t=="function"}var Qt=0,W=1,B=2,ke=3,_t=4,It=5,ka=6,xs=7,ht=8,_i=9,vt=10,Se=11,Ps=12,A_=13,Ti=14,At=15,Us=16,di=17,Wt=18,ic=19,xv=20,bn=21,$l=22,hr=23,Ye=25,Pv=1;var fr=7,Oa=8,vi=9,nt=10,ah=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ah||{});function cr(t){return Array.isArray(t)&&typeof t[Pv]=="object"}function Yt(t){return Array.isArray(t)&&t[Pv]===!0}function ch(t){return(t.flags&4)!==0}function sc(t){return t.componentOffset>-1}function oc(t){return(t.flags&1)===1}function Sn(t){return!!t.template}function P0(t){return(t[B]&512)!==0}var ud=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Mv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function kv(){return Ov}function Ov(t){return t.type.prototype.ngOnChanges&&(t.setInput=k0),M0}kv.ngInherit=!0;function M0(){let t=Lv(this),e=t?.current;if(e){let n=t.previous;if(n===gi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function k0(t,e,n,r,i){let s=this.declaredInputs[r],o=Lv(t)||O0(t,{previous:gi,current:null}),c=o.current||(o.current={}),u=o.previous,l=u[s];c[s]=new ud(l&&l.currentValue,n,u===gi),Mv(t,e,i,n)}var Fv="__ngSimpleChanges__";function Lv(t){return t[Fv]||null}function O0(t,e){return t[Fv]=e}var S_=null;var bt=function(t,e,n){S_?.(t,e,n)},Vv="svg",F0="math",L0=!1;function V0(){return L0}function St(t){for(;Array.isArray(t);)t=t[Qt];return t}function Uv(t,e){return St(e[t])}function ft(t,e){return St(e[t.index])}function uh(t,e){return t.data[e]}function lh(t,e){return t[e]}function Pn(t,e){let n=e[t];return cr(n)?n:n[Qt]}function U0(t){return(t[B]&4)===4}function dh(t){return(t[B]&128)===128}function j0(t){return Yt(t[ke])}function Ii(t,e){return e==null?null:t[e]}function jv(t){t[di]=0}function B0(t){t[B]&1024||(t[B]|=1024,dh(t)&&Ms(t))}function $0(t,e){for(;t>0;)e=e[Ti],t--;return e}function hh(t){return!!(t[B]&9216||t[hr]?.dirty)}function ld(t){t[vt].changeDetectionScheduler?.notify(1),hh(t)?Ms(t):t[B]&64&&(V0()?(t[B]|=1024,Ms(t)):t[vt].changeDetectionScheduler?.notify())}function Ms(t){t[vt].changeDetectionScheduler?.notify();let e=ks(t);for(;e!==null&&!(e[B]&8192||(e[B]|=8192,!dh(e)));)e=ks(e)}function Bv(t,e){if((t[B]&256)===256)throw new Y(911,!1);t[bn]===null&&(t[bn]=[]),t[bn].push(e)}function q0(t,e){if(t[bn]===null)return;let n=t[bn].indexOf(e);n!==-1&&t[bn].splice(n,1)}function ks(t){let e=t[ke];return Yt(e)?e[ke]:e}var Q={lFrame:Kv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function H0(){return Q.lFrame.elementDepthCount}function z0(){Q.lFrame.elementDepthCount++}function G0(){Q.lFrame.elementDepthCount--}function $v(){return Q.bindingsEnabled}function W0(){return Q.skipHydrationRootTNode!==null}function K0(t){return Q.skipHydrationRootTNode===t}function Q0(){Q.skipHydrationRootTNode=null}function ne(){return Q.lFrame.lView}function Oe(){return Q.lFrame.tView}function q$(t){return Q.lFrame.contextLView=t,t[ht]}function H$(t){return Q.lFrame.contextLView=null,t}function rt(){let t=qv();for(;t!==null&&t.type===64;)t=t.parent;return t}function qv(){return Q.lFrame.currentTNode}function Y0(){let t=Q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function wr(t,e){let n=Q.lFrame;n.currentTNode=t,n.isParent=e}function fh(){return Q.lFrame.isParent}function Hv(){Q.lFrame.isParent=!1}function J0(){return Q.lFrame.contextLView}function js(){let t=Q.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function X0(t){return Q.lFrame.bindingIndex=t}function ac(){return Q.lFrame.bindingIndex++}function Z0(t){let e=Q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eA(){return Q.lFrame.inI18n}function tA(t,e){let n=Q.lFrame;n.bindingIndex=n.bindingRootIndex=t,dd(e)}function nA(){return Q.lFrame.currentDirectiveIndex}function dd(t){Q.lFrame.currentDirectiveIndex=t}function rA(t){let e=Q.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function zv(){return Q.lFrame.currentQueryIndex}function ph(t){Q.lFrame.currentQueryIndex=t}function iA(t){let e=t[W];return e.type===2?e.declTNode:e.type===1?t[It]:null}function Gv(t,e,n){if(n&te.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=iA(s),i===null||(s=s[Ti],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=Q.lFrame=Wv();return r.currentTNode=e,r.lView=t,!0}function mh(t){let e=Wv(),n=t[W];Q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Wv(){let t=Q.lFrame,e=t===null?null:t.child;return e===null?Kv(t):e}function Kv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Qv(){let t=Q.lFrame;return Q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Yv=Qv;function gh(){let t=Qv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sA(t){return(Q.lFrame.contextLView=$0(t,Q.lFrame.contextLView))[ht]}function Di(){return Q.lFrame.selectedIndex}function pr(t){Q.lFrame.selectedIndex=t}function yh(){let t=Q.lFrame;return uh(t.tView,t.selectedIndex)}function z$(){Q.lFrame.currentNamespace=Vv}function G$(){oA()}function oA(){Q.lFrame.currentNamespace=null}function aA(){return Q.lFrame.currentNamespace}var Jv=!0;function cc(){return Jv}function uc(t){Jv=t}function cA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Ov(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function lc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Da(t,e,n){Xv(t,e,3,n)}function ba(t,e,n,r){(t[B]&3)===n&&Xv(t,e,n,r)}function ql(t,e){let n=t[B];(n&3)===e&&(n&=16383,n+=1,t[B]=n)}function Xv(t,e,n,r){let i=r!==void 0?t[di]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[di]+=65536),(c<s||s==-1)&&(uA(t,n,e,u),t[di]=(t[di]&4294901760)+u+2),u++}function R_(t,e){bt(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),bt(5,t,e)}}function uA(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[B]>>14<t[di]>>16&&(t[B]&3)===e&&(t[B]+=16384,R_(c,s)):R_(c,s)}var mi=-1,mr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function lA(t){return t instanceof mr}function dA(t){return(t.flags&8)!==0}function hA(t){return(t.flags&16)!==0}function Zv(t){return t!==mi}function Fa(t){return t&32767}function fA(t){return t>>16}function La(t,e){let n=fA(t),r=e;for(;n>0;)r=r[Ti],n--;return r}var hd=!0;function Va(t){let e=hd;return hd=t,e}var pA=256,eI=pA-1,tI=5,mA=0,Ct={};function gA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Cs)&&(r=n[Cs]),r==null&&(r=n[Cs]=mA++);let i=r&eI,s=1<<i;e.data[t+(i>>tI)]|=s}function Ua(t,e){let n=nI(t,e);if(n!==-1)return n;let r=e[W];r.firstCreatePass&&(t.injectorIndex=e.length,Hl(r.data,t),Hl(e,null),Hl(r.blueprint,null));let i=_h(t,e),s=t.injectorIndex;if(Zv(i)){let o=Fa(i),c=La(i,e),u=c[W].data;for(let l=0;l<8;l++)e[s+l]=c[o+l]|u[o+l]}return e[s+8]=i,s}function Hl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function nI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function _h(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=aI(i),r===null)return mi;if(n++,i=i[Ti],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return mi}function fd(t,e,n){gA(t,e,n)}function yA(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(yv(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function rI(t,e,n){if(n&te.Optional||t!==void 0)return t;th(e,"NodeInjector")}function iI(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let i=t[_i],s=tt(void 0);try{return i?i.get(e,r,n&te.Optional):lv(e,r,n&te.Optional)}finally{tt(s)}}return rI(r,e,n)}function sI(t,e,n,r=te.Default,i){if(t!==null){if(e[B]&2048&&!(r&te.Self)){let o=wA(t,e,n,r,Ct);if(o!==Ct)return o}let s=oI(t,e,n,r,Ct);if(s!==Ct)return s}return iI(e,n,r,i)}function oI(t,e,n,r,i){let s=vA(n);if(typeof s=="function"){if(!Gv(e,t,r))return r&te.Host?rI(i,n,r):iI(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&te.Optional))th(n);else return o}finally{Yv()}}else if(typeof s=="number"){let o=null,c=nI(t,e),u=mi,l=r&te.Host?e[At][It]:null;for((c===-1||r&te.SkipSelf)&&(u=c===-1?_h(t,e):e[c+8],u===mi||!x_(r,!1)?c=-1:(o=e[W],c=Fa(u),e=La(u,e)));c!==-1;){let f=e[W];if(N_(s,c,f.data)){let p=_A(c,e,n,o,r,l);if(p!==Ct)return p}u=e[c+8],u!==mi&&x_(r,e[W].data[c+8]===l)&&N_(s,c,e)?(o=f,c=Fa(u),e=La(u,e)):c=-1}}return i}function _A(t,e,n,r,i,s){let o=e[W],c=o.data[t+8],u=r==null?sc(c)&&hd:r!=o&&(c.type&3)!==0,l=i&te.Host&&s===c,f=Ca(c,o,n,u,l);return f!==null?gr(e,o,f,c):Ct}function Ca(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,l=t.directiveEnd,f=s>>20,p=r?c:c+f,g=i?c+f:l;for(let _=p;_<g;_++){let A=o[_];if(_<u&&n===A||_>=u&&A.type===n)return _}if(i){let _=o[u];if(_&&Sn(_)&&_.type===n)return u}return null}function gr(t,e,n,r){let i=t[n],s=e.data;if(lA(i)){let o=i;o.resolving&&$C(BC(s[n]));let c=Va(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?tt(o.injectImpl):null,f=Gv(t,r,te.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&cA(n,s[n],e)}finally{l!==null&&tt(l),Va(c),o.resolving=!1,Yv()}}return i}function vA(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Cs)?t[Cs]:void 0;return typeof e=="number"?e>=0?e&eI:IA:e}function N_(t,e,n){let r=1<<t;return!!(n[e+(t>>tI)]&r)}function x_(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var ur=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return sI(this._tNode,this._lView,e,tc(r),n)}};function IA(){return new ur(rt(),ne())}function W$(t){return Ls(()=>{let e=t.prototype.constructor,n=e[Ra]||pd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ra]||pd(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function pd(t){return iv(t)?()=>{let e=pd(Ke(t));return e&&e()}:lr(t)}function wA(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[B]&2048&&!(o[B]&512);){let c=oI(s,o,n,r|te.Self,Ct);if(c!==Ct)return c;let u=s.parent;if(!u){let l=o[xv];if(l){let f=l.get(n,Ct,r);if(f!==Ct)return f}u=aI(o),o=o[Ti]}s=u}return i}function aI(t){let e=t[W],n=e.type;return n===2?e.declTNode:n===1?t[It]:null}function EA(t){return yA(rt(),t)}function P_(t,e=null,n=null,r){let i=cI(t,e,n,r);return i.resolveInjectorInitializers(),i}function cI(t,e=null,n=null,r,i=new Set){let s=[n||dt,v0(t)];return r=r||(typeof t=="object"?void 0:Qe(t)),new Ns(s,e||sh(),r||null,i)}var it=(()=>{class t{static{this.THROW_IF_NOT_FOUND=As}static{this.NULL=new Ma}static create(n,r){if(Array.isArray(n))return P_({name:""},r,n,"");{let i=n.name??"";return P_({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=me({token:t,providedIn:"any",factory:()=>$e(pv)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();var TA="ngOriginalError";function zl(t){return t[TA]}var yr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&zl(e);for(;n&&zl(n);)n=zl(n);return n||null}},uI=new ue("",{providedIn:"root",factory:()=>ce(yr).handleError.bind(void 0)}),bi=(()=>{class t{static{this.__NG_ELEMENT_ID__=DA}static{this.__NG_ENV_ID__=n=>n}}return t})(),md=class extends bi{constructor(e){super(),this._lView=e}onDestroy(e){return Bv(this._lView,e),()=>q0(this._lView,e)}};function DA(){return new md(ne())}function bA(){return Ci(rt(),ne())}function Ci(t,e){return new Er(ft(t,e))}var Er=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=bA}}return t})();function CA(t){return t instanceof Er?t.nativeElement:t}var gd=class extends In{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Nv()&&(this.destroyRef=ce(bi,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Gl(s),i&&(i=Gl(i)),o&&(o=Gl(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(c),c}};function Gl(t){return e=>{setTimeout(t,void 0,e)}}var ar=gd;function AA(){return this._results[Symbol.iterator]()}var yd=class t{get changes(){return this._changes??=new ar}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=AA)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=ZC(e);(this._changesDetected=!XC(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function lI(t){return(t.flags&128)===128}var dI=new Map,SA=0;function RA(){return SA++}function NA(t){dI.set(t[ic],t)}function xA(t){dI.delete(t[ic])}var M_="__ngContext__";function Rn(t,e){cr(e)?(t[M_]=e[ic],NA(e)):t[M_]=e}function hI(t){return pI(t[Ps])}function fI(t){return pI(t[_t])}function pI(t){for(;t!==null&&!Yt(t);)t=t[_t];return t}var _d;function K$(t){_d=t}function PA(){if(_d!==void 0)return _d;if(typeof document<"u")return document;throw new Y(210,!1)}var Q$=new ue("",{providedIn:"root",factory:()=>MA}),MA="ng",kA=new ue(""),dc=new ue("",{providedIn:"platform",factory:()=>"unknown"});var Y$=new ue("",{providedIn:"root",factory:()=>PA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var OA="h",FA="b";var LA=()=>null;function vh(t,e,n=!1){return LA(t,e,n)}var mI=!1,VA=new ue("",{providedIn:"root",factory:()=>mI});var Ia;function UA(){if(Ia===void 0&&(Ia=null,Dt.trustedTypes))try{Ia=Dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ia}function k_(t){return UA()?.createScriptURL(t)||t}var ja=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ev})`}};function hc(t){return t instanceof ja?t.changingThisBreaksApplicationSecurity:t}function gI(t,e){let n=jA(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ev})`)}return n===e}function jA(t){return t instanceof ja&&t.getTypeName()||null}var BA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $A(t){return t=String(t),t.match(BA)?t:"unsafe:"+t}var Ih=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ih||{});function qA(t){let e=yI();return e?e.sanitize(Ih.URL,t)||"":gI(t,"URL")?hc(t):$A(ec(t))}function HA(t){let e=yI();if(e)return k_(e.sanitize(Ih.RESOURCE_URL,t)||"");if(gI(t,"ResourceURL"))return k_(hc(t));throw new Y(904,!1)}function zA(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?HA:qA}function J$(t,e,n){return zA(e,n)(t)}function yI(){let t=ne();return t&&t[vt].sanitizer}var GA=/^>|^->|<!--|-->|--!>|<!-$/g,WA=/(<|>)/g,KA="\u200B$1\u200B";function QA(t){return t.replace(GA,e=>e.replace(WA,KA))}function _I(t){return t instanceof Function?t():t}function YA(t){return(t??ce(it)).get(dc)==="browser"}var Ba=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ba||{}),JA;function wh(t,e){return JA(t,e)}function hi(t,e,n,r,i){if(r!=null){let s,o=!1;Yt(r)?s=r:cr(r)&&(o=!0,r=r[Qt]);let c=St(r);t===0&&n!==null?i==null?EI(e,n,c):qa(e,n,c,i||null,!0):t===1&&n!==null?qa(e,n,c,i||null,!0):t===2?mS(e,c,o):t===3&&e.destroyNode(c),s!=null&&yS(e,t,s,n,i)}}function XA(t,e){return t.createText(e)}function ZA(t,e,n){t.setValue(e,n)}function eS(t,e){return t.createComment(QA(e))}function vI(t,e,n){return t.createElement(e,n)}function tS(t,e){II(t,e),e[Qt]=null,e[It]=null}function nS(t,e,n,r,i,s){r[Qt]=i,r[It]=e,pc(t,r,n,1,i,s)}function II(t,e){e[vt].changeDetectionScheduler?.notify(1),pc(t,e,e[Se],2,null,null)}function rS(t){let e=t[Ps];if(!e)return Wl(t[W],t);for(;e;){let n=null;if(cr(e))n=e[Ps];else{let r=e[nt];r&&(n=r)}if(!n){for(;e&&!e[_t]&&e!==t;)cr(e)&&Wl(e[W],e),e=e[ke];e===null&&(e=t),cr(e)&&Wl(e[W],e),n=e&&e[_t]}e=n}}function iS(t,e,n,r){let i=nt+r,s=n.length;r>0&&(n[i-1][_t]=e),r<s-nt?(e[_t]=n[i],fv(n,nt+r,e)):(n.push(e),e[_t]=null),e[ke]=n;let o=e[Us];o!==null&&n!==o&&sS(o,e);let c=e[Wt];c!==null&&c.insertView(t),ld(e),e[B]|=128}function sS(t,e){let n=t[vi],i=e[ke][ke][At];e[At]!==i&&(t[B]|=ah.HasTransplantedViews),n===null?t[vi]=[e]:n.push(e)}function wI(t,e){let n=t[vi],r=n.indexOf(e);n.splice(r,1)}function $a(t,e){if(t.length<=nt)return;let n=nt+e,r=t[n];if(r){let i=r[Us];i!==null&&i!==t&&wI(i,r),e>0&&(t[n-1][_t]=r[_t]);let s=xa(t,nt+e);tS(r[W],r);let o=s[Wt];o!==null&&o.detachView(s[W]),r[ke]=null,r[_t]=null,r[B]&=-129}return r}function Eh(t,e){if(!(e[B]&256)){let n=e[Se];n.destroyNode&&pc(t,e,n,3,null,null),rS(e)}}function Wl(t,e){if(e[B]&256)return;let n=se(null);try{e[B]&=-129,e[B]|=256,e[hr]&&xy(e[hr]),aS(t,e),oS(t,e),e[W].type===1&&e[Se].destroy();let r=e[Us];if(r!==null&&Yt(e[ke])){r!==e[ke]&&wI(r,e);let i=e[Wt];i!==null&&i.detachView(t)}xA(e)}finally{se(n)}}function oS(t,e){let n=t.cleanup,r=e[xs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[xs]=null);let i=e[bn];if(i!==null){e[bn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function aS(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof mr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];bt(4,c,u);try{u.call(c)}finally{bt(5,c,u)}}else{bt(4,i,s);try{s.call(i)}finally{bt(5,i,s)}}}}}function cS(t,e,n){return uS(t,e.parent,n)}function uS(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Qt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ss.None||s===Ss.Emulated)return null}return ft(r,n)}}function qa(t,e,n,r,i){t.insertBefore(e,n,r,i)}function EI(t,e,n){t.appendChild(e,n)}function O_(t,e,n,r,i){r!==null?qa(t,e,n,r,i):EI(t,e,n)}function lS(t,e,n,r){t.removeChild(e,n,r)}function Th(t,e){return t.parentNode(e)}function dS(t,e){return t.nextSibling(e)}function hS(t,e,n){return pS(t,e,n)}function fS(t,e,n){return t.type&40?ft(t,n):null}var pS=fS,F_;function fc(t,e,n,r){let i=cS(t,r,e),s=e[Se],o=r.parent||e[It],c=hS(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)O_(s,i,n[u],c,!1);else O_(s,i,n,c,!1);F_!==void 0&&F_(s,r,e,n,i)}function Aa(t,e){if(e!==null){let n=e.type;if(n&3)return ft(e,t);if(n&4)return vd(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Aa(t,r);{let i=t[e.index];return Yt(i)?vd(-1,i):St(i)}}else{if(n&32)return wh(e,t)()||St(t[e.index]);{let r=TI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ks(t[At]);return Aa(i,r)}else return Aa(t,e.next)}}}return null}function TI(t,e){if(e!==null){let r=t[At][It],i=e.projection;return r.projection[i]}return null}function vd(t,e){let n=nt+t+1;if(n<e.length){let r=e[n],i=r[W].firstChild;if(i!==null)return Aa(r,i)}return e[fr]}function mS(t,e,n){let r=Th(t,e);r&&lS(t,r,e,n)}function Dh(t,e,n,r,i,s,o){for(;n!=null;){let c=r[n.index],u=n.type;if(o&&e===0&&(c&&Rn(St(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Dh(t,e,n.child,r,i,s,!1),hi(e,t,i,c,s);else if(u&32){let l=wh(n,r),f;for(;f=l();)hi(e,t,i,f,s);hi(e,t,i,c,s)}else u&16?gS(t,e,r,n,i,s):hi(e,t,i,c,s);n=o?n.projectionNext:n.next}}function pc(t,e,n,r,i,s){Dh(n,r,t.firstChild,e,i,s,!1)}function gS(t,e,n,r,i,s){let o=n[At],u=o[It].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];hi(e,t,i,f,s)}else{let l=u,f=o[ke];lI(r)&&(l.flags|=128),Dh(t,e,l,f,i,s,!0)}}function yS(t,e,n,r,i){let s=n[fr],o=St(n);s!==o&&hi(e,t,r,s,i);for(let c=nt;c<n.length;c++){let u=n[c];pc(u[W],u,t,e,r,s)}}function _S(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ba.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ba.Important),t.setStyle(n,r,i,s))}}function vS(t,e,n){t.setAttribute(e,"style",n)}function DI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function bI(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&sd(t,e,r),i!==null&&DI(t,e,i),s!==null&&vS(t,e,s)}var Jt={};function X$(t=1){CI(Oe(),ne(),Di()+t,!1)}function CI(t,e,n,r){if(!r)if((e[B]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Da(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ba(e,s,0,n)}pr(n)}function Je(t,e=te.Default){let n=ne();if(n===null)return $e(t,e);let r=rt();return sI(r,n,Ke(t),e)}function AI(t,e,n,r,i,s){let o=se(null);try{let c=null;i&Cn.SignalBased&&(c=e[r][vn]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&Cn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):Mv(e,c,r,s)}finally{se(o)}}function IS(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)pr(~i);else{let s=i,o=n[++r],c=n[++r];tA(o,s);let u=e[s];c(2,u)}}}finally{pr(-1)}}function mc(t,e,n,r,i,s,o,c,u,l,f){let p=e.blueprint.slice();return p[Qt]=i,p[B]=r|4|128|8|64,(l!==null||t&&t[B]&2048)&&(p[B]|=2048),jv(p),p[ke]=p[Ti]=t,p[ht]=n,p[vt]=o||t&&t[vt],p[Se]=c||t&&t[Se],p[_i]=u||t&&t[_i]||null,p[It]=s,p[ic]=RA(),p[ka]=f,p[xv]=l,p[At]=e.type==2?t[At]:p,p}function Bs(t,e,n,r,i){let s=t.data[e];if(s===null)s=wS(t,e,n,r,i),eA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Y0();s.injectorIndex=o===null?-1:o.injectorIndex}return wr(s,!0),s}function wS(t,e,n,r,i){let s=qv(),o=fh(),c=o?s:s&&s.parent,u=t.data[e]=AS(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function SI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function RI(t,e,n,r,i){let s=Di(),o=r&2;try{pr(-1),o&&e.length>Ye&&CI(t,e,Ye,!1),bt(o?2:0,i),n(r,i)}finally{pr(s),bt(o?3:1,i)}}function bh(t,e,n){if(ch(e)){let r=se(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{se(r)}}}function Ch(t,e,n){$v()&&(MS(t,e,n,ft(n,e)),(n.flags&64)===64&&MI(t,e,n))}function Ah(t,e,n=ft){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function NI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Sh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Sh(t,e,n,r,i,s,o,c,u,l,f){let p=Ye+r,g=p+i,_=ES(p,g),A=typeof l=="function"?l():l;return _[W]={type:t,blueprint:_,template:n,queries:null,viewQuery:c,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function ES(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jt);return n}function TS(t,e,n,r){let s=r.get(VA,mI)||n===Ss.ShadowDom,o=t.selectRootElement(e,s);return DS(o),o}function DS(t){bS(t)}var bS=()=>null;function CS(t,e,n,r){let i=FI(e);i.push(n),t.firstCreatePass&&LI(t).push(r,i.length-1)}function AS(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return W0()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function L_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=Cn.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?V_(r,n,l,c,u):V_(r,n,l,c)}return r}function V_(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function SS(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,l=null;for(let f=r;f<i;f++){let p=s[f],g=n?n.get(p):null,_=g?g.inputs:null,A=g?g.outputs:null;u=L_(0,p.inputs,f,u,_),l=L_(1,p.outputs,f,l,A);let x=u!==null&&o!==null&&!rh(e)?HS(u,f,o):null;c.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=l}function RS(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function xI(t,e,n,r,i,s,o,c){let u=ft(e,n),l=e.inputs,f;!c&&l!=null&&(f=l[r])?(Nh(t,n,f,r,i),sc(e)&&NS(n,e.index)):e.type&3?(r=RS(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function NS(t,e){let n=Pn(e,t);n[B]&16||(n[B]|=64)}function Rh(t,e,n,r){if($v()){let i=r===null?null:{"":-1},s=OS(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&PI(t,e,n,o,i,c),i&&FS(n,r,i)}n.mergedAttrs=Rs(n.mergedAttrs,n.attrs)}function PI(t,e,n,r,i,s){for(let l=0;l<r.length;l++)fd(Ua(n,e),t,r[l].type);VS(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=SI(t,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];n.mergedAttrs=Rs(n.mergedAttrs,f.hostAttrs),US(t,n,e,u,f),LS(u,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}SS(t,n,s)}function xS(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;PS(o)!=c&&o.push(c),o.push(n,r,s)}}function PS(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function MS(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;sc(n)&&jS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ua(n,e),Rn(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],l=gr(e,t,c,n);if(Rn(l,e),o!==null&&qS(e,c-i,l,u,n,o),Sn(u)){let f=Pn(n.index,e);f[ht]=gr(e,t,c,n)}}}function MI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=nA();try{pr(s);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];dd(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&kS(u,l)}}finally{pr(-1),dd(o)}}function kS(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function OS(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(u0(e,o.selectors,!1))if(r||(r=[]),Sn(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;Id(t,e,u)}else r.unshift(o),Id(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Id(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function FS(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Y(-301,!1);r.push(e[i],s)}}}function LS(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Sn(e)&&(n[""]=t)}}function VS(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function US(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=lr(i.type,!0)),o=new mr(s,Sn(i),Je);t.blueprint[r]=o,n[r]=o,xS(t,e,r,SI(t,n,i.hostVars,Jt),i)}function jS(t,e,n){let r=ft(e,t),i=NI(n),s=t[vt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=gc(t,mc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function BS(t,e,n,r,i,s){let o=ft(t,e);$S(e[Se],o,s,t.value,n,r,i)}function $S(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let c=o==null?ec(s):o(s,r||"",i);t.setAttribute(e,i,c,n)}}function qS(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],l=o[c++],f=o[c++],p=o[c++];AI(r,n,u,l,f,p)}}function HS(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function kI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function OI(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];ph(s),c.contentQueries(2,e[o],o)}}}finally{se(r)}}}function gc(t,e){return t[Ps]?t[A_][_t]=e:t[Ps]=e,t[A_]=e,e}function wd(t,e,n){ph(0);let r=se(null);try{e(t,n)}finally{se(r)}}function FI(t){return t[xs]||(t[xs]=[])}function LI(t){return t.cleanup||(t.cleanup=[])}function VI(t,e){let n=t[_i],r=n?n.get(yr,null):null;r&&r.handleError(e)}function Nh(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],l=e[o],f=t.data[o];AI(f,l,r,c,u,i)}}function zS(t,e,n){let r=Uv(e,t);ZA(t[Se],r,n)}function GS(t,e){let n=Pn(e,t),r=n[W];WS(r,n);let i=n[Qt];i!==null&&n[ka]===null&&(n[ka]=vh(i,n[_i])),xh(r,n,n[ht])}function WS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function xh(t,e,n){mh(e);try{let r=t.viewQuery;r!==null&&wd(1,r,n);let i=t.template;i!==null&&RI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Wt]?.finishViewCreation(t),t.staticContentQueries&&OI(t,e),t.staticViewQueries&&wd(2,t.viewQuery,n);let s=t.components;s!==null&&KS(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[B]&=-5,gh()}}function KS(t,e){for(let n=0;n<e.length;n++)GS(t,e[n])}function UI(t,e,n,r){let i=se(null);try{let s=e.tView,c=t[B]&4096?4096:16,u=mc(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Us]=l;let f=t[Wt];return f!==null&&(u[Wt]=f.createEmbeddedView(s)),xh(s,u,n),u}finally{se(i)}}function QS(t,e){let n=nt+e;if(n<t.length)return t[n]}function Ed(t,e){return!e||e.firstChild===null||lI(t)}function jI(t,e,n,r=!0){let i=e[W];if(iS(i,e,t,n),r){let o=vd(n,t),c=e[Se],u=Th(c,t[fr]);u!==null&&nS(i,t[It],c,e,u,o)}let s=e[ka];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function YS(t,e){let n=$a(t,e);return n!==void 0&&Eh(n[W],n),n}function Ha(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(St(s)),Yt(s)&&JS(s,r);let o=n.type;if(o&8)Ha(t,e,n.child,r);else if(o&32){let c=wh(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=TI(e,n);if(Array.isArray(c))r.push(...c);else{let u=ks(e[At]);Ha(u[W],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function JS(t,e){for(let n=nt;n<t.length;n++){let r=t[n],i=r[W].firstChild;i!==null&&Ha(r[W],r,i,e)}t[fr]!==t[Qt]&&e.push(t[fr])}var BI=[];function XS(t){return t[hr]??ZS(t)}function ZS(t){let e=BI.pop()??Object.create(tR);return e.lView=t,e}function eR(t){t.lView[hr]!==t&&(t.lView=null,BI.push(t))}var tR=zt(Ht({},Wo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ms(t.lView)},consumerOnSignalRead(){this.lView[hr]=this}}),$I=100;function qI(t,e=!0,n=0){let r=t[vt],i=r.rendererFactory,s=!1;s||i.begin?.();try{nR(t,n)}catch(o){throw e&&VI(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function nR(t,e){Td(t,e);let n=0;for(;hh(t);){if(n===$I)throw new Y(103,!1);n++,Td(t,1)}}function rR(t,e,n,r){let i=e[B];if((i&256)===256)return;let s=!1;!s&&e[vt].inlineEffectRunner?.flush(),mh(e);let o=null,c=null;!s&&iR(t)&&(c=XS(e),o=vl(c));try{jv(e),X0(t.bindingStartIndex),n!==null&&RI(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&Da(e,p,null)}else{let p=t.preOrderHooks;p!==null&&ba(e,p,0,null),ql(e,0)}if(sR(e),HI(e,0),t.contentQueries!==null&&OI(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&Da(e,p)}else{let p=t.contentHooks;p!==null&&ba(e,p,1),ql(e,1)}IS(t,e);let l=t.components;l!==null&&GI(e,l,0);let f=t.viewQuery;if(f!==null&&wd(2,f,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&Da(e,p)}else{let p=t.viewHooks;p!==null&&ba(e,p,2),ql(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[$l]){for(let p of e[$l])p();e[$l]=null}s||(e[B]&=-73)}catch(u){throw Ms(e),u}finally{c!==null&&(Il(c,o),eR(c)),gh()}}function iR(t){return t.type!==2}function HI(t,e){for(let n=hI(t);n!==null;n=fI(n))for(let r=nt;r<n.length;r++){let i=n[r];zI(i,e)}}function sR(t){for(let e=hI(t);e!==null;e=fI(e)){if(!(e[B]&ah.HasTransplantedViews))continue;let n=e[vi];for(let r=0;r<n.length;r++){let i=n[r],s=i[ke];B0(i)}}}function oR(t,e,n){let r=Pn(e,t);zI(r,n)}function zI(t,e){dh(t)&&Td(t,e)}function Td(t,e){let r=t[W],i=t[B],s=t[hr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&wl(s)),s&&(s.dirty=!1),t[B]&=-9217,o)rR(r,t,r.template,t[ht]);else if(i&8192){HI(t,1);let c=r.components;c!==null&&GI(t,c,1)}}function GI(t,e,n){for(let r=0;r<e.length;r++)oR(t,e[r],n)}function Ph(t){for(t[vt].changeDetectionScheduler?.notify();t;){t[B]|=64;let e=ks(t);if(P0(t)&&!e)return t;t=e}return null}var _r=class{get rootNodes(){let e=this._lView,n=e[W];return Ha(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ht]}set context(e){this._lView[ht]=e}get destroyed(){return(this._lView[B]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ke];if(Yt(e)){let n=e[Oa],r=n?n.indexOf(this):-1;r>-1&&($a(e,r),xa(n,r))}this._attachedToViewContainer=!1}Eh(this._lView[W],this._lView)}onDestroy(e){Bv(this._lView,e)}markForCheck(){Ph(this._cdRefInjectingView||this._lView)}detach(){this._lView[B]&=-129}reattach(){ld(this._lView),this._lView[B]|=128}detectChanges(){this._lView[B]|=1024,qI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,II(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e,ld(this._lView)}},vr=(()=>{class t{static{this.__NG_ELEMENT_ID__=uR}}return t})(),aR=vr,cR=class extends aR{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=UI(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new _r(i)}};function uR(){return yc(rt(),ne())}function yc(t,e){return t.type&4?new cR(e,t,Ci(t,e)):null}var eq=new RegExp(`^(\\d+)*(${FA}|${OA})*(.*)`);var lR=()=>null;function Dd(t,e){return lR(t,e)}var za=class{},bd=class{},Ga=class{};function dR(t){let e=Error(`No component factory found for ${Qe(t)}.`);return e[hR]=t,e}var hR="ngComponent";var Cd=class{resolveComponentFactory(e){throw dR(e)}},_c=(()=>{class t{static{this.NULL=new Cd}}return t})(),Ad=class{},Mh=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>fR()}}return t})();function fR(){let t=ne(),e=rt(),n=Pn(e.index,t);return(cr(n)?n:t)[Se]}var pR=(()=>{class t{static{this.\u0275prov=me({token:t,providedIn:"root",factory:()=>null})}}return t})(),Kl={};var U_=new Set;function Ai(t){U_.has(t)||(U_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function j_(...t){}function mR(){let t=typeof Dt.requestAnimationFrame=="function",e=Dt[t?"requestAnimationFrame":"setTimeout"],n=Dt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ie=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ar(!1),this.onMicrotaskEmpty=new ar(!1),this.onStable=new ar(!1),this.onError=new ar(!1),typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=mR().nativeRequestAnimationFrame,_R(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Y(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,gR,j_,j_);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},gR={};function kh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yR(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Sd(t),t.isCheckStableRunning=!0,kh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Sd(t))}function _R(t){let e=()=>{yR(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,c)=>{if(vR(c))return n.invokeTask(i,s,o,c);try{return B_(t),n.invokeTask(i,s,o,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),$_(t)}},onInvoke:(n,r,i,s,o,c,u)=>{try{return B_(t),n.invoke(i,s,o,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),$_(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Sd(t),kh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Sd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function B_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $_(t){t._nesting--,kh(t)}function vR(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var fi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(fi||{}),IR={destroy(){}};function wR(t,e){!e&&oh(wR);let n=e?.injector??ce(it);if(!YA(n))return IR;Ai("NgAfterNextRender");let r=n.get(Oh),i=r.handler??=new Nd,s=e?.phase??fi.MixedReadWrite,o=()=>{i.unregister(u),c()},c=n.get(bi).onDestroy(o),u=N0(n,()=>new Rd(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var Rd=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=ce(Ie),this.errorHandler=ce(yr,{optional:!0}),ce(za,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Nd=class{constructor(){this.executingCallbacks=!1,this.buckets={[fi.EarlyRead]:new Set,[fi.Write]:new Set,[fi.MixedReadWrite]:new Set,[fi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Oh=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=me({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Wa(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=y_(i,c);else if(s==2){let u=c,l=e[++o];r=y_(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ka=class extends _c{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=dr(e);return new Os(n,this.ngModule)}};function q_(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function ER(t){let e=t.toLowerCase();return e==="svg"?Vv:e==="math"?F0:null}var xd=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=tc(r);let i=this.injector.get(e,Kl,r);return i!==Kl||n===Kl?i:this.parentInjector.get(e,n,r)}},Os=class extends Ga{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=q_(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return q_(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=f0(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=se(null);try{i=i||this.ngModule;let o=i instanceof An?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new xd(e,o):e,u=c.get(Ad,null);if(u===null)throw new Y(407,!1);let l=c.get(pR,null),f=c.get(Oh,null),p=c.get(za,null),g={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:p},_=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=r?TS(_,r,this.componentDef.encapsulation,c):vI(_,A,ER(A)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let k=null;x!==null&&(k=vh(x,c,!0));let V=Sh(0,null,null,1,0,null,null,null,null,null,null),L=mc(null,V,null,R,null,null,g,_,c,null,k);mh(L);let j,le;try{let q=this.componentDef,T,y=null;q.findHostDirectiveDefs?(T=[],y=new Map,q.findHostDirectiveDefs(q,T,y),T.push(q)):T=[q];let v=TR(L,x),E=DR(v,x,q,T,L,g,_);le=uh(V,Ye),x&&AR(_,q,x,r),n!==void 0&&SR(le,this.ngContentSelectors,n),j=CR(E,q,T,y,L,[RR]),xh(V,L,null)}finally{gh()}return new Pd(this.componentType,j,Ci(le,L),L,le)}finally{se(s)}}},Pd=class extends bd{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new _r(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Nh(s[W],s,i,e,n),this.previousInputValues.set(e,n);let o=Pn(this._tNode.index,s);Ph(o)}}get injector(){return new ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function TR(t,e){let n=t[W],r=Ye;return t[r]=e,Bs(n,r,2,"#host",null)}function DR(t,e,n,r,i,s,o){let c=i[W];bR(r,t,e,o);let u=null;e!==null&&(u=vh(e,i[_i]));let l=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let p=mc(i,NI(n),null,f,i[t.index],t,s,l,null,null,u);return c.firstCreatePass&&Id(c,t,r.length-1),gc(i,p),i[t.index]=p}function bR(t,e,n,r){for(let i of t)e.mergedAttrs=Rs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Wa(e,e.mergedAttrs,!0),n!==null&&bI(r,n,e))}function CR(t,e,n,r,i,s){let o=rt(),c=i[W],u=ft(o,i);PI(c,i,o,n,null,r);for(let f=0;f<n.length;f++){let p=o.directiveStart+f,g=gr(i,c,p,o);Rn(g,i)}MI(c,i,o),u&&Rn(u,i);let l=gr(i,c,o.directiveStart+o.componentOffset,o);if(t[ht]=i[ht]=l,s!==null)for(let f of s)f(l,e);return bh(c,o,i),l}function AR(t,e,n,r){if(r)sd(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=p0(e.selectors[0]);i&&sd(t,n,i),s&&s.length>0&&DI(t,n,s.join(" "))}}function SR(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function RR(){let t=rt();lc(ne()[W],t)}var Si=(()=>{class t{static{this.__NG_ELEMENT_ID__=NR}}return t})();function NR(){let t=rt();return KI(t,ne())}var xR=Si,WI=class extends xR{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ci(this._hostTNode,this._hostLView)}get injector(){return new ur(this._hostTNode,this._hostLView)}get parentInjector(){let e=_h(this._hostTNode,this._hostLView);if(Zv(e)){let n=La(e,this._hostLView),r=Fa(e),i=n[W].data[r+8];return new ur(i,n)}else return new ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=H_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-nt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Dd(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,Ed(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!x0(e),c;if(o)c=n;else{let A=n||{};c=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Os(dr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?l:this.parentInjector).get(An,null);x&&(s=x)}let f=dr(u.componentType??{}),p=Dd(this._lContainer,f?.id??null),g=p?.firstChild??null,_=u.create(l,i,g,s);return this.insertImpl(_.hostView,c,Ed(this._hostTNode,p)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(j0(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[ke],l=new WI(u,u[It],u[ke]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return jI(o,i,s,r),e.attachToViewContainerRef(),fv(Ql(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=H_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=$a(this._lContainer,n);r&&(xa(Ql(this._lContainer),n),Eh(r[W],r))}detach(e){let n=this._adjustIndex(e,-1),r=$a(this._lContainer,n);return r&&xa(Ql(this._lContainer),n)!=null?new _r(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function H_(t){return t[Oa]}function Ql(t){return t[Oa]||(t[Oa]=[])}function KI(t,e){let n,r=e[t.index];return Yt(r)?n=r:(n=kI(r,e,null,t),e[t.index]=n,gc(e,n)),MR(n,e,t,r),new WI(n,t,e)}function PR(t,e){let n=t[Se],r=n.createComment(""),i=ft(e,t),s=Th(n,i);return qa(n,s,r,dS(n,i),!1),r}var MR=FR,kR=()=>!1;function OR(t,e,n){return kR(t,e,n)}function FR(t,e,n,r){if(t[fr])return;let i;n.type&8?i=St(r):i=PR(e,n),t[fr]=i}var Md=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},kd=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),c=this.queries[o.indexInDeclarationView];i.push(c.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Fh(e,n).matches!==null&&this.queries[n].setDirty()}},Od=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=HR(e):this.predicate=e}},Fd=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ld=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,LR(n,s)),this.matchTNodeWithReadOption(e,n,Ca(n,e,s,!1,!1))}else r===vr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ca(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Er||i===Si||i===vr&&n.type&4)this.addMatch(n.index,-2);else{let s=Ca(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function LR(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function VR(t,e){return t.type&11?Ci(t,e):t.type&4?yc(t,e):null}function UR(t,e,n,r){return n===-1?VR(e,t):n===-2?jR(t,e,r):gr(t,t[W],n,e)}function jR(t,e,n){if(n===Er)return Ci(e,t);if(n===vr)return yc(e,t);if(n===Si)return KI(e,t)}function QI(t,e,n,r){let i=e[Wt].queries[r];if(i.matches===null){let s=t.data,o=n.matches,c=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)c.push(null);else{let f=s[l];c.push(UR(e,f,o[u+1],n.metadata.read))}}i.matches=c}return i.matches}function Vd(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=QI(t,e,i,n);for(let c=0;c<s.length;c+=2){let u=s[c];if(u>0)r.push(o[c/2]);else{let l=s[c+1],f=e[-u];for(let p=nt;p<f.length;p++){let g=f[p];g[Us]===g[ke]&&Vd(g[W],g,l,r)}if(f[vi]!==null){let p=f[vi];for(let g=0;g<p.length;g++){let _=p[g];Vd(_[W],_,l,r)}}}}}return r}function BR(t,e){return t[Wt].queries[e].queryList}function $R(t,e,n){let r=new yd((n&4)===4);return CS(t,e,r,r.destroy),(e[Wt]??=new kd).queries.push(new Md(r))-1}function qR(t,e,n){let r=Oe();return r.firstCreatePass&&(zR(r,new Od(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),$R(r,ne(),e)}function HR(t){return t.split(",").map(e=>e.trim())}function zR(t,e,n){t.queries===null&&(t.queries=new Fd),t.queries.track(new Ld(e,n))}function Fh(t,e){return t.queries.getByIndex(e)}function GR(t,e){let n=t[W],r=Fh(n,e);return r.crossesNgTemplate?Vd(n,t,e,[]):QI(n,t,r,e)}function Tr(t,e){Ai("NgSignals");let n=Vy(t),r=n[vn];return e?.equal&&(r.equal=e.equal),n.set=i=>El(r,i),n.update=i=>Uy(r,i),n.asReadonly=WR.bind(n),n}function WR(){let t=this[vn];if(t.readonlyFn===void 0){let e=()=>this();e[vn]=t,t.readonlyFn=e}return t.readonlyFn}function KR(t){return Object.getPrototypeOf(t.prototype).constructor}function QR(t){let e=KR(t.type),n=!0,r=[t];for(;e;){let i;if(Sn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=wa(t.inputs),o.inputTransforms=wa(t.inputTransforms),o.declaredInputs=wa(t.declaredInputs),o.outputs=wa(t.outputs);let c=i.hostBindings;c&&eN(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&XR(t,u),l&&ZR(t,l),YR(t,i),MC(t.outputs,i.outputs),Sn(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let c=s[o];c&&c.ngInherit&&c(t),c===QR&&(n=!1)}}e=Object.getPrototypeOf(e)}JR(r)}function YR(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function JR(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Rs(i.hostAttrs,n=Rs(n,i.hostAttrs))}}function wa(t){return t===gi?{}:t===dt?[]:t}function XR(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function ZR(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function eN(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function tN(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Nn=class{},Ud=class{};var jd=class extends Nn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ka(this);let i=Ev(e);this._bootstrapComponents=_I(i.bootstrap),this._r3Injector=cI(e,n,[{provide:Nn,useValue:this},{provide:_c,useValue:this.componentFactoryResolver},...r],Qe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Bd=class extends Ud{constructor(e){super(),this.moduleType=e}create(e){return new jd(this.moduleType,e,[])}};var Qa=class extends Nn{constructor(e){super(),this.componentFactoryResolver=new Ka(this),this.instance=null;let n=new Ns([...e.providers,{provide:Nn,useValue:this},{provide:_c,useValue:this.componentFactoryResolver}],e.parent||sh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function nN(t,e,n=null){return new Qa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var YI=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Es(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function JI(t){return Lh(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function rN(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Lh(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Vh(t,e,n){return t[e]=n}function iN(t,e){return t[e]}function xn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function sN(t,e,n,r){let i=xn(t,e,n);return xn(t,e+1,r)||i}function oN(t){return(t.flags&32)===32}function aN(t,e,n,r,i,s,o,c,u){let l=e.consts,f=Bs(e,t,4,o||null,Ii(l,c));Rh(e,n,f,Ii(l,u)),lc(e,f);let p=f.tView=Sh(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function cN(t,e,n,r,i,s,o,c){let u=ne(),l=Oe(),f=t+Ye,p=l.firstCreatePass?aN(f,l,u,e,n,r,i,s,o):l.data[f];wr(p,!1);let g=uN(l,u,p,t);cc()&&fc(l,u,g,p),Rn(g,u);let _=kI(g,u,g,p);return u[f]=_,gc(u,_),OR(_,p,u),oc(p)&&Ch(l,u,p),o!=null&&Ah(u,p,c),cN}var uN=lN;function lN(t,e,n,r){return uc(!0),e[Se].createComment("")}function dN(t,e,n,r){let i=ne(),s=ac();if(xn(i,s,e)){let o=Oe(),c=yh();BS(c,i,t,e,n,r)}return dN}function XI(t,e,n,r){return xn(t,ac(),n)?e+ec(n)+r:Jt}function Ea(t,e){return t<<17|e<<2}function Ir(t){return t>>17&32767}function hN(t){return(t&2)==2}function fN(t,e){return t&131071|e<<17}function $d(t){return t|2}function wi(t){return(t&131068)>>2}function Yl(t,e){return t&-131069|e<<2}function pN(t){return(t&1)===1}function qd(t){return t|1}function mN(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=Ir(o),u=wi(o);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Vs(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let g=Ir(t[c+1]);t[r+1]=Ea(g,c),g!==0&&(t[g+1]=Yl(t[g+1],r)),t[c+1]=fN(t[c+1],r)}else t[r+1]=Ea(c,0),c!==0&&(t[c+1]=Yl(t[c+1],r)),c=r;else t[r+1]=Ea(u,0),c===0?c=r:t[u+1]=Yl(t[u+1],r),u=r;l&&(t[r+1]=$d(t[r+1])),z_(t,f,r,!0),z_(t,f,r,!1),gN(e,f,t,r,s),o=Ea(c,u),s?e.classBindings=o:e.styleBindings=o}function gN(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Vs(s,e)>=0&&(n[r+1]=qd(n[r+1]))}function z_(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ir(i):wi(i),c=!1;for(;o!==0&&(c===!1||s);){let u=t[o],l=t[o+1];yN(u,e)&&(c=!0,t[o+1]=r?qd(l):$d(l)),o=r?Ir(l):wi(l)}c&&(t[n+1]=r?$d(i):qd(i))}function yN(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Vs(t,e)>=0:!1}function _N(t,e,n){let r=ne(),i=ac();if(xn(r,i,e)){let s=Oe(),o=yh();xI(s,o,r,t,e,r[Se],n,!1)}return _N}function G_(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Nh(t,n,s[o],o,r)}function vN(t,e){return IN(t,e,null,!0),vN}function IN(t,e,n,r){let i=ne(),s=Oe(),o=Z0(2);if(s.firstUpdatePass&&EN(s,t,o,r),e!==Jt&&xn(i,o,e)){let c=s.data[Di()];AN(s,c,i,i[Se],t,i[o+1]=SN(e,n),r,o)}}function wN(t,e){return e>=t.expandoStartIndex}function EN(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Di()],o=wN(t,n);RN(s,r)&&e===null&&!o&&(e=!1),e=TN(i,s,e,r),mN(i,s,e,n,o,r)}}function TN(t,e,n,r){let i=rA(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Jl(null,t,e,n,r),n=Fs(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Jl(i,t,e,n,r),s===null){let u=DN(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Jl(null,t,e,u[1],r),u=Fs(u,e.attrs,r),bN(t,e,r,u))}else s=CN(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function DN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(wi(r)!==0)return t[Ir(r)]}function bN(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ir(i)]=r}function CN(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Fs(r,o,n)}return Fs(r,e.attrs,n)}function Jl(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=Fs(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function Fs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),t0(t,o,n?!0:e[++s]))}return t===void 0?null:t}function AN(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],f=pN(l)?W_(u,e,n,i,wi(l),o):void 0;if(!Ya(f)){Ya(s)||hN(l)&&(s=W_(u,null,n,i,c,o));let p=Uv(Di(),n);_S(r,o,p,i,s)}}function W_(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,g=n[i+1];g===Jt&&(g=p?dt:void 0);let _=p?jl(g,r):f===r?g:void 0;if(l&&!Ya(_)&&(_=jl(u,r)),Ya(_)&&(c=_,o))return c;let A=t[i+1];i=o?Ir(A):wi(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=jl(u,r))}return c}function Ya(t){return t!==void 0}function SN(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Qe(hc(t)))),t}function RN(t,e){return(t.flags&(e?8:16))!==0}function nq(t,e,n){Ai("NgControlFlow");let r=ne(),i=ac(),s=NN(r,Ye+t),o=0;if(xn(r,i,e)){let c=se(null);try{if(YS(s,o),e!==-1){let u=xN(r[W],Ye+e),l=Dd(s,u.tView.ssrId),f=UI(r,u,n,{dehydratedView:l});jI(s,f,o,Ed(u,l))}}finally{se(c)}}else{let c=QS(s,o);c!==void 0&&(c[ht]=n)}}function NN(t,e){return t[e]}function xN(t,e){return uh(t,e)}function PN(t,e,n,r,i,s){let o=e.consts,c=Ii(o,i),u=Bs(e,t,2,r,c);return Rh(e,n,u,Ii(o,s)),u.attrs!==null&&Wa(u,u.attrs,!1),u.mergedAttrs!==null&&Wa(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ZI(t,e,n,r){let i=ne(),s=Oe(),o=Ye+t,c=i[Se],u=s.firstCreatePass?PN(o,s,i,e,n,r):s.data[o],l=kN(s,i,u,c,e,t);i[o]=l;let f=oc(u);return wr(u,!0),bI(c,l,u),!oN(u)&&cc()&&fc(s,i,l,u),H0()===0&&Rn(l,i),z0(),f&&(Ch(s,i,u),bh(s,u,i)),r!==null&&Ah(i,u),ZI}function ew(){let t=rt();fh()?Hv():(t=t.parent,wr(t,!1));let e=t;K0(e)&&Q0(),G0();let n=Oe();return n.firstCreatePass&&(lc(n,t),ch(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&dA(e)&&G_(n,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hA(e)&&G_(n,e,ne(),e.stylesWithoutHost,!1),ew}function MN(t,e,n,r){return ZI(t,e,n,r),ew(),MN}var kN=(t,e,n,r,i,s)=>(uc(!0),vI(r,i,aA()));function ON(t,e,n,r,i){let s=e.consts,o=Ii(s,r),c=Bs(e,t,8,"ng-container",o);o!==null&&Wa(c,o,!0);let u=Ii(s,i);return Rh(e,n,c,u),e.queries!==null&&e.queries.elementStart(e,c),c}function FN(t,e,n){let r=ne(),i=Oe(),s=t+Ye,o=i.firstCreatePass?ON(s,i,r,e,n):i.data[s];wr(o,!0);let c=VN(i,r,o,t);return r[s]=c,cc()&&fc(i,r,c,o),Rn(c,r),oc(o)&&(Ch(i,r,o),bh(i,o,r)),n!=null&&Ah(r,o),FN}function LN(){let t=rt(),e=Oe();return fh()?Hv():(t=t.parent,wr(t,!1)),e.firstCreatePass&&(lc(e,t),ch(t)&&e.queries.elementEnd(t)),LN}var VN=(t,e,n,r)=>(uc(!0),eS(e[Se],""));function rq(){return ne()}var or=void 0;function UN(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var jN=["en",[["a","p"],["AM","PM"],or],[["AM","PM"],or,or],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],or,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],or,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",or,"{1} 'at' {0}",or],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",UN],Xl={};function vc(t){let e=BN(t),n=K_(e);if(n)return n;let r=e.split("-")[0];if(n=K_(r),n)return n;if(r==="en")return jN;throw new Y(701,!1)}function K_(t){return t in Xl||(Xl[t]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[t]),Xl[t]}var Dr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Dr||{});function BN(t){return t.toLowerCase().replace(/_/g,"-")}var Ja="en-US",$N="USD";var qN=Ja;function HN(t){typeof t=="string"&&(qN=t.toLowerCase().replace(/_/g,"-"))}function zN(t,e,n,r){let i=ne(),s=Oe(),o=rt();return WN(s,i,i[Se],o,t,e,r),zN}function GN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[xs],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function WN(t,e,n,r,i,s,o){let c=oc(r),l=t.firstCreatePass&&LI(t),f=e[ht],p=FI(e),g=!0;if(r.type&3||o){let x=ft(r,e),R=o?o(x):x,k=p.length,V=o?j=>o(St(j[r.index])):r.index,L=null;if(!o&&c&&(L=GN(t,e,i,r.index)),L!==null){let j=L.__ngLastListenerFn__||L;j.__ngNextListenerFn__=s,L.__ngLastListenerFn__=s,g=!1}else{s=Y_(r,e,f,s,!1);let j=n.listen(R,i,s);p.push(s,j),l&&l.push(i,V,k,k+1)}}else s=Y_(r,e,f,s,!1);let _=r.outputs,A;if(g&&_!==null&&(A=_[i])){let x=A.length;if(x)for(let R=0;R<x;R+=2){let k=A[R],V=A[R+1],le=e[k][V].subscribe(s),q=p.length;p.push(s,le),l&&l.push(i,r.index,q,-(q+1))}}}function Q_(t,e,n,r){let i=se(null);try{return bt(6,e,n),n(r)!==!1}catch(s){return VI(t,s),!1}finally{bt(7,e,n),se(i)}}function Y_(t,e,n,r,i){return function s(o){if(o===Function)return r;let c=t.componentOffset>-1?Pn(t.index,e):e;Ph(c);let u=Q_(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=Q_(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function iq(t=1){return sA(t)}function KN(t,e,n){return tw(t,"",e,"",n),KN}function tw(t,e,n,r,i){let s=ne(),o=XI(s,e,n,r);if(o!==Jt){let c=Oe(),u=yh();xI(c,u,s,t,o,s[Se],i,!1)}return tw}function sq(t,e,n){qR(t,e,n)}function oq(t){let e=ne(),n=Oe(),r=zv();ph(r+1);let i=Fh(n,r);if(t.dirty&&U0(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=GR(e,r);t.reset(s,CA),t.notifyOnChanges()}return!0}return!1}function aq(){return BR(ne(),zv())}function QN(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function cq(t){let e=J0();return lh(e,Ye+t)}function uq(t,e=""){let n=ne(),r=Oe(),i=t+Ye,s=r.firstCreatePass?Bs(r,i,1,e,null):r.data[i],o=YN(r,n,s,e,t);n[i]=o,cc()&&fc(r,n,o,s),wr(s,!1)}var YN=(t,e,n,r,i)=>(uc(!0),XA(e[Se],r));function JN(t){return nw("",t,""),JN}function nw(t,e,n){let r=ne(),i=XI(r,t,e,n);return i!==Jt&&zS(r,Di(),i),nw}function XN(t,e,n){let r=Oe();if(r.firstCreatePass){let i=Sn(t);Hd(n,r.data,r.blueprint,i,!0),Hd(e,r.data,r.blueprint,i,!1)}}function Hd(t,e,n,r,i){if(t=Ke(t),Array.isArray(t))for(let s=0;s<t.length;s++)Hd(t[s],e,n,r,i);else{let s=Oe(),o=ne(),c=rt(),u=yi(t)?t:Ke(t.provide),l=Rv(t),f=c.providerIndexes&1048575,p=c.directiveStart,g=c.providerIndexes>>20;if(yi(t)||!t.multi){let _=new mr(l,i,Je),A=ed(u,e,i?f:f+g,p);A===-1?(fd(Ua(c,o),s,u),Zl(s,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(_),o.push(_)):(n[A]=_,o[A]=_)}else{let _=ed(u,e,f+g,p),A=ed(u,e,f,f+g),x=_>=0&&n[_],R=A>=0&&n[A];if(i&&!R||!i&&!x){fd(Ua(c,o),s,u);let k=tx(i?ex:ZN,n.length,i,r,l);!i&&R&&(n[A].providerFactory=k),Zl(s,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=rw(n[i?A:_],l,!i&&r);Zl(s,t,_>-1?_:A,k)}!i&&r&&R&&n[A].componentProviders++}}}function Zl(t,e,n,r){let i=yi(e),s=T0(e);if(i||s){let u=(s?Ke(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function rw(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ed(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ZN(t,e,n,r){return zd(this.multi,[])}function ex(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,c=gr(n,n[W],this.providerFactory.index,r);s=c.slice(0,o),zd(i,s);for(let u=o;u<c.length;u++)s.push(c[u])}else s=[],zd(i,s);return s}function zd(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function tx(t,e,n,r,i){let s=new mr(t,n,Je);return s.multi=[],s.index=e,s.componentProviders=0,rw(s,i,r&&!n),s}function lq(t,e=[]){return n=>{n.providersResolver=(r,i)=>XN(r,i?i(t):t,e)}}var nx=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=bv(!1,n.type),i=r.length>0?nN([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=me({token:t,providedIn:"environment",factory:()=>new t($e(An))})}}return t})();function dq(t){Ai("NgStandalone"),t.getStandaloneInjector=e=>e.get(nx).getOrCreateStandaloneInjector(t)}function hq(t,e,n){let r=js()+t,i=ne();return i[r]===Jt?Vh(i,r,n?e.call(n):e()):iN(i,r)}function fq(t,e,n,r){return sw(ne(),js(),t,e,n,r)}function pq(t,e,n,r,i){return ow(ne(),js(),t,e,n,r,i)}function iw(t,e){let n=t[e];return n===Jt?void 0:n}function sw(t,e,n,r,i,s){let o=e+n;return xn(t,o,i)?Vh(t,o+1,s?r.call(s,i):r(i)):iw(t,o+1)}function ow(t,e,n,r,i,s,o){let c=e+n;return sN(t,c,i,s)?Vh(t,c+2,o?r.call(o,i,s):r(i,s)):iw(t,c+2)}function mq(t,e){let n=Oe(),r,i=t+Ye;n.firstCreatePass?(r=rx(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=lr(r.type,!0)),o,c=tt(Je);try{let u=Va(!1),l=s();return Va(u),QN(n,ne(),i,l),l}finally{tt(c)}}function rx(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function gq(t,e,n){let r=t+Ye,i=ne(),s=lh(i,r);return aw(i,r)?sw(i,js(),e,s.transform,n,s):s.transform(n)}function yq(t,e,n,r){let i=t+Ye,s=ne(),o=lh(s,i);return aw(s,i)?ow(s,js(),e,o.transform,n,r,o):o.transform(n,r)}function aw(t,e){return t[W].data[e].pure}function _q(t,e){return yc(t,e)}var Ei=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},cw=new Ei("17.3.12"),vq=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var ix=new ue("");function Uh(t){return!!t&&typeof t.then=="function"}function uw(t){return!!t&&typeof t.subscribe=="function"}var sx=new ue(""),lw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=ce(sx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Uh(s))n.push(s);else if(uw(s)){let o=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ox=new ue("");function ax(){Ly(()=>{throw new Y(600,!1)})}function cx(t){return t.isBoundToModule}function ux(t,e,n){try{let r=n();return Uh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var dw=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ce(uI),this.afterRenderEffectManager=ce(Oh),this.externalTestViews=new Set,this.beforeRender=new In,this.afterTick=new In,this.componentTypes=[],this.components=[],this.isStable=ce(YI).hasPendingTasks.pipe(lt(n=>!n)),this._injector=ce(An)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Ga;if(!this._injector.get(lw).done){let g=!i&&y0(n),_=!1;throw new Y(405,_)}let o;i?o=n:o=this._injector.get(_c).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let c=cx(o)?void 0:this._injector.get(Nn),u=r||o.selector,l=o.create(it.NULL,[],u,c),f=l.location.nativeElement,p=l.injector.get(ix,null);return p?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),td(this.components,l),p?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new Y(101,!1);let r=se(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,se(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===$I)throw new Y(103,!1);if(n){let s=r===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:c}of this._views)lx(o,s,c)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Gd(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Gd(s))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;td(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(ox,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>td(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Y(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function td(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function lx(t,e,n){!e&&!Gd(t)||dx(t,n,e)}function Gd(t){return hh(t)}function dx(t,e,n){let r;n?(r=0,t[B]|=1024):t[B]&64?r=0:r=1,qI(t,e,r)}var Wd=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Iq=(()=>{class t{compileModuleSync(n){return new Bd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Ev(n),s=_I(i.declarations).reduce((o,c)=>{let u=dr(c);return u&&o.push(new Os(u)),o},[]);return new Wd(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var hx=(()=>{class t{constructor(){this.zone=ce(Ie),this.applicationRef=ce(dw)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function fx(t){return[{provide:Ie,useFactory:t},{provide:Pa,multi:!0,useFactory:()=>{let e=ce(hx,{optional:!0});return()=>e.initialize()}},{provide:Pa,multi:!0,useFactory:()=>{let e=ce(yx);return()=>{e.initialize()}}},{provide:uI,useFactory:px}]}function px(){let t=ce(Ie),e=ce(yr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function mx(t){let e=fx(()=>new Ie(gx(t)));return Kt([[],e])}function gx(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var yx=(()=>{class t{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=ce(Ie),this.pendingTasks=ce(YI)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _x(){return typeof $localize<"u"&&$localize.locale||Ja}var Ic=new ue("",{providedIn:"root",factory:()=>ce(Ic,te.Optional|te.SkipSelf)||_x()}),hw=new ue("",{providedIn:"root",factory:()=>$N});var fw=new ue("");var Sa=null;function vx(t=[],e){return it.create({name:e,providers:[{provide:Sv,useValue:"platform"},{provide:fw,useValue:new Set([()=>Sa=null])},...t]})}function Ix(t=[]){if(Sa)return Sa;let e=vx(t);return Sa=e,ax(),wx(e),e}function wx(t){t.get(kA,null)?.forEach(n=>n())}var pw=(()=>{class t{static{this.__NG_ELEMENT_ID__=Ex}}return t})();function Ex(t){return Tx(rt(),ne(),(t&16)===16)}function Tx(t,e,n){if(sc(t)&&!n){let r=Pn(t.index,e);return new _r(r,r)}else if(t.type&47){let r=e[At];return new _r(r,e)}return null}var Kd=class{constructor(){}supports(e){return JI(e)}create(e){return new Qd(e)}},Dx=(t,e)=>e,Qd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Dx}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<J_(r,i,s)?n:r,c=J_(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=c-i,f=u-i;if(l!=f){for(let g=0;g<l;g++){let _=g<s.length?s[g]:s[g]=0,A=_+g;f<=A&&A<l&&(s[g]=_+1)}let p=o.previousIndex;s[p]=f-l}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!JI(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,c),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,rN(e,c=>{o=this._trackByFn(i,c),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,c,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,o,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Yd(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Xa),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Xa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Yd=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Jd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Xa=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Jd,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function J_(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Xd=class{constructor(){}supports(e){return e instanceof Map||Lh(e)}create(){return new Zd}},Zd=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Lh(e)))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new eh(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},eh=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function X_(){return new jh([new Kd])}var jh=(()=>{class t{static{this.\u0275prov=me({token:t,providedIn:"root",factory:X_})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||X_()),deps:[[t,new hv,new Re]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new Y(901,!1)}}return t})();function Z_(){return new Bh([new Xd])}var Bh=(()=>{class t{static{this.\u0275prov=me({token:t,providedIn:"root",factory:Z_})}constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Z_()),deps:[[t,new hv,new Re]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Y(901,!1)}}return t})();function wq(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Ix(r),s=[mx(),...n||[]],c=new Qa({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(Ie);return u.run(()=>{c.resolveInjectorInitializers();let l=c.get(yr,null),f;u.runOutsideAngular(()=>{f=u.onError.subscribe({next:_=>{l.handleError(_)}})});let p=()=>c.destroy(),g=i.get(fw);return g.add(p),c.onDestroy(()=>{f.unsubscribe(),g.delete(p)}),ux(l,u,()=>{let _=c.get(lw);return _.runInitializers(),_.donePromise.then(()=>{let A=c.get(Ic,Ja);HN(A||Ja);let x=c.get(dw);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function bx(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function $s(t,e){Ai("NgSignals");let n=ky(t);return e?.equal&&(n[vn].equal=e.equal),n}var bw=null;function qh(){return bw}function Bq(t){bw??=t}var mw=class{};var Cw=new ue(""),Aw=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:()=>ce(Ax),providedIn:"platform"})}}return t})();var Ax=(()=>{class t extends Aw{constructor(){super(),this._doc=ce(Cw),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qh().getBaseHref(this._doc)}onPopState(n){let r=qh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=qh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Sw(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function gw(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function br(t){return t&&t[0]!=="?"?"?"+t:t}var Qh=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:()=>ce(Rx),providedIn:"root"})}}return t})(),Sx=new ue(""),Rx=(()=>{class t extends Qh{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ce(Cw).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Sw(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+br(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+br(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+br(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)($e(Aw),$e(Sx,8))}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Nx=(()=>{class t{constructor(n){this._subject=new ar,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Mx(gw(yw(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+br(r))}normalize(n){return t.stripTrailingSlash(Px(this._basePath,yw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+br(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+br(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=br}static{this.joinWithSlash=Sw}static{this.stripTrailingSlash=gw}static{this.\u0275fac=function(r){return new(r||t)($e(Qh))}}static{this.\u0275prov=me({token:t,factory:()=>xx(),providedIn:"root"})}}return t})();function xx(){return new Nx($e(Qh))}function Px(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function yw(t){return t.replace(/\/index.html$/,"")}function Mx(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Rw={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Nw=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Nw||{});var Xt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function qs(t,e){let n=vc(t),r=n[Dr.NumberSymbols][e];if(typeof r>"u"){if(e===Xt.CurrencyDecimal)return n[Dr.NumberSymbols][Xt.Decimal];if(e===Xt.CurrencyGroup)return n[Dr.NumberSymbols][Xt.Group]}return r}function kx(t,e){return vc(t)[Dr.NumberFormats][e]}function Ox(t){return vc(t)[Dr.Currencies]}function Fx(t,e,n="en"){let r=Ox(n)[t]||Rw[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var Lx=2;function Vx(t){let e,n=Rw[t];return n&&(e=n[2]),typeof e=="number"?e:Lx}var Ux=/^(\d+)?\.((\d+)(-(\d+))?)?$/,_w=22,wc=".",Hs="0",jx=";",Bx=",",Hh="#",vw="\xA4";function $x(t,e,n,r,i,s,o=!1){let c="",u=!1;if(!isFinite(t))c=qs(n,Xt.Infinity);else{let l=Gx(t);o&&(l=zx(l));let f=e.minInt,p=e.minFrac,g=e.maxFrac;if(s){let V=s.match(Ux);if(V===null)throw new Error(`${s} is not a valid digit info`);let L=V[1],j=V[3],le=V[5];L!=null&&(f=zh(L)),j!=null&&(p=zh(j)),le!=null?g=zh(le):j!=null&&p>g&&(g=p)}Wx(l,p,g);let _=l.digits,A=l.integerLen,x=l.exponent,R=[];for(u=_.every(V=>!V);A<f;A++)_.unshift(0);for(;A<0;A++)_.unshift(0);A>0?R=_.splice(A,_.length):(R=_,_=[0]);let k=[];for(_.length>=e.lgSize&&k.unshift(_.splice(-e.lgSize,_.length).join(""));_.length>e.gSize;)k.unshift(_.splice(-e.gSize,_.length).join(""));_.length&&k.unshift(_.join("")),c=k.join(qs(n,r)),R.length&&(c+=qs(n,i)+R.join("")),x&&(c+=qs(n,Xt.Exponential)+"+"+x)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function qx(t,e,n,r,i){let s=kx(e,Nw.Currency),o=Hx(s,qs(e,Xt.MinusSign));return o.minFrac=Vx(r),o.maxFrac=o.minFrac,$x(t,o,e,Xt.CurrencyGroup,Xt.CurrencyDecimal,i).replace(vw,n).replace(vw,"").trim()}function Hx(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(jx),i=r[0],s=r[1],o=i.indexOf(wc)!==-1?i.split(wc):[i.substring(0,i.lastIndexOf(Hs)+1),i.substring(i.lastIndexOf(Hs)+1)],c=o[0],u=o[1]||"";n.posPre=c.substring(0,c.indexOf(Hh));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===Hs?n.minFrac=n.maxFrac=f+1:p===Hh?n.maxFrac=f+1:n.posSuf+=p}let l=c.split(Bx);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let f=i.length-n.posPre.length-n.posSuf.length,p=s.indexOf(Hh);n.negPre=s.substring(0,p).replace(/'/g,""),n.negSuf=s.slice(p+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function zx(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function Gx(t){let e=Math.abs(t)+"",n=0,r,i,s,o,c;for((i=e.indexOf(wc))>-1&&(e=e.replace(wc,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Hs;s++);if(s===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===Hs;)c--;for(i-=s,r=[],o=0;s<=c;s++,o++)r[o]=Number(e.charAt(s))}return i>_w&&(r=r.splice(0,_w-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function Wx(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,c=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let p=o;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let p=1;p<o;p++)r[p]=0}if(c>=5)if(o-1<0){for(let p=0;p>o;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,l=e+t.integerLen,f=r.reduceRight(function(p,g,_,A){return g=g+p,A[_]=g<10?g:g-10,u&&(A[_]===0&&_>=l?A.pop():u=!1),g>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}function zh(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function $q(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Gh=/\s+/,Iw=[],qq=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=Iw,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Gh):Iw}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Gh):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Gh).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Je(Er),Je(Mh))}}static{this.\u0275dir=nc({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Cn.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var Wh=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Hq=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Wh(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,o),ww(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);ww(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Je(Si),Je(vr),Je(jh))}}static{this.\u0275dir=nc({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function ww(t,e){t.context.$implicit=e.item}var zq=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Kh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Ew("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Ew("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Je(Si),Je(vr))}}static{this.\u0275dir=nc({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Kh=class{constructor(){this.$implicit=null,this.ngIf=null}};function Ew(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Qe(e)}'.`)}function xw(t,e){return new Y(2100,!1)}var Kx=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Gq=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw xw(t,n);return n.replace(Kx,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=rc({name:"titlecase",type:t,pure:!0,standalone:!0})}}return t})();function Qx(t,e){return{key:t,value:e}}var Wq=(()=>{class t{constructor(n){this.differs=n,this.keyValues=[],this.compareFn=Tw}transform(n,r=Tw){if(!n||!(n instanceof Map)&&typeof n!="object")return null;this.differ??=this.differs.find(n).create();let i=this.differ.diff(n),s=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(o=>{this.keyValues.push(Qx(o.key,o.currentValue))})),(i||s)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}static{this.\u0275fac=function(r){return new(r||t)(Je(Bh,16))}}static{this.\u0275pipe=rc({name:"keyvalue",type:t,pure:!1,standalone:!0})}}return t})();function Tw(t,e){let n=t.key,r=e.key;if(n===r)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(n===null)return 1;if(r===null)return-1;if(typeof n=="string"&&typeof r=="string")return n<r?-1:1;if(typeof n=="number"&&typeof r=="number")return n-r;if(typeof n=="boolean"&&typeof r=="boolean")return n<r?-1:1;let i=String(n),s=String(r);return i==s?0:i<s?-1:1}var Kq=(()=>{class t{constructor(n,r="USD"){this._locale=n,this._defaultCurrencyCode=r}transform(n,r=this._defaultCurrencyCode,i="symbol",s,o){if(!Yx(n))return null;o||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let c=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?c=Fx(c,i==="symbol"?"wide":"narrow",o):c=i);try{let u=Jx(n);return qx(u,o,c,r,s)}catch(u){throw xw(t,u.message)}}static{this.\u0275fac=function(r){return new(r||t)(Je(Ic,16),Je(hw,16))}}static{this.\u0275pipe=rc({name:"currency",type:t,pure:!0,standalone:!0})}}return t})();function Yx(t){return!(t==null||t===""||t!==t)}function Jx(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Qq=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=vv({type:t})}static{this.\u0275inj=sv({})}}return t})(),Yq="browser",Xx="server";function Jq(t){return t===Xx}var Dw=class{};function Yh(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&oh(Yh);let r=n?e?.injector?.get(bi)??ce(bi):null,i;e?.requireSync?i=Tr({kind:0}):i=Tr({kind:1,value:e?.initialValue});let s=t.subscribe({next:o=>i.set({kind:1,value:o}),error:o=>{if(e?.rejectErrors)throw o;i.set({kind:2,error:o})}});return r?.onDestroy(s.unsubscribe.bind(s)),$s(()=>{let o=i();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new Y(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var Mw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Zx=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|c>>4,g=(c&15)<<2|l>>6,_=l&63;u||(_=64,o||(g=64)),r.push(n[f],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Mw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Zx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new Xh;let g=s<<2|c>>4;if(r.push(g),l!==64){let _=c<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Xh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},eP=function(t){let e=Mw(t);return kw.encodeByteArray(e,!0)},zs=function(t){return eP(t).replace(/\./g,"")},ef=function(t){try{return kw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var nP=()=>tP().__FIREBASE_DEFAULTS__,rP=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ef(t[1]);return e&&JSON.parse(e)},Tc=()=>{try{return nP()||rP()||iP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tf=t=>{var e,n;return(n=(e=Tc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Dc=t=>{let e=tf(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nf=()=>{var t;return(t=Tc())===null||t===void 0?void 0:t.config},rf=t=>{var e;return(e=Tc())===null||e===void 0?void 0:e[`_${t}`]};var Ec=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function bc(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zs(JSON.stringify(n)),zs(JSON.stringify(o)),""].join(".")}function xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ow(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function sP(){var t;let e=(t=Tc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lw(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uw(){let t=xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jw(){return!sP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sf(){try{return typeof indexedDB=="object"}catch{return!1}}function Bw(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var oP="FirebaseError",Xe=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oP,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}},Zt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?aP(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Xe(i,c,r)}};function aP(t,e){return t.replace(cP,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var cP=/\{\$([^}]+)}/g;function $w(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Pw(s)&&Pw(o)){if(!Cr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Pw(t){return t!==null&&typeof t=="object"}function Gs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qw(t,e){let n=new Zh(t,e);return n.subscribe.bind(n)}var Zh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jh),i.error===void 0&&(i.error=Jh),i.complete===void 0&&(i.complete=Jh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function uP(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jh(){}var sH=4*60*60*1e3;function Te(t){return t&&t._delegate?t._delegate:t}var st=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ar="[DEFAULT]";var of=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ec;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dP(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lP(t){return t===Ar?void 0:t}function dP(t){return t.instantiationMode==="EAGER"}var Cc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new of(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var hP=[],Z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Z||{}),fP={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},pP=Z.INFO,mP={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},gP=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=mP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mn=class{constructor(e){this.name=e,this._logLevel=pP,this._logHandler=gP,this._userLogHandler=null,hP.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var yP=(t,e)=>e.some(n=>t instanceof n),Hw,zw;function _P(){return Hw||(Hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vP(){return zw||(zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Gw=new WeakMap,cf=new WeakMap,Ww=new WeakMap,af=new WeakMap,lf=new WeakMap;function IP(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Rt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gw.set(n,t)}).catch(()=>{}),lf.set(e,t),e}function wP(t){if(cf.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cf.set(t,e)}var uf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ww.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Kw(t){uf=t(uf)}function EP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ac(this),e,...n);return Ww.set(r,e.sort?e.sort():[e]),Rt(r)}:vP().includes(t)?function(...e){return t.apply(Ac(this),e),Rt(Gw.get(this))}:function(...e){return Rt(t.apply(Ac(this),e))}}function TP(t){return typeof t=="function"?EP(t):(t instanceof IDBTransaction&&wP(t),yP(t,_P())?new Proxy(t,uf):t)}function Rt(t){if(t instanceof IDBRequest)return IP(t);if(af.has(t))return af.get(t);let e=TP(t);return e!==t&&(af.set(t,e),lf.set(e,t)),e}var Ac=t=>lf.get(t);function Yw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=Rt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Rt(o.result),u.oldVersion,u.newVersion,Rt(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var DP=["get","getKey","getAll","getAllKeys","count"],bP=["put","add","delete","clear"],df=new Map;function Qw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(df.get(e))return df.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=bP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DP.includes(n)))return;let s=function(o,...c){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return df.set(e,s),s}Kw(t=>zt(Ht({},t),{get:(e,n,r)=>Qw(e,n)||t.get(e,n,r),has:(e,n)=>!!Qw(e,n)||t.has(e,n)}));var ff=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CP(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function CP(t){let e=t.getComponent();return e?.type==="VERSION"}var pf="@firebase/app",Jw="0.10.13";var en=new Mn("@firebase/app"),AP="@firebase/app-compat",SP="@firebase/analytics-compat",RP="@firebase/analytics",NP="@firebase/app-check-compat",xP="@firebase/app-check",PP="@firebase/auth",MP="@firebase/auth-compat",kP="@firebase/database",OP="@firebase/data-connect",FP="@firebase/database-compat",LP="@firebase/functions",VP="@firebase/functions-compat",UP="@firebase/installations",jP="@firebase/installations-compat",BP="@firebase/messaging",$P="@firebase/messaging-compat",qP="@firebase/performance",HP="@firebase/performance-compat",zP="@firebase/remote-config",GP="@firebase/remote-config-compat",WP="@firebase/storage",KP="@firebase/storage-compat",QP="@firebase/firestore",YP="@firebase/vertexai-preview",JP="@firebase/firestore-compat",XP="firebase",ZP="10.14.1";var mf="[DEFAULT]",eM={[pf]:"fire-core",[AP]:"fire-core-compat",[RP]:"fire-analytics",[SP]:"fire-analytics-compat",[xP]:"fire-app-check",[NP]:"fire-app-check-compat",[PP]:"fire-auth",[MP]:"fire-auth-compat",[kP]:"fire-rtdb",[OP]:"fire-data-connect",[FP]:"fire-rtdb-compat",[LP]:"fire-fn",[VP]:"fire-fn-compat",[UP]:"fire-iid",[jP]:"fire-iid-compat",[BP]:"fire-fcm",[$P]:"fire-fcm-compat",[qP]:"fire-perf",[HP]:"fire-perf-compat",[zP]:"fire-rc",[GP]:"fire-rc-compat",[WP]:"fire-gcs",[KP]:"fire-gcs-compat",[QP]:"fire-fst",[JP]:"fire-fst-compat",[YP]:"fire-vertex","fire-js":"fire-js",[XP]:"fire-js-all"};var Ws=new Map,tM=new Map,gf=new Map;function Xw(t,e){try{t.container.addComponent(e)}catch(n){en.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nt(t){let e=t.name;if(gf.has(e))return en.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,t);for(let n of Ws.values())Xw(n,t);for(let n of tM.values())Xw(n,t);return!0}function Sr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t.settings!==void 0}var nM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kn=new Zt("app","Firebase",nM);var yf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new st("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}};var xt=ZP;function If(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:mf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw kn.create("bad-app-name",{appName:String(i)});if(n||(n=nf()),!n)throw kn.create("no-options");let s=Ws.get(i);if(s){if(Cr(n,s.options)&&Cr(r,s.config))return s;throw kn.create("duplicate-app",{appName:i})}let o=new Cc(i);for(let u of gf.values())o.addComponent(u);let c=new yf(n,r,o);return Ws.set(i,c),c}function On(t=mf){let e=Ws.get(t);if(!e&&t===mf&&nf())return If();if(!e)throw kn.create("no-app",{appName:t});return e}function Sc(){return Array.from(Ws.values())}function ge(t,e,n){var r;let i=(r=eM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),en.warn(c.join(" "));return}Nt(new st(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var rM="firebase-heartbeat-database",iM=1,Ks="firebase-heartbeat-store",hf=null;function nE(){return hf||(hf=Yw(rM,iM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ks)}catch(n){console.warn(n)}}}}).catch(t=>{throw kn.create("idb-open",{originalErrorMessage:t.message})})),hf}function sM(t){return w(this,null,function*(){try{let n=(yield nE()).transaction(Ks),r=yield n.objectStore(Ks).get(rE(t));return yield n.done,r}catch(e){if(e instanceof Xe)en.warn(e.message);else{let n=kn.create("idb-get",{originalErrorMessage:e?.message});en.warn(n.message)}}})}function Zw(t,e){return w(this,null,function*(){try{let r=(yield nE()).transaction(Ks,"readwrite");yield r.objectStore(Ks).put(e,rE(t)),yield r.done}catch(n){if(n instanceof Xe)en.warn(n.message);else{let r=kn.create("idb-set",{originalErrorMessage:n?.message});en.warn(r.message)}}})}function rE(t){return`${t.name}!${t.options.appId}`}var oM=1024,aM=30*24*60*60*1e3,_f=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new vf(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=aM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){en.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=eE(),{heartbeatsToSend:r,unsentEntries:i}=cM(this._heartbeatsCache.heartbeats),s=zs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return en.warn(n),""}})}};function eE(){return new Date().toISOString().substring(0,10)}function cM(t,e=oM){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var vf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return sf()?Bw().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield sM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Zw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Zw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tE(t){return zs(JSON.stringify({version:2,heartbeats:t})).length}function uM(t){Nt(new st("platform-logger",e=>new ff(e),"PRIVATE")),Nt(new st("heartbeat",e=>new _f(e),"PRIVATE")),ge(pf,Jw,t),ge(pf,Jw,"esm2017"),ge("fire-js","")}uM("");var lM="firebase",dM="10.14.1";ge(lM,dM,"app");var nn=new Ei("ANGULARFIRE2_VERSION");function Ni(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Nr=(t,e)=>{let n=e?[e]:Sc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Fn=class{constructor(){return Nr(hM)}},hM="app-check";function Ri(){}var Rc=class{zone;delegate;constructor(e,n=Ol){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},wf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ri,{},Ri,Ri)),n.pipe(Ul({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ln=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Rc(Zone.current)),this.insideAngular=n.run(()=>new Rc(Zone.current,kl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)($e(Ie))};static \u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Nc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function fM(t){return Nc().ngZone.runOutsideAngular(()=>t())}function Rr(t){return Nc().ngZone.run(()=>t())}function pM(t){return mM(Nc())(t)}function mM(t){return function(n){return n=n.lift(new wf(t.ngZone)),n.pipe(Tn(t.outsideAngular),En(t.insideAngular))}}var gM=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Rr(()=>t.apply(void 0,r))},Fe=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Rr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ri,{},Ri,Ri))),r[s]=gM(r[s],n));let i=fM(()=>t.apply(this,r));if(!e)if(i instanceof J){let s=Nc();return i.pipe(Tn(s.outsideAngular),En(s.insideAngular))}else return Rr(()=>i);return i instanceof J?i.pipe(pM):i instanceof Promise?Rr(()=>new Promise((s,o)=>i.then(c=>Rr(()=>s(c)),c=>Rr(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Rr(()=>i)};var wt=class{constructor(e){return e}},rn=class{constructor(){return Sc()}};function yM(t){return t&&t.length===1?t[0]:new wt(On())}var Ef=new ue("angularfire2._apps"),_M={provide:wt,useFactory:yM,deps:[[new Re,Ef]]},vM={provide:rn,deps:[[new Re,Ef]]};function IM(t){return(e,n)=>{let r=n.get(dc);ge("angularfire",nn.full,"core"),ge("angularfire",nn.full,"app"),ge("angular",cw.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new wt(i)}}function zH(t,...e){return Kt([_M,vM,{provide:Ef,useFactory:IM(t),multi:!0,deps:[Ie,it,Ln,...e]}])}var GH=Fe(If,!0);function _E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var vE=_E,IE=new Zt("auth","Firebase",_E());var Fc=new Mn("@firebase/auth");function wM(t,...e){Fc.logLevel<=Z.WARN&&Fc.warn(`Auth (${xt}): ${t}`,...e)}function Pc(t,...e){Fc.logLevel<=Z.ERROR&&Fc.error(`Auth (${xt}): ${t}`,...e)}function Un(t,...e){throw $f(t,...e)}function Pr(t,...e){return $f(t,...e)}function wE(t,e,n){let r=Object.assign(Object.assign({},vE()),{[e]:n});return new Zt("auth","Firebase",r).create(e,{appName:t.name})}function xr(t){return wE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $f(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IE.create(t,...e)}function H(t,e,...n){if(!t)throw $f(e,...n)}function sn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Pc(e),new Error(e)}function jn(t,e){t||sn(e)}function Cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function EM(){return iE()==="http:"||iE()==="https:"}function iE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function TM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EM()||Lw()||"connection"in navigator)?navigator.onLine:!0}function DM(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Mr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,jn(n>e,"Short delay should be less than long delay!"),this.isMobile=Ow()||Vw()}get(){return TM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qf(t,e){jn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Lc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var bM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var CM=new Mr(3e4,6e4);function Hf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Pi(s,o,c,u){return w(this,arguments,function*(t,e,n,r,i={}){return EE(t,i,()=>w(this,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=Gs(Object.assign({key:t.config.apiKey},f)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:g},l);return Fw()||(_.referrerPolicy="no-referrer"),Lc.fetch()(TE(t,t.config.apiHost,n,p),_)}))})}function EE(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},bM),e);try{let i=new Af(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw xc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xc(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xc(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw xc(t,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw wE(t,f,l);Un(t,f)}}catch(i){if(i instanceof Xe)throw i;Un(t,"network-request-failed",{message:String(i)})}})}function AM(s,o,c,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield Pi(t,e,n,r,i);return"mfaPendingCredential"in l&&Un(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function TE(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?qf(t.config,i):`${t.config.apiScheme}://${i}`}var Af=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pr(this.auth,"network-request-failed")),CM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function xc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Pr(t,e,r);return i.customData._tokenResponse=n,i}function SM(t,e){return w(this,null,function*(){return Pi(t,"POST","/v1/accounts:delete",e)})}function DE(t,e){return w(this,null,function*(){return Pi(t,"POST","/v1/accounts:lookup",e)})}function Qs(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function zf(t,e=!1){return w(this,null,function*(){let n=Te(t),r=yield n.getIdToken(e),i=Gf(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Qs(Tf(i.auth_time)),issuedAtTime:Qs(Tf(i.iat)),expirationTime:Qs(Tf(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Tf(t){return Number(t)*1e3}function Gf(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pc("JWT malformed, contained fewer than 3 sections"),null;try{let i=ef(n);return i?JSON.parse(i):(Pc("Failed to decode base64 JWT payload"),null)}catch(i){return Pc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sE(t){let e=Gf(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Js(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Xe&&RM(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function RM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Sf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Xs=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qs(this.lastLoginAt),this.creationTime=Qs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Vc(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Js(t,DE(n,{idToken:r}));H(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bE(s.providerUserInfo):[],c=NM(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!c?.length,f=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Xs(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function Wf(t){return w(this,null,function*(){let e=Te(t);yield Vc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function NM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bE(t){return t.map(e=>{var{providerId:n}=e,r=Fl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function xM(t,e){return w(this,null,function*(){let n=yield EE(t,{},()=>w(this,null,function*(){let r=Gs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=TE(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Lc.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function PM(t,e){return w(this,null,function*(){return Pi(t,"POST","/v2/accounts:revokeToken",Hf(t,e))})}var Ys=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");let n=sE(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield xM(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return sn("not implemented")}};function Vn(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var xi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Fl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xs(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield Js(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return zf(this,e)}reload(){return Wf(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Vc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(tn(this.auth.app))return Promise.reject(xr(this.auth));let e=yield this.getIdToken();return yield Js(this,SM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,V=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:L,emailVerified:j,isAnonymous:le,providerData:q,stsTokenManager:T}=n;H(L&&T,e,"internal-error");let y=Ys.fromJSON(this.name,T);H(typeof L=="string",e,"internal-error"),Vn(p,e.name),Vn(g,e.name),H(typeof j=="boolean",e,"internal-error"),H(typeof le=="boolean",e,"internal-error"),Vn(_,e.name),Vn(A,e.name),Vn(x,e.name),Vn(R,e.name),Vn(k,e.name),Vn(V,e.name);let v=new t({uid:L,auth:e,email:g,emailVerified:j,displayName:p,isAnonymous:le,photoURL:A,phoneNumber:_,tenantId:x,stsTokenManager:y,createdAt:k,lastLoginAt:V});return q&&Array.isArray(q)&&(v.providerData=q.map(E=>Object.assign({},E))),R&&(v._redirectEventId=R),v}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new Ys;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Vc(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];H(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?bE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Ys;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var oE=new Map;function on(t){jn(t instanceof Function,"Expected a class definition");let e=oE.get(t);return e?(jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oE.set(t,e),e)}var MM=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Rf=MM;function Mc(t,e,n){return`firebase:${t}:${e}:${n}`}var Uc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Mc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Mc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?xi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(on(Rf),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||on(Rf),o=Mc(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=yield l._get(o);if(f){let p=xi._fromJSON(e,f);l!==s&&(c=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function aE(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xE(e))return"Blackberry";if(PE(e))return"Webos";if(AE(e))return"Safari";if((e.includes("chrome/")||SE(e))&&!e.includes("edge/"))return"Chrome";if(NE(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function CE(t=xe()){return/firefox\//i.test(t)}function AE(t=xe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SE(t=xe()){return/crios\//i.test(t)}function RE(t=xe()){return/iemobile/i.test(t)}function NE(t=xe()){return/android/i.test(t)}function xE(t=xe()){return/blackberry/i.test(t)}function PE(t=xe()){return/webos/i.test(t)}function Kf(t=xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kM(t=xe()){var e;return Kf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OM(){return Uw()&&document.documentMode===10}function ME(t=xe()){return Kf(t)||NE(t)||PE(t)||xE(t)||/windows phone/i.test(t)||RE(t)}function kE(t,e=[]){let n;switch(t){case"Browser":n=aE(xe());break;case"Worker":n=`${aE(xe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xt}/${r}`}var Nf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function FM(n){return w(this,arguments,function*(t,e={}){return Pi(t,"GET","/v2/passwordPolicy",Hf(t,e))})}var LM=6,xf=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Pf=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jc(this),this.idTokenSubscription=new jc(this),this.beforeStateQueue=new Nf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=on(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Uc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield DE(this,{idToken:e}),r=yield xi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(tn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Vc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=DM()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(tn(this.app))return Promise.reject(xr(this));let n=e?Te(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return tn(this.app)?Promise.reject(xr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tn(this.app)?Promise.reject(xr(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(on(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield FM(this),n=new xf(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield PM(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&on(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=yield Uc.create(this,[on(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&wM(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Qf(t){return Te(t)}var jc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qw(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yf={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VM(t){Yf=t}function UM(t){return Yf.loadJS(t)}function jM(){return Yf.gapiScript}function OE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Jf(t,e){let n=Sr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Cr(s,e??{}))return i;Un(i,"already-initialized")}return n.initialize({options:e})}function BM(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(on);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Xf(t,e,n){let r=Qf(t);H(r._canInitEmulator,r,"emulator-config-failed"),H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=FE(e),{host:o,port:c}=$M(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||qM()}function FE(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $M(t){let e=FE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:cE(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:cE(o)}}}function cE(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function qM(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Bc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sn("not implemented")}_getIdTokenResponse(e){return sn("not implemented")}_linkToIdToken(e,n){return sn("not implemented")}_getReauthenticationResolver(e){return sn("not implemented")}};function Df(t,e){return w(this,null,function*(){return AM(t,"POST","/v1/accounts:signInWithIdp",Hf(t,e))})}var $c=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Mf=class extends $c{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Zs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield xi._fromIdTokenResponse(e,r,i),o=uE(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=uE(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function uE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var kf=class t extends Xe{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function LE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(t,s,e,r):s})}function HM(t,e,n=!1){return w(this,null,function*(){let r=yield Js(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Zs._forOperation(t,"link",r)})}function zM(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(tn(r.app))return Promise.reject(xr(r));let i="reauthenticate";try{let s=yield Js(t,LE(r,i,e,t),n);H(s.idToken,r,"internal-error");let o=Gf(s.idToken);H(o,r,"internal-error");let{sub:c}=o;return H(t.uid===c,r,"user-mismatch"),Zs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Un(r,"user-mismatch"),s}})}function GM(t,e,n=!1){return w(this,null,function*(){if(tn(t.app))return Promise.reject(xr(t));let r="signIn",i=yield LE(t,r,e),s=yield Zs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Zf(t,e,n,r){return Te(t).onIdTokenChanged(e,n,r)}function ep(t,e,n){return Te(t).beforeAuthStateChanged(e,n)}var qc="__sak";var Hc=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var WM=1e3,KM=10,QM=(()=>{class t extends Hc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ME(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);OM()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,KM):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},WM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield _n(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield _n(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield _n(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),VE=QM;var YM=(()=>{class t extends Hc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),tp=YM;function JM(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var XM=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(f=>w(this,null,function*(){return f(r.origin,o)})),l=yield JM(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function UE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Of=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let l=UE("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Pt(){return window}function ZM(t){Pt().location.href=t}function jE(){return typeof Pt().WorkerGlobalScope<"u"&&typeof Pt().importScripts=="function"}function ek(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function tk(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nk(){return jE()?self:null}var BE="firebaseLocalStorageDb",rk=1,zc="firebaseLocalStorage",$E="fbase_key",kr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Wc(t,e){return t.transaction([zc],e?"readwrite":"readonly").objectStore(zc)}function ik(){let t=indexedDB.deleteDatabase(BE);return new kr(t).toPromise()}function Ff(){let t=indexedDB.open(BE,rk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(zc,{keyPath:$E})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(zc)?e(r):(r.close(),yield ik(),e(yield Ff()))}))})}function lE(t,e,n){return w(this,null,function*(){let r=Wc(t,!0).put({[$E]:e,value:n});return new kr(r).toPromise()})}function sk(t,e){return w(this,null,function*(){let n=Wc(t,!1).get(e),r=yield new kr(n).toPromise();return r===void 0?null:r.value})}function dE(t,e){let n=Wc(t,!0).delete(e);return new kr(n).toPromise()}var ok=800,ak=3,ck=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield Ff(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>ak)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return jE()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=XM._getInstance(nk()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield ek(),!this.activeServiceWorker)return;this.sender=new Of(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||tk()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Ff();return yield lE(n,qc,"1"),yield dE(n,qc),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>lE(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>sk(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>dE(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=Wc(s,!1).getAll();return new kr(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),qE=ck;var n4=OE("rcb"),r4=new Mr(3e4,6e4);function uk(t,e){return e?on(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var eo=class extends Bc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Df(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Df(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Df(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function lk(t){return GM(t.auth,new eo(t),t.bypassAuthState)}function dk(t){let{auth:e,user:n}=t;return H(n,e,"internal-error"),zM(n,new eo(t),t.bypassAuthState)}function hk(t){return w(this,null,function*(){let{auth:e,user:n}=t;return H(n,e,"internal-error"),HM(n,new eo(t),t.bypassAuthState)})}var Lf=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lk;case"linkViaPopup":case"linkViaRedirect":return hk;case"reauthViaPopup":case"reauthViaRedirect":return dk;default:Un(this.auth,"internal-error")}}resolve(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var i4=new Mr(2e3,1e4);var fk="pendingRedirect",kc=new Map,Vf=class t extends Lf{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=kc.get(this.auth._key());if(!e){try{let r=(yield pk(this.resolver,this.auth))?yield _n(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kc.set(this.auth._key(),e)}return this.bypassAuthState||kc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return _n(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,_n(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function pk(t,e){return w(this,null,function*(){let n=yk(e),r=gk(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function mk(t,e){kc.set(t._key(),e)}function gk(t){return on(t._redirectPersistence)}function yk(t){return Mc(fk,t.config.apiKey,t.name)}function _k(t,e,n=!1){return w(this,null,function*(){if(tn(t.app))return Promise.reject(xr(t));let r=Qf(t),i=uk(r,e),o=yield new Vf(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var vk=10*60*1e3,Uf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ik(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HE(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vk&&this.cachedEventUids.clear(),this.cachedEventUids.has(hE(e))}saveEventToCache(e){this.cachedEventUids.add(hE(e)),this.lastProcessedEventTime=Date.now()}};function hE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Ik(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HE(t);default:return!1}}function wk(n){return w(this,arguments,function*(t,e={}){return Pi(t,"GET","/v1/projects",e)})}var Ek=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tk=/^https?/;function Dk(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield wk(t);for(let n of e)try{if(bk(n))return}catch{}Un(t,"unauthorized-domain")})}function bk(t){let e=Cf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Tk.test(n))return!1;if(Ek.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Ck=new Mr(3e4,6e4);function fE(){let t=Pt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ak(t){return new Promise((e,n)=>{var r,i,s;function o(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),n(Pr(t,"network-request-failed"))},timeout:Ck.get()})}if(!((i=(r=Pt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Pt().gapi)===null||s===void 0)&&s.load)o();else{let c=OE("iframefcb");return Pt()[c]=()=>{gapi.load?o():n(Pr(t,"network-request-failed"))},UM(`${jM()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Oc=null,e})}var Oc=null;function Sk(t){return Oc=Oc||Ak(t),Oc}var Rk=new Mr(5e3,15e3),Nk="__/auth/iframe",xk="emulator/auth/iframe",Pk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kk(t){let e=t.config;H(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?qf(e,xk):`https://${t.config.authDomain}/${Nk}`,r={apiKey:e.apiKey,appName:t.name,v:xt},i=Mk.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Gs(r).slice(1)}`}function Ok(t){return w(this,null,function*(){let e=yield Sk(t),n=Pt().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:kk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pk,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Pr(t,"network-request-failed"),c=Pt().setTimeout(()=>{s(o)},Rk.get());function u(){Pt().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var Fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lk=500,Vk=600,Uk="_blank",jk="http://localhost",Gc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Bk(t,e,n,r=Lk,i=Vk){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},Fk),{width:r.toString(),height:i.toString(),top:s,left:o}),l=xe().toLowerCase();n&&(c=SE(l)?Uk:n),CE(l)&&(e=e||jk,u.scrollbars="yes");let f=Object.entries(u).reduce((g,[_,A])=>`${g}${_}=${A},`,"");if(kM(l)&&c!=="_self")return $k(e||"",c),new Gc(null);let p=window.open(e||"",c,f);H(p,t,"popup-blocked");try{p.focus()}catch{}return new Gc(p)}function $k(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var qk="__/auth/handler",Hk="emulator/auth/handler",zk=encodeURIComponent("fac");function pE(t,e,n,r,i,s){return w(this,null,function*(){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xt,eventId:i};if(e instanceof $c){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$w(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(e instanceof Mf){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield t._getAppCheckToken(),l=u?`#${zk}=${encodeURIComponent(u)}`:"";return`${Gk(t)}?${Gs(c).slice(1)}${l}`})}function Gk({config:t}){return t.emulator?qf(t,Hk):`https://${t.authDomain}/${qk}`}var bf="webStorageSupport",jf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tp,this._completeRedirectFn=_k,this._overrideRedirectResult=mk}_openPopup(e,n,r,i){return w(this,null,function*(){var s;jn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield pE(e,n,r,Cf(),i);return Bk(e,o,UE())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield pE(e,n,r,Cf(),i);return ZM(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(jn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield Ok(e),r=new Uf(e);return n.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bf,{type:bf},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[bf];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Dk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ME()||AE()||Kf()}},zE=jf;var mE="@firebase/auth",gE="1.7.9";var Bf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Wk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kk(t){Nt(new st("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kE(t)},l=new Pf(r,i,s,u);return BM(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Nt(new st("auth-internal",e=>{let n=Qf(e.getProvider("auth").getImmediate());return(r=>new Bf(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ge(mE,gE,Wk(t)),ge(mE,gE,"esm2017")}var Qk=5*60,Yk=rf("authIdTokenMaxAge")||Qk,yE=null,Jk=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Yk)return;let i=n?.token;yE!==i&&(yE=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function np(t=On()){let e=Sr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Jf(t,{popupRedirectResolver:zE,persistence:[qE,VE,tp]}),r=rf("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Jk(s.toString());ep(n,o,()=>o(n.currentUser)),Zf(n,c=>o(c))}}let i=tf("auth");return i&&Xf(n,`http://${i}`),n}function Xk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}VM({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Pr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Xk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kk("Browser");var GE="auth",to=class{constructor(e){return e}},Or=class{constructor(){return Nr(GE)}};var rp=new ue("angularfire2.auth-instances");function GO(t,e){let n=Ni(GE,t,e);return n&&new to(n)}function WO(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new to(r)}}var KO={provide:Or,deps:[[new Re,rp]]},QO={provide:to,useFactory:GO,deps:[[new Re,rp],wt]};function H4(t,...e){return ge("angularfire",nn.full,"auth"),Kt([QO,KO,{provide:rp,useFactory:WO(t),multi:!0,deps:[Ie,it,Ln,rn,[new Re,Fn],...e]}])}var z4=Fe(np,!0);var WE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KE={};var Bn,ip;(function(){var t;function e(T,y){function v(){}v.prototype=y.prototype,T.D=y.prototype,T.prototype=new v,T.prototype.constructor=T,T.C=function(E,D,C){for(var I=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)I[Bt-2]=arguments[Bt];return y.prototype[D].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,v){v||(v=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(D=0;16>D;++D)E[D]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=T.g[0],v=T.g[1],D=T.g[2];var C=T.g[3],I=y+(C^v&(D^C))+E[0]+3614090360&4294967295;y=v+(I<<7&4294967295|I>>>25),I=C+(D^y&(v^D))+E[1]+3905402710&4294967295,C=y+(I<<12&4294967295|I>>>20),I=D+(v^C&(y^v))+E[2]+606105819&4294967295,D=C+(I<<17&4294967295|I>>>15),I=v+(y^D&(C^y))+E[3]+3250441966&4294967295,v=D+(I<<22&4294967295|I>>>10),I=y+(C^v&(D^C))+E[4]+4118548399&4294967295,y=v+(I<<7&4294967295|I>>>25),I=C+(D^y&(v^D))+E[5]+1200080426&4294967295,C=y+(I<<12&4294967295|I>>>20),I=D+(v^C&(y^v))+E[6]+2821735955&4294967295,D=C+(I<<17&4294967295|I>>>15),I=v+(y^D&(C^y))+E[7]+4249261313&4294967295,v=D+(I<<22&4294967295|I>>>10),I=y+(C^v&(D^C))+E[8]+1770035416&4294967295,y=v+(I<<7&4294967295|I>>>25),I=C+(D^y&(v^D))+E[9]+2336552879&4294967295,C=y+(I<<12&4294967295|I>>>20),I=D+(v^C&(y^v))+E[10]+4294925233&4294967295,D=C+(I<<17&4294967295|I>>>15),I=v+(y^D&(C^y))+E[11]+2304563134&4294967295,v=D+(I<<22&4294967295|I>>>10),I=y+(C^v&(D^C))+E[12]+1804603682&4294967295,y=v+(I<<7&4294967295|I>>>25),I=C+(D^y&(v^D))+E[13]+4254626195&4294967295,C=y+(I<<12&4294967295|I>>>20),I=D+(v^C&(y^v))+E[14]+2792965006&4294967295,D=C+(I<<17&4294967295|I>>>15),I=v+(y^D&(C^y))+E[15]+1236535329&4294967295,v=D+(I<<22&4294967295|I>>>10),I=y+(D^C&(v^D))+E[1]+4129170786&4294967295,y=v+(I<<5&4294967295|I>>>27),I=C+(v^D&(y^v))+E[6]+3225465664&4294967295,C=y+(I<<9&4294967295|I>>>23),I=D+(y^v&(C^y))+E[11]+643717713&4294967295,D=C+(I<<14&4294967295|I>>>18),I=v+(C^y&(D^C))+E[0]+3921069994&4294967295,v=D+(I<<20&4294967295|I>>>12),I=y+(D^C&(v^D))+E[5]+3593408605&4294967295,y=v+(I<<5&4294967295|I>>>27),I=C+(v^D&(y^v))+E[10]+38016083&4294967295,C=y+(I<<9&4294967295|I>>>23),I=D+(y^v&(C^y))+E[15]+3634488961&4294967295,D=C+(I<<14&4294967295|I>>>18),I=v+(C^y&(D^C))+E[4]+3889429448&4294967295,v=D+(I<<20&4294967295|I>>>12),I=y+(D^C&(v^D))+E[9]+568446438&4294967295,y=v+(I<<5&4294967295|I>>>27),I=C+(v^D&(y^v))+E[14]+3275163606&4294967295,C=y+(I<<9&4294967295|I>>>23),I=D+(y^v&(C^y))+E[3]+4107603335&4294967295,D=C+(I<<14&4294967295|I>>>18),I=v+(C^y&(D^C))+E[8]+1163531501&4294967295,v=D+(I<<20&4294967295|I>>>12),I=y+(D^C&(v^D))+E[13]+2850285829&4294967295,y=v+(I<<5&4294967295|I>>>27),I=C+(v^D&(y^v))+E[2]+4243563512&4294967295,C=y+(I<<9&4294967295|I>>>23),I=D+(y^v&(C^y))+E[7]+1735328473&4294967295,D=C+(I<<14&4294967295|I>>>18),I=v+(C^y&(D^C))+E[12]+2368359562&4294967295,v=D+(I<<20&4294967295|I>>>12),I=y+(v^D^C)+E[5]+4294588738&4294967295,y=v+(I<<4&4294967295|I>>>28),I=C+(y^v^D)+E[8]+2272392833&4294967295,C=y+(I<<11&4294967295|I>>>21),I=D+(C^y^v)+E[11]+1839030562&4294967295,D=C+(I<<16&4294967295|I>>>16),I=v+(D^C^y)+E[14]+4259657740&4294967295,v=D+(I<<23&4294967295|I>>>9),I=y+(v^D^C)+E[1]+2763975236&4294967295,y=v+(I<<4&4294967295|I>>>28),I=C+(y^v^D)+E[4]+1272893353&4294967295,C=y+(I<<11&4294967295|I>>>21),I=D+(C^y^v)+E[7]+4139469664&4294967295,D=C+(I<<16&4294967295|I>>>16),I=v+(D^C^y)+E[10]+3200236656&4294967295,v=D+(I<<23&4294967295|I>>>9),I=y+(v^D^C)+E[13]+681279174&4294967295,y=v+(I<<4&4294967295|I>>>28),I=C+(y^v^D)+E[0]+3936430074&4294967295,C=y+(I<<11&4294967295|I>>>21),I=D+(C^y^v)+E[3]+3572445317&4294967295,D=C+(I<<16&4294967295|I>>>16),I=v+(D^C^y)+E[6]+76029189&4294967295,v=D+(I<<23&4294967295|I>>>9),I=y+(v^D^C)+E[9]+3654602809&4294967295,y=v+(I<<4&4294967295|I>>>28),I=C+(y^v^D)+E[12]+3873151461&4294967295,C=y+(I<<11&4294967295|I>>>21),I=D+(C^y^v)+E[15]+530742520&4294967295,D=C+(I<<16&4294967295|I>>>16),I=v+(D^C^y)+E[2]+3299628645&4294967295,v=D+(I<<23&4294967295|I>>>9),I=y+(D^(v|~C))+E[0]+4096336452&4294967295,y=v+(I<<6&4294967295|I>>>26),I=C+(v^(y|~D))+E[7]+1126891415&4294967295,C=y+(I<<10&4294967295|I>>>22),I=D+(y^(C|~v))+E[14]+2878612391&4294967295,D=C+(I<<15&4294967295|I>>>17),I=v+(C^(D|~y))+E[5]+4237533241&4294967295,v=D+(I<<21&4294967295|I>>>11),I=y+(D^(v|~C))+E[12]+1700485571&4294967295,y=v+(I<<6&4294967295|I>>>26),I=C+(v^(y|~D))+E[3]+2399980690&4294967295,C=y+(I<<10&4294967295|I>>>22),I=D+(y^(C|~v))+E[10]+4293915773&4294967295,D=C+(I<<15&4294967295|I>>>17),I=v+(C^(D|~y))+E[1]+2240044497&4294967295,v=D+(I<<21&4294967295|I>>>11),I=y+(D^(v|~C))+E[8]+1873313359&4294967295,y=v+(I<<6&4294967295|I>>>26),I=C+(v^(y|~D))+E[15]+4264355552&4294967295,C=y+(I<<10&4294967295|I>>>22),I=D+(y^(C|~v))+E[6]+2734768916&4294967295,D=C+(I<<15&4294967295|I>>>17),I=v+(C^(D|~y))+E[13]+1309151649&4294967295,v=D+(I<<21&4294967295|I>>>11),I=y+(D^(v|~C))+E[4]+4149444226&4294967295,y=v+(I<<6&4294967295|I>>>26),I=C+(v^(y|~D))+E[11]+3174756917&4294967295,C=y+(I<<10&4294967295|I>>>22),I=D+(y^(C|~v))+E[2]+718787259&4294967295,D=C+(I<<15&4294967295|I>>>17),I=v+(C^(D|~y))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var v=y-this.blockSize,E=this.B,D=this.h,C=0;C<y;){if(D==0)for(;C<=v;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<y;)if(E[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,E),D=0;break}}else for(;C<y;)if(E[D++]=T[C++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var v=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=v&255,v/=256;for(this.u(T),T=Array(16),y=v=0;4>y;++y)for(var E=0;32>E;E+=8)T[v++]=this.g[y]>>>E&255;return T};function s(T,y){var v=c;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=y(T)}function o(T,y){this.h=y;for(var v=[],E=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;E&&C==y||(v[D]=C,E=!1)}this.g=v}var c={};function u(T){return-128<=T&&128>T?s(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var y=[],v=1,E=0;T>=v;E++)y[E]=T/v|0,v*=4294967296;return new o(y,0)}function f(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return R(f(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(y,8)),E=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),I=parseInt(T.substring(D,D+C),y);8>C?(C=l(Math.pow(y,C)),E=E.j(C).add(l(I))):(E=E.j(v),E=E.add(l(I)))}return E}var p=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var T=0,y=1,v=0;v<this.g.length;v++){var E=this.i(v);T+=(0<=E?E:4294967296+E)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(x(this))return"-"+R(this).toString(T);for(var y=l(Math.pow(T,6)),v=this,E="";;){var D=j(v,y).g;v=k(v,D.j(y));var C=((0<v.g.length?v.g[0]:v.h)>>>0).toString(T);if(v=D,A(v))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function x(T){return T.h==-1}t.l=function(T){return T=k(this,T),x(T)?-1:A(T)?0:1};function R(T){for(var y=T.g.length,v=[],E=0;E<y;E++)v[E]=~T.g[E];return new o(v,~T.h).add(g)}t.abs=function(){return x(this)?R(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],E=0,D=0;D<=y;D++){var C=E+(this.i(D)&65535)+(T.i(D)&65535),I=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);E=I>>>16,C&=65535,I&=65535,v[D]=I<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function k(T,y){return T.add(R(y))}t.j=function(T){if(A(this)||A(T))return p;if(x(this))return x(T)?R(this).j(R(T)):R(R(this).j(T));if(x(T))return R(this.j(R(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var y=this.g.length+T.g.length,v=[],E=0;E<2*y;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<T.g.length;D++){var C=this.i(E)>>>16,I=this.i(E)&65535,Bt=T.i(D)>>>16,ts=T.i(D)&65535;v[2*E+2*D]+=I*ts,V(v,2*E+2*D),v[2*E+2*D+1]+=C*ts,V(v,2*E+2*D+1),v[2*E+2*D+1]+=I*Bt,V(v,2*E+2*D+1),v[2*E+2*D+2]+=C*Bt,V(v,2*E+2*D+2)}for(E=0;E<y;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=y;E<2*y;E++)v[E]=0;return new o(v,0)};function V(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function L(T,y){this.g=T,this.h=y}function j(T,y){if(A(y))throw Error("division by zero");if(A(T))return new L(p,p);if(x(T))return y=j(R(T),y),new L(R(y.g),R(y.h));if(x(y))return y=j(T,R(y)),new L(R(y.g),y.h);if(30<T.g.length){if(x(T)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var v=g,E=y;0>=E.l(T);)v=le(v),E=le(E);var D=q(v,1),C=q(E,1);for(E=q(E,2),v=q(v,2);!A(E);){var I=C.add(E);0>=I.l(T)&&(D=D.add(v),C=I),E=q(E,1),v=q(v,1)}return y=k(T,D.j(y)),new L(D,y)}for(D=p;0<=T.l(y);){for(v=Math.max(1,Math.floor(T.m()/y.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(v),I=C.j(y);x(I)||0<I.l(T);)v-=E,C=l(v),I=C.j(y);A(C)&&(C=g),D=D.add(C),T=k(T,I)}return new L(D,T)}t.A=function(T){return j(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)&T.i(E);return new o(v,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)|T.i(E);return new o(v,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)^T.i(E);return new o(v,this.h^T.h)};function le(T){for(var y=T.g.length+1,v=[],E=0;E<y;E++)v[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(v,T.h)}function q(T,y){var v=y>>5;y%=32;for(var E=T.g.length-v,D=[],C=0;C<E;C++)D[C]=0<y?T.i(C+v)>>>y|T.i(C+v+1)<<32-y:T.i(C+v);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ip=KE.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=f,Bn=KE.Integer=o}).apply(typeof WE<"u"?WE:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},an={};var sp,YO,Mi,op,no,Qc,ap,cp,up;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var b=a[m];if(!(b in h))break e;h=h[b]}a=a[a.length-1],m=h[a],d=d(m),d!=m&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var h=0,m=!1,b={next:function(){if(!m&&h<a.length){var S=h++;return{value:d(S,a[S]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,h){return h})}});var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),a.apply(d,b)}}return function(){return a.apply(d,arguments)}}function g(a,d,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function _(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function A(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,b,S){for(var M=Array(arguments.length-2),he=2;he<arguments.length;he++)M[he-2]=arguments[he];return d.prototype[b].apply(m,M)}}function x(a){let d=a.length;if(0<d){let h=Array(d);for(let m=0;m<d;m++)h[m]=a[m];return h}return[]}function R(a,d){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(u(m)){let b=a.length||0,S=m.length||0;a.length=b+S;for(let M=0;M<S;M++)a[b+M]=m[M]}else a.push(m)}}class k{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(a){return/^[\s\xa0]*$/.test(a)}function L(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var le=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function q(a,d,h){for(let m in a)d.call(h,a[m],m,a)}function T(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function y(a){let d={};for(let h in a)d[h]=a[h];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let h,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(h in m)a[h]=m[h];for(let S=0;S<v.length;S++)h=v[S],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function D(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function I(){var a=zu;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Bt{constructor(){this.h=this.g=null}add(d,h){let m=ts.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var ts=new k(()=>new ob,a=>a.reset());class ob{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ns,rs=!1,zu=new Bt,Dg=()=>{let a=c.Promise.resolve(void 0);ns=()=>{a.then(ab)}};var ab=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){C(h)}var d=ts;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}rs=!1};function pn(){this.s=this.s,this.C=this.C}pn.prototype.s=!1,pn.prototype.ma=function(){this.s||(this.s=!0,this.N())},pn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var cb=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function is(a,d){if(Ve.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(le){e:{try{j(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ub[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&is.aa.h.call(this)}}A(is,Ve);var ub={2:"touch",3:"pen",4:"mouse"};is.prototype.h=function(){is.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ss="closure_listenable_"+(1e6*Math.random()|0),lb=0;function db(a,d,h,m,b){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=b,this.key=++lb,this.da=this.fa=!1}function Ao(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function So(a){this.src=a,this.g={},this.h=0}So.prototype.add=function(a,d,h,m,b){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var M=Wu(a,d,m,b);return-1<M?(d=a[M],h||(d.fa=!1)):(d=new db(d,this.src,S,!!m,b),d.fa=h,a.push(d)),d};function Gu(a,d){var h=d.type;if(h in a.g){var m=a.g[h],b=Array.prototype.indexOf.call(m,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(m,b,1),S&&(Ao(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Wu(a,d,h,m){for(var b=0;b<a.length;++b){var S=a[b];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==m)return b}return-1}var Ku="closure_lm_"+(1e6*Math.random()|0),Qu={};function bg(a,d,h,m,b){if(m&&m.once)return Ag(a,d,h,m,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)bg(a,d[S],h,m,b);return null}return h=Zu(h),a&&a[ss]?a.K(d,h,l(m)?!!m.capture:!!m,b):Cg(a,d,h,!1,m,b)}function Cg(a,d,h,m,b,S){if(!d)throw Error("Invalid event type");var M=l(b)?!!b.capture:!!b,he=Ju(a);if(he||(a[Ku]=he=new So(a)),h=he.add(d,h,m,M,S),h.proxy)return h;if(m=hb(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)cb||(b=M),b===void 0&&(b=!1),a.addEventListener(d.toString(),m,b);else if(a.attachEvent)a.attachEvent(Rg(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function hb(){function a(h){return d.call(a.src,a.listener,h)}let d=fb;return a}function Ag(a,d,h,m,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)Ag(a,d[S],h,m,b);return null}return h=Zu(h),a&&a[ss]?a.L(d,h,l(m)?!!m.capture:!!m,b):Cg(a,d,h,!0,m,b)}function Sg(a,d,h,m,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)Sg(a,d[S],h,m,b);else m=l(m)?!!m.capture:!!m,h=Zu(h),a&&a[ss]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],h=Wu(S,h,m,b),-1<h&&(Ao(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ju(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Wu(d,h,m,b)),(h=-1<a?d[a]:null)&&Yu(h))}function Yu(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[ss])Gu(d.i,a);else{var h=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(h,m,a.capture):d.detachEvent?d.detachEvent(Rg(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=Ju(d))?(Gu(h,a),h.h==0&&(h.src=null,d[Ku]=null)):Ao(a)}}}function Rg(a){return a in Qu?Qu[a]:Qu[a]="on"+a}function fb(a,d){if(a.da)a=!0;else{d=new is(d,this);var h=a.listener,m=a.ha||a.src;a.fa&&Yu(a),a=h.call(m,d)}return a}function Ju(a){return a=a[Ku],a instanceof So?a:null}var Xu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zu(a){return typeof a=="function"?a:(a[Xu]||(a[Xu]=function(d){return a.handleEvent(d)}),a[Xu])}function Ue(){pn.call(this),this.i=new So(this),this.M=this,this.F=null}A(Ue,pn),Ue.prototype[ss]=!0,Ue.prototype.removeEventListener=function(a,d,h,m){Sg(this,a,d,h,m)};function Ge(a,d){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new Ve(d,a);else if(d instanceof Ve)d.target=d.target||a;else{var b=d;d=new Ve(m,a),E(d,b)}if(b=!0,h)for(var S=h.length-1;0<=S;S--){var M=d.g=h[S];b=Ro(M,m,!0,d)&&b}if(M=d.g=a,b=Ro(M,m,!0,d)&&b,b=Ro(M,m,!1,d)&&b,h)for(S=0;S<h.length;S++)M=d.g=h[S],b=Ro(M,m,!1,d)&&b}Ue.prototype.N=function(){if(Ue.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],m=0;m<h.length;m++)Ao(h[m]);delete a.g[d],a.h--}}this.F=null},Ue.prototype.K=function(a,d,h,m){return this.i.add(String(a),d,!1,h,m)},Ue.prototype.L=function(a,d,h,m){return this.i.add(String(a),d,!0,h,m)};function Ro(a,d,h,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var M=d[S];if(M&&!M.da&&M.capture==h){var he=M.listener,Me=M.ha||M.src;M.fa&&Gu(a.i,M),b=he.call(Me,m)!==!1&&b}}return b&&!m.defaultPrevented}function Ng(a,d,h){if(typeof a=="function")h&&(a=g(a,h));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function xg(a){a.g=Ng(()=>{a.g=null,a.i&&(a.i=!1,xg(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class pb extends pn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:xg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(a){pn.call(this),this.h=a,this.g={}}A(os,pn);var Pg=[];function Mg(a){q(a.g,function(d,h){this.g.hasOwnProperty(h)&&Yu(d)},a),a.g={}}os.prototype.N=function(){os.aa.N.call(this),Mg(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var el=c.JSON.stringify,mb=c.JSON.parse,gb=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function tl(){}tl.prototype.h=null;function kg(a){return a.h||(a.h=a.i())}function Og(){}var as={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nl(){Ve.call(this,"d")}A(nl,Ve);function rl(){Ve.call(this,"c")}A(rl,Ve);var Qn={},Fg=null;function No(){return Fg=Fg||new Ue}Qn.La="serverreachability";function Lg(a){Ve.call(this,Qn.La,a)}A(Lg,Ve);function cs(a){let d=No();Ge(d,new Lg(d))}Qn.STAT_EVENT="statevent";function Vg(a,d){Ve.call(this,Qn.STAT_EVENT,a),this.stat=d}A(Vg,Ve);function We(a){let d=No();Ge(d,new Vg(d,a))}Qn.Ma="timingevent";function Ug(a,d){Ve.call(this,Qn.Ma,a),this.size=d}A(Ug,Ve);function us(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function ls(){this.g=!0}ls.prototype.xa=function(){this.g=!1};function yb(a,d,h,m,b,S){a.info(function(){if(a.g)if(S)for(var M="",he=S.split("&"),Me=0;Me<he.length;Me++){var oe=he[Me].split("=");if(1<oe.length){var je=oe[0];oe=oe[1];var Be=je.split("_");M=2<=Be.length&&Be[1]=="type"?M+(je+"="+oe+"&"):M+(je+"=redacted&")}}else M=null;else M=S;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+h+`
`+M})}function _b(a,d,h,m,b,S,M){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+h+`
`+S+" "+M})}function Jr(a,d,h,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ib(a,h)+(m?" "+m:"")})}function vb(a,d){a.info(function(){return"TIMEOUT: "+d})}ls.prototype.info=function(){};function Ib(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var M=1;M<b.length;M++)b[M]=""}}}}return el(h)}catch{return d}}var xo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},il;function Po(){}A(Po,tl),Po.prototype.g=function(){return new XMLHttpRequest},Po.prototype.i=function(){return{}},il=new Po;function mn(a,d,h,m){this.j=a,this.i=d,this.l=h,this.R=m||1,this.U=new os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bg}function Bg(){this.i=null,this.g="",this.h=!1}var $g={},sl={};function ol(a,d,h){a.L=1,a.v=Fo($t(d)),a.m=h,a.P=!0,qg(a,null)}function qg(a,d){a.F=Date.now(),Mo(a),a.A=$t(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),ry(h.i,"t",m),a.C=0,h=a.j.J,a.h=new Bg,a.g=wy(a.j,h?d:null,!a.m),0<a.O&&(a.M=new pb(g(a.Y,a,a.g),a.O)),d=a.U,h=a.g,m=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(Pg[0]=b.toString()),b=Pg);for(var S=0;S<b.length;S++){var M=bg(h,b[S],m||d.handleEvent,!1,d.h||d);if(!M)break;d.g[M.key]=M}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),cs(),yb(a.i,a.u,a.A,a.l,a.R,a.m)}mn.prototype.ca=function(a){a=a.target;let d=this.M;d&&qt(a)==3?d.j():this.Y(a)},mn.prototype.Y=function(a){try{if(a==this.g)e:{let Be=qt(this.g);var d=this.g.Ba();let ei=this.g.Z();if(!(3>Be)&&(Be!=3||this.g&&(this.h.h||this.g.oa()||ly(this.g)))){this.J||Be!=4||d==7||(d==8||0>=ei?cs(3):cs(2)),al(this);var h=this.g.Z();this.X=h;t:if(Hg(this)){var m=ly(this.g);a="";var b=m.length,S=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),ds(this);var M="";break t}this.h.i=new c.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,a+=this.h.i.decode(m[d],{stream:!(S&&d==b-1)});m.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=h==200,_b(this.i,this.u,this.A,this.l,this.R,Be,h),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Me=this.g;if((he=Me.g?Me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(he)){var oe=he;break t}}oe=null}if(h=oe)Jr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cl(this,h);else{this.o=!1,this.s=3,We(12),Yn(this),ds(this);break e}}if(this.P){h=!0;let mt;for(;!this.J&&this.C<M.length;)if(mt=wb(this,M),mt==sl){Be==4&&(this.s=4,We(14),h=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==$g){this.s=4,We(15),Jr(this.i,this.l,M,"[Invalid Chunk]"),h=!1;break}else Jr(this.i,this.l,mt,null),cl(this,mt);if(Hg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||M.length!=0||this.h.h||(this.s=1,We(16),h=!1),this.o=this.o&&h,!h)Jr(this.i,this.l,M,"[Invalid Chunked Response]"),Yn(this),ds(this);else if(0<M.length&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.ba&&!je.M&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),pl(je),je.M=!0,We(11))}}else Jr(this.i,this.l,M,null),cl(this,M);Be==4&&Yn(this),this.o&&!this.J&&(Be==4?yy(this.j,this):(this.o=!1,Mo(this)))}else Vb(this.g),h==400&&0<M.indexOf("Unknown SID")?(this.s=3,We(12)):(this.s=0,We(13)),Yn(this),ds(this)}}}catch{}finally{}};function Hg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function wb(a,d){var h=a.C,m=d.indexOf(`
`,h);return m==-1?sl:(h=Number(d.substring(h,m)),isNaN(h)?$g:(m+=1,m+h>d.length?sl:(d=d.slice(m,m+h),a.C=m+h,d)))}mn.prototype.cancel=function(){this.J=!0,Yn(this)};function Mo(a){a.S=Date.now()+a.I,zg(a,a.I)}function zg(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=us(g(a.ba,a),d)}function al(a){a.B&&(c.clearTimeout(a.B),a.B=null)}mn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(vb(this.i,this.A),this.L!=2&&(cs(),We(17)),Yn(this),this.s=2,ds(this)):zg(this,this.S-a)};function ds(a){a.j.G==0||a.J||yy(a.j,a)}function Yn(a){al(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Mg(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function cl(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||ul(h.h,a))){if(!a.K&&ul(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Bo(h),Uo(h);else break e;fl(h),We(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=us(g(h.Za,h),6e3));if(1>=Kg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Xn(h,11)}else if((a.K||h.g==a)&&Bo(h),!V(d))for(b=h.Da.g.parse(d),d=0;d<b.length;d++){let oe=b[d];if(h.T=oe[0],oe=oe[1],h.G==2)if(oe[0]=="c"){h.K=oe[1],h.ia=oe[2];let je=oe[3];je!=null&&(h.la=je,h.j.info("VER="+h.la));let Be=oe[4];Be!=null&&(h.Aa=Be,h.j.info("SVER="+h.Aa));let ei=oe[5];ei!=null&&typeof ei=="number"&&0<ei&&(m=1.5*ei,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let mt=a.g;if(mt){let qo=mt.g?mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var S=m.h;S.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(ll(S,S.h),S.h=null))}if(m.D){let ml=mt.g?mt.g.getResponseHeader("X-HTTP-Session-Id"):null;ml&&(m.ya=ml,pe(m.I,m.D,ml))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var M=a;if(m.qa=Iy(m,m.J?m.ia:null,m.W),M.K){Qg(m.h,M);var he=M,Me=m.L;Me&&(he.I=Me),he.B&&(al(he),Mo(he)),m.g=M}else my(m);0<h.i.length&&jo(h)}else oe[0]!="stop"&&oe[0]!="close"||Xn(h,7);else h.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?Xn(h,7):hl(h):oe[0]!="noop"&&h.l&&h.l.ta(oe),h.v=0)}}cs(4)}catch{}}var Eb=class{constructor(a,d){this.g=a,this.map=d}};function Gg(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Kg(a){return a.h?1:a.g?a.g.size:0}function ul(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ll(a,d){a.g?a.g.add(d):a.h=d}function Qg(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Gg.prototype.cancel=function(){if(this.i=Yg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Yg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return x(a.i)}function Tb(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,m=0;m<h;m++)d.push(a[m]);return d}d=[],h=0;for(m in a)d[h++]=a[m];return d}function Db(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let m in a)d[h++]=m;return d}}}function Jg(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=Db(a),m=Tb(a),b=m.length,S=0;S<b;S++)d.call(void 0,m[S],h&&h[S],a)}var Xg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bb(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),b=null;if(0<=m){var S=a[h].substring(0,m);b=a[h].substring(m+1)}else S=a[h];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Jn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Jn){this.h=a.h,ko(this,a.j),this.o=a.o,this.g=a.g,Oo(this,a.s),this.l=a.l;var d=a.i,h=new ps;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),Zg(this,h),this.m=a.m}else a&&(d=String(a).match(Xg))?(this.h=!1,ko(this,d[1]||"",!0),this.o=hs(d[2]||""),this.g=hs(d[3]||"",!0),Oo(this,d[4]),this.l=hs(d[5]||"",!0),Zg(this,d[6]||"",!0),this.m=hs(d[7]||"")):(this.h=!1,this.i=new ps(null,this.h))}Jn.prototype.toString=function(){var a=[],d=this.j;d&&a.push(fs(d,ey,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(fs(d,ey,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(fs(h,h.charAt(0)=="/"?Sb:Ab,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",fs(h,Nb)),a.join("")};function $t(a){return new Jn(a)}function ko(a,d,h){a.j=h?hs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Oo(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Zg(a,d,h){d instanceof ps?(a.i=d,xb(a.i,a.h)):(h||(d=fs(d,Rb)),a.i=new ps(d,a.h))}function pe(a,d,h){a.i.set(d,h)}function Fo(a){return pe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function hs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function fs(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,Cb),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Cb(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ey=/[#\/\?@]/g,Ab=/[#\?:]/g,Sb=/[#\?]/g,Rb=/[#\?@]/g,Nb=/#/g;function ps(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function gn(a){a.g||(a.g=new Map,a.h=0,a.i&&bb(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=ps.prototype,t.add=function(a,d){gn(this),this.i=null,a=Xr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function ty(a,d){gn(a),d=Xr(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function ny(a,d){return gn(a),d=Xr(a,d),a.g.has(d)}t.forEach=function(a,d){gn(this),this.g.forEach(function(h,m){h.forEach(function(b){a.call(d,b,m,this)},this)},this)},t.na=function(){gn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let m=0;m<d.length;m++){let b=a[m];for(let S=0;S<b.length;S++)h.push(d[m])}return h},t.V=function(a){gn(this);let d=[];if(typeof a=="string")ny(this,a)&&(d=d.concat(this.g.get(Xr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return gn(this),this.i=null,a=Xr(this,a),ny(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function ry(a,d,h){ty(a,d),0<h.length&&(a.i=null,a.g.set(Xr(a,d),x(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var m=d[h];let S=encodeURIComponent(String(m)),M=this.V(m);for(m=0;m<M.length;m++){var b=S;M[m]!==""&&(b+="="+encodeURIComponent(String(M[m]))),a.push(b)}}return this.i=a.join("&")};function Xr(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function xb(a,d){d&&!a.j&&(gn(a),a.i=null,a.g.forEach(function(h,m){var b=m.toLowerCase();m!=b&&(ty(this,m),ry(this,b,h))},a)),a.j=d}function Pb(a,d){let h=new ls;if(c.Image){let m=new Image;m.onload=_(yn,h,"TestLoadImage: loaded",!0,d,m),m.onerror=_(yn,h,"TestLoadImage: error",!1,d,m),m.onabort=_(yn,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=_(yn,h,"TestLoadImage: timeout",!1,d,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function Mb(a,d){let h=new ls,m=new AbortController,b=setTimeout(()=>{m.abort(),yn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(S=>{clearTimeout(b),S.ok?yn(h,"TestPingServer: ok",!0,d):yn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),yn(h,"TestPingServer: error",!1,d)})}function yn(a,d,h,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(h)}catch{}}function kb(){this.g=new gb}function Ob(a,d,h){let m=h||"";try{Jg(a,function(b,S){let M=b;l(b)&&(M=el(b)),d.push(m+S+"="+encodeURIComponent(M))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function ms(a){this.l=a.Ub||null,this.j=a.eb||!1}A(ms,tl),ms.prototype.g=function(){return new Lo(this.l,this.j)},ms.prototype.i=function(a){return function(){return a}}({});function Lo(a,d){Ue.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Lo,Ue),t=Lo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,ys(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ys(this)),this.g&&(this.readyState=3,ys(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iy(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function iy(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?gs(this):ys(this),this.readyState==3&&iy(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,gs(this))},t.Qa=function(a){this.g&&(this.response=a,gs(this))},t.ga=function(){this.g&&gs(this)};function gs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ys(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function ys(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function sy(a){let d="";return q(a,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function dl(a,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=sy(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):pe(a,d,h))}function ve(a){Ue.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ve,Ue);var Fb=/^https?$/i,Lb=["POST","PUT"];t=ve.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():il.g(),this.v=this.o?kg(this.o):kg(il),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){oy(this,S);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)h.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())h.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Lb,d,void 0))||m||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,M]of h)this.g.setRequestHeader(S,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uy(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){oy(this,S)}};function oy(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,ay(a),Vo(a)}function ay(a){a.A||(a.A=!0,Ge(a,"complete"),Ge(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ge(this,"complete"),Ge(this,"abort"),Vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vo(this,!0)),ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cy(this):this.bb())},t.bb=function(){cy(this)};function cy(a){if(a.h&&typeof o<"u"&&(!a.v[1]||qt(a)!=4||a.Z()!=2)){if(a.u&&qt(a)==4)Ng(a.Ea,0,a);else if(Ge(a,"readystatechange"),qt(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=M===0){var b=String(a.D).match(Xg)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),m=!Fb.test(b?b.toLowerCase():"")}h=m}if(h)Ge(a,"complete"),Ge(a,"success");else{a.m=6;try{var S=2<qt(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",ay(a)}}finally{Vo(a)}}}}function Vo(a,d){if(a.g){uy(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Ge(a,"ready");try{h.onreadystatechange=m}catch{}}}function uy(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function qt(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),mb(d)}};function ly(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Vb(a){let d={};a=(a.g&&2<=qt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(V(a[m]))continue;var h=D(a[m]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[b]||[];d[b]=S,S.push(h)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function dy(a){this.Aa=0,this.i=[],this.j=new ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,a),this.cb=_s("retryDelaySeedMs",1e4,a),this.Wa=_s("forwardChannelMaxRetries",2,a),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Gg(a&&a.concurrentRequestLimit),this.Da=new kb,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dy.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,m){We(0),this.W=a,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=Iy(this,null,this.W),jo(this)};function hl(a){if(hy(a),a.G==3){var d=a.U++,h=$t(a.I);if(pe(h,"SID",a.K),pe(h,"RID",d),pe(h,"TYPE","terminate"),vs(a,h),d=new mn(a,a.j,d),d.L=2,d.v=Fo($t(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=wy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Mo(d)}vy(a)}function Uo(a){a.g&&(pl(a),a.g.cancel(),a.g=null)}function hy(a){Uo(a),a.u&&(c.clearTimeout(a.u),a.u=null),Bo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function jo(a){if(!Wg(a.h)&&!a.s){a.s=!0;var d=a.Ga;ns||Dg(),rs||(ns(),rs=!0),zu.add(d,a),a.B=0}}function Ub(a,d){return Kg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=us(g(a.Ga,a,d),_y(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new mn(this,this.j,a),S=this.o;if(this.S&&(S?(S=y(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=py(this,b,d),h=$t(this.I),pe(h,"RID",a),pe(h,"CVER",22),this.D&&pe(h,"X-HTTP-Session-Id",this.D),vs(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(sy(S)))+"&"+d:this.m&&dl(h,this.m,S)),ll(this.h,b),this.Ua&&pe(h,"TYPE","init"),this.P?(pe(h,"$req",d),pe(h,"SID","null"),b.T=!0,ol(b,h,null)):ol(b,h,d),this.G=2}}else this.G==3&&(a?fy(this,a):this.i.length==0||Wg(this.h)||fy(this))};function fy(a,d){var h;d?h=d.l:h=a.U++;let m=$t(a.I);pe(m,"SID",a.K),pe(m,"RID",h),pe(m,"AID",a.T),vs(a,m),a.m&&a.o&&dl(m,a.m,a.o),h=new mn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=py(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ll(a.h,h),ol(h,m,d)}function vs(a,d){a.H&&q(a.H,function(h,m){pe(d,m,h)}),a.l&&Jg({},function(h,m){pe(d,m,h)})}function py(a,d,h){h=Math.min(a.i.length,h);var m=a.l?g(a.l.Na,a.l,a):null;e:{var b=a.i;let S=-1;for(;;){let M=["count="+h];S==-1?0<h?(S=b[0].g,M.push("ofs="+S)):S=0:M.push("ofs="+S);let he=!0;for(let Me=0;Me<h;Me++){let oe=b[Me].g,je=b[Me].map;if(oe-=S,0>oe)S=Math.max(0,b[Me].g-100),he=!1;else try{Ob(je,M,"req"+oe+"_")}catch{m&&m(je)}}if(he){m=M.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,m}function my(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ns||Dg(),rs||(ns(),rs=!0),zu.add(d,a),a.v=0}}function fl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=us(g(a.Fa,a),_y(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,gy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=us(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,We(10),Uo(this),gy(this))};function pl(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function gy(a){a.g=new mn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=$t(a.qa);pe(d,"RID","rpc"),pe(d,"SID",a.K),pe(d,"AID",a.T),pe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&pe(d,"TO",a.ja),pe(d,"TYPE","xmlhttp"),vs(a,d),a.m&&a.o&&dl(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Fo($t(d)),h.m=null,h.P=!0,qg(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Uo(this),fl(this),We(19))};function Bo(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function yy(a,d){var h=null;if(a.g==d){Bo(a),pl(a),a.g=null;var m=2}else if(ul(a.h,d))h=d.D,Qg(a.h,d),m=1;else return;if(a.G!=0){if(d.o)if(m==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var b=a.B;m=No(),Ge(m,new Ug(m,h)),jo(a)}else my(a);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&Ub(a,d)||m==2&&fl(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),b){case 1:Xn(a,5);break;case 4:Xn(a,10);break;case 3:Xn(a,6);break;default:Xn(a,2)}}}function _y(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function Xn(a,d){if(a.j.info("Error code "+d),d==2){var h=g(a.fb,a),m=a.Xa;let b=!m;m=new Jn(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ko(m,"https"),Fo(m),b?Pb(m.toString(),h):Mb(m.toString(),h)}else We(2);a.G=0,a.l&&a.l.sa(d),vy(a),hy(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function vy(a){if(a.G=0,a.ka=[],a.l){let d=Yg(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function Iy(a,d,h){var m=h instanceof Jn?$t(h):new Jn(h);if(m.g!="")d&&(m.g=d+"."+m.g),Oo(m,m.s);else{var b=c.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new Jn(null);m&&ko(S,m),d&&(S.g=d),b&&Oo(S,b),h&&(S.l=h),m=S}return h=a.D,d=a.ya,h&&d&&pe(m,h,d),pe(m,"VER",a.la),vs(a,m),m}function wy(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ve(new ms({eb:h})):new ve(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ey(){}t=Ey.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $o(){}$o.prototype.g=function(a,d){return new ot(a,d)};function ot(a,d){Ue.call(this),this.g=new dy(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!V(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Zr(this)}A(ot,Ue),ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ot.prototype.close=function(){hl(this.g)},ot.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=el(a),a=h);d.i.push(new Eb(d.Ya++,a)),d.G==3&&jo(d)},ot.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,ot.aa.N.call(this)};function Ty(a){nl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(Ty,nl);function Dy(){rl.call(this),this.status=1}A(Dy,rl);function Zr(a){this.g=a}A(Zr,Ey),Zr.prototype.ua=function(){Ge(this.g,"a")},Zr.prototype.ta=function(a){Ge(this.g,new Ty(a))},Zr.prototype.sa=function(a){Ge(this.g,new Dy)},Zr.prototype.ra=function(){Ge(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,ot.prototype.send=ot.prototype.o,ot.prototype.open=ot.prototype.m,ot.prototype.close=ot.prototype.close,up=an.createWebChannelTransport=function(){return new $o},cp=an.getStatEventTarget=function(){return No()},ap=an.Event=Qn,Qc=an.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,no=an.ErrorCode=xo,jg.COMPLETE="complete",op=an.EventType=jg,Og.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",Ue.prototype.listen=Ue.prototype.K,Mi=an.WebChannel=Og,YO=an.FetchXmlHttpFactory=ms,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,sp=an.XhrIo=ve}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});var QE="@firebase/firestore";var Pe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pe.UNAUTHENTICATED=new Pe(null),Pe.GOOGLE_CREDENTIALS=new Pe("google-credentials-uid"),Pe.FIRST_PARTY=new Pe("first-party-uid"),Pe.MOCK_USER=new Pe("mock-user");var Xi="10.14.0";var Ur=new Mn("@firebase/firestore");function ro(){return Ur.logLevel}function F(t,...e){if(Ur.logLevel<=Z.DEBUG){let n=e.map(Wm);Ur.debug(`Firestore (${Xi}): ${t}`,...n)}}function un(t,...e){if(Ur.logLevel<=Z.ERROR){let n=e.map(Wm);Ur.error(`Firestore (${Xi}): ${t}`,...n)}}function ji(t,...e){if(Ur.logLevel<=Z.WARN){let n=e.map(Wm);Ur.warn(`Firestore (${Xi}): ${t}`,...n)}}function Wm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function $(t="Unexpected state"){let e=`FIRESTORE (${Xi}) INTERNAL ASSERTION FAILED: `+t;throw un(e),new Error(e)}function de(t,e){t||$()}function z(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Xe{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var eu=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},pp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pe.UNAUTHENTICATED))}shutdown(){}},mp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},gp=class{constructor(e){this.t=e,this.currentUser=Pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new eu(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new Pe(e)}},yp=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},_p=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yp(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ip=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new vp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function JO(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var tu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=JO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ae(t,e){return t<e?-1:t>e?1:0}function Bi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Le=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var K=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Le(0,0))}static max(){return new t(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(),r===void 0?r=e.length-n:r>e.length-n&&$(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},_e=class t extends nu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},XO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=class t extends nu{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return XO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new O(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new O(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(_e.fromString(e))}static fromName(e){return new t(_e.fromString(e).popFirst(5))}static empty(){return new t(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new _e(e.slice()))}};var wp=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};wp.UNKNOWN_ID=-1;function ZO(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new jr(i,U.empty(),e)}function e1(t){return new jr(t.readTime,t.key,-1)}var jr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(K.min(),U.empty(),-1)}static max(){return new t(K.max(),U.empty(),-1)}};function t1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}var n1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ep=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Eo(t){return w(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==n1)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(f=>{o[l]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function r1(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function To(t){return t.name==="IndexedDbTransactionError"}var NT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Ou(t){return t==null}function uo(t){return t===0&&1/t==-1/0}function i1(t){return typeof t=="number"&&Number.isInteger(t)&&!uo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var s1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sz=[...s1,"documentOverlays"],o1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],a1=o1,c1=[...a1,"indexConfiguration","indexState","indexEntries"];var oz=[...c1,"globals"];function YE(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var we=class t{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Li(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Li(this.root,e,this.comparator,!1)}getReverseIterator(){return new Li(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Li(this.root,e,this.comparator,!0)}},Li=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ot=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();let e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}};Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var He=class t{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ru(this.data.getIterator())}getIteratorFrom(e){return new ru(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ru=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var pt=class t{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new t([])}unionWith(e){let n=new He(ut.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var iu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iu("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ze.EMPTY_BYTE_STRING=new ze("");var u1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ln(t){if(de(!!t),typeof t=="string"){let e=0,n=u1.exec(t);if(de(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ye(t.seconds),nanos:ye(t.nanos)}}function ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hn(t){return typeof t=="string"?ze.fromBase64String(t):ze.fromUint8Array(t)}function Km(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qm(t){let e=t.mapValue.fields.__previous_value__;return Km(e)?Qm(e):e}function lo(t){let e=ln(t.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}var Tp=class{constructor(e,n,r,i,s,o,c,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l}},su=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Yc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Km(t)?4:MT(t)?9007199254740991:PT(t)?10:11:$()}function Vt(t,e){if(t===e)return!0;let n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lo(t).isEqual(lo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ln(i.timestampValue),c=ln(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Hn(i.bytesValue).isEqual(Hn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ye(i.geoPointValue.latitude)===ye(s.geoPointValue.latitude)&&ye(i.geoPointValue.longitude)===ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ye(i.integerValue)===ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ye(i.doubleValue),c=ye(s.doubleValue);return o===c?uo(o)===uo(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Bi(t.arrayValue.values||[],e.arrayValue.values||[],Vt);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(YE(o)!==YE(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Vt(o[u],c[u])))return!1;return!0}(t,e);default:return $()}}function ho(t,e){return(t.values||[]).find(n=>Vt(n,e))!==void 0}function $i(t,e){if(t===e)return 0;let n=Br(t),r=Br(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=ye(s.integerValue||s.doubleValue),u=ye(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return JE(t.timestampValue,e.timestampValue);case 4:return JE(lo(t),lo(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(s,o){let c=Hn(s),u=Hn(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=ae(c[l],u[l]);if(f!==0)return f}return ae(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ae(ye(s.latitude),ye(o.latitude));return c!==0?c:ae(ye(s.longitude),ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return XE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,l,f;let p=s.fields||{},g=o.fields||{},_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,A=(u=g.value)===null||u===void 0?void 0:u.arrayValue,x=ae(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((f=A?.values)===null||f===void 0?void 0:f.length)||0);return x!==0?x:XE(_,A)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Yc.mapValue&&o===Yc.mapValue)return 0;if(s===Yc.mapValue)return 1;if(o===Yc.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),l=o.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let g=ae(u[p],f[p]);if(g!==0)return g;let _=$i(c[u[p]],l[f[p]]);if(_!==0)return _}return ae(u.length,f.length)}(t.mapValue,e.mapValue);default:throw $()}}function JE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);let n=ln(t),r=ln(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function XE(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=$i(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function qi(t){return Dp(t)}function Dp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ln(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return U.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Dp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Dp(n.fields[o])}`;return i+"}"}(t.mapValue):$()}function ZE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bp(t){return!!t&&"integerValue"in t}function Ym(t){return!!t&&"arrayValue"in t}function eT(t){return!!t&&"nullValue"in t}function tT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xc(t){return!!t&&"mapValue"in t}function PT(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function so(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=so(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=so(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ct=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=so(n)}setAll(e){let n=ut.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=so(o):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wr(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(so(this.value))}};function kT(t){let e=[];return Wr(t.fields,(n,r)=>{let i=new ut([n]);if(Xc(r)){let s=kT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new pt(e)}var Et=class t{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,K.min(),K.min(),K.min(),ct.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,K.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,K.min(),K.min(),ct.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,K.min(),K.min(),ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Hi=class{constructor(e,n){this.position=e,this.inclusive=n}};function nT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=U.comparator(U.fromName(o.referenceValue),n.key):r=$i(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function rT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vt(t.position[n],e.position[n]))return!1;return!0}var $r=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function l1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ou=class{},Ce=class t extends ou{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ap(e,n,r):n==="array-contains"?new Np(e,r):n==="in"?new xp(e,r):n==="not-in"?new Pp(e,r):n==="array-contains-any"?new Mp(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Sp(e,r):new Rp(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($i(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison($i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Tt=class t extends ou{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return OT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function OT(t){return t.op==="and"}function FT(t){return d1(t)&&OT(t)}function d1(t){for(let e of t.filters)if(e instanceof Tt)return!1;return!0}function Cp(t){if(t instanceof Ce)return t.field.canonicalString()+t.op.toString()+qi(t.value);if(FT(t))return t.filters.map(e=>Cp(e)).join(",");{let e=t.filters.map(n=>Cp(n)).join(",");return`${t.op}(${e})`}}function LT(t,e){return t instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.field.isEqual(i.field)&&Vt(r.value,i.value)}(t,e):t instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&LT(o,i.filters[c]),!0):!1}(t,e):void $()}function VT(t){return t instanceof Ce?function(n){return`${n.field.canonicalString()} ${n.op} ${qi(n.value)}`}(t):t instanceof Tt?function(n){return n.op.toString()+" {"+n.getFilters().map(VT).join(" ,")+"}"}(t):"Filter"}var Ap=class extends Ce{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},Sp=class extends Ce{constructor(e,n){super(e,"in",n),this.keys=UT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Rp=class extends Ce{constructor(e,n){super(e,"not-in",n),this.keys=UT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function UT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}var Np=class extends Ce{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ym(n)&&ho(n.arrayValue,this.value)}},xp=class extends Ce{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ho(this.value.arrayValue,n)}},Pp=class extends Ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ho(this.value.arrayValue,n)}},Mp=class extends Ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ho(this.value.arrayValue,r))}};var kp=class{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function iT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new kp(t,e,n,r,i,s,o)}function Jm(t){let e=z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qi(r)).join(",")),e.ue=n}return e.ue}function Xm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!l1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rT(t.startAt,e.startAt)&&rT(t.endAt,e.endAt)}function Op(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var zn=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function h1(t,e,n,r,i,s,o,c){return new zn(t,e,n,r,i,s,o,c)}function Fu(t){return new zn(t)}function sT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jT(t){return t.collectionGroup!==null}function oo(t){let e=z(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new He(ut.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new $r(s,r))}),n.has(ut.keyField().canonicalString())||e.ce.push(new $r(ut.keyField(),r))}return e.ce}function Ft(t){let e=z(t);return e.le||(e.le=f1(e,oo(t))),e.le}function f1(t,e){if(t.limitType==="F")return iT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new $r(i.field,s)});let n=t.endAt?new Hi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hi(t.startAt.position,t.startAt.inclusive):null;return iT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fp(t,e){let n=t.filters.concat([e]);return new zn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lp(t,e,n){return new zn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lu(t,e){return Xm(Ft(t),Ft(e))&&t.limitType===e.limitType}function BT(t){return`${Jm(Ft(t))}|lt:${t.limitType}`}function ki(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>VT(i)).join(", ")}]`),Ou(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qi(i)).join(",")),`Target(${r})`}(Ft(t))}; limitType=${t.limitType})`}function Vu(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):U.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of oo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let l=nT(o,c,u);return o.inclusive?l<=0:l<0}(r.startAt,oo(r),i)||r.endAt&&!function(o,c,u){let l=nT(o,c,u);return o.inclusive?l>=0:l>0}(r.endAt,oo(r),i))}(t,e)}function p1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $T(t){return(e,n)=>{let r=!1;for(let i of oo(t)){let s=m1(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function m1(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):function(s,o,c){let u=o.data.field(s),l=c.data.field(s);return u!==null&&l!==null?$i(u,l):$()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $()}}var Gn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return xT(this.inner)}size(){return this.innerSize}};var g1=new we(U.comparator);function dn(){return g1}var qT=new we(U.comparator);function io(...t){let e=qT;for(let n of t)e=e.insert(n.key,n);return e}function HT(t){let e=qT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fr(){return ao()}function zT(){return ao()}function ao(){return new Gn(t=>t.toString(),(t,e)=>t.isEqual(e))}var y1=new we(U.comparator),_1=new He(U.comparator);function ee(...t){let e=_1;for(let n of t)e=e.add(n);return e}var v1=new He(ae);function I1(){return v1}function Zm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uo(e)?"-0":e}}function GT(t){return{integerValue:""+t}}function w1(t,e){return i1(e)?GT(e):Zm(t,e)}var zi=class{constructor(){this._=void 0}};function E1(t,e,n){return t instanceof Gi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Km(s)&&(s=Qm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof qr?KT(t,e):t instanceof Hr?QT(t,e):function(i,s){let o=WT(i,s),c=oT(o)+oT(i.Pe);return bp(o)&&bp(i.Pe)?GT(c):Zm(i.serializer,c)}(t,e)}function T1(t,e,n){return t instanceof qr?KT(t,e):t instanceof Hr?QT(t,e):n}function WT(t,e){return t instanceof Wi?function(r){return bp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Gi=class extends zi{},qr=class extends zi{constructor(e){super(),this.elements=e}};function KT(t,e){let n=YT(e);for(let r of t.elements)n.some(i=>Vt(i,r))||n.push(r);return{arrayValue:{values:n}}}var Hr=class extends zi{constructor(e){super(),this.elements=e}};function QT(t,e){let n=YT(e);for(let r of t.elements)n=n.filter(i=>!Vt(i,r));return{arrayValue:{values:n}}}var Wi=class extends zi{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function oT(t){return ye(t.integerValue||t.doubleValue)}function YT(t){return Ym(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function D1(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qr&&i instanceof qr||r instanceof Hr&&i instanceof Hr?Bi(r.elements,i.elements,Vt):r instanceof Wi&&i instanceof Wi?Vt(r.Pe,i.Pe):r instanceof Gi&&i instanceof Gi}(t.transform,e.transform)}var Vp=class{constructor(e,n){this.version=e,this.transformResults=n}},$n=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Zc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ki=class{};function JT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new au(t.key,$n.none()):new zr(t.key,t.data,$n.none());{let n=t.data,r=ct.empty(),i=new He(ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ut(t.key,r,new pt(i.toArray()),$n.none())}}function b1(t,e,n){t instanceof zr?function(i,s,o){let c=i.value.clone(),u=cT(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ut?function(i,s,o){if(!Zc(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=cT(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(XT(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function co(t,e,n,r){return t instanceof zr?function(s,o,c,u){if(!Zc(s.precondition,o))return c;let l=s.value.clone(),f=uT(s.fieldTransforms,u,o);return l.setAll(f),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ut?function(s,o,c,u){if(!Zc(s.precondition,o))return c;let l=uT(s.fieldTransforms,u,o),f=o.data;return f.setAll(XT(s)),f.setAll(l),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,c){return Zc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function C1(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=WT(r.transform,i||null);s!=null&&(n===null&&(n=ct.empty()),n.set(r.field,s))}return n||null}function aT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bi(r,i,(s,o)=>D1(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var zr=class extends Ki{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ut=class extends Ki{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function XT(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function cT(t,e,n){let r=new Map;de(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,T1(o,c,n[i]))}return r}function uT(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,E1(s,o,e))}return r}var au=class extends Ki{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Up=class extends Ki{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var jp=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&b1(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=zT();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;let u=JT(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&Bi(this.mutations,e.mutations,(n,r)=>aT(n,r))&&Bi(this.baseMutations,e.baseMutations,(n,r)=>aT(n,r))}},Bp=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length);let i=function(){return y1}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var $p=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qp=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var De,ie;function A1(t){switch(t){default:return $();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function ZT(t){if(t===void 0)return un("GRPC error has no .code"),N.UNKNOWN;switch(t){case De.OK:return N.OK;case De.CANCELLED:return N.CANCELLED;case De.UNKNOWN:return N.UNKNOWN;case De.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case De.INTERNAL:return N.INTERNAL;case De.UNAVAILABLE:return N.UNAVAILABLE;case De.UNAUTHENTICATED:return N.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case De.NOT_FOUND:return N.NOT_FOUND;case De.ALREADY_EXISTS:return N.ALREADY_EXISTS;case De.PERMISSION_DENIED:return N.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case De.ABORTED:return N.ABORTED;case De.OUT_OF_RANGE:return N.OUT_OF_RANGE;case De.UNIMPLEMENTED:return N.UNIMPLEMENTED;case De.DATA_LOSS:return N.DATA_LOSS;default:return $()}}(ie=De||(De={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var lT=null;function S1(){return new TextEncoder}var R1=new Bn([4294967295,4294967295],0);function dT(t){let e=S1().encode(t),n=new ip;return n.update(e),new Uint8Array(n.digest())}function hT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bn([n,r],0),new Bn([i,s],0)]}var Hp=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lr(`Invalid padding: ${n}`);if(r<0)throw new Lr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bn.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Bn.fromNumber(r)));return i.compare(R1)===1&&(i=new Bn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=dT(e),[r,i]=hT(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=dT(e),[r,i]=hT(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Lr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,fo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(K.min(),i,new we(ae),dn(),ee())}},fo=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ee(),ee(),ee())}};var Vi=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},uu=class{constructor(e,n){this.targetId=e,this.me=n}},lu=class{constructor(e,n,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},du=class{constructor(){this.fe=0,this.ge=pT(),this.pe=ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),n=ee(),r=ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$()}}),new fo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=pT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},zp=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=dn(),this.qe=fT(),this.Qe=new we(ae)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:$()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Op(s))if(r===0){let o=new U(s.path);this.Ue(n,o,Et.newNoDocument(o,K.min()))}else de(r===1);else{let o=this.Ye(n);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}lT?.et(function(f,p,g,_,A){var x,R,k,V,L,j;let le={localCacheCount:f,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},q=p.unchangedNames;return q&&(le.bloomFilter={applied:A===0,hashCount:(x=q?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(V=(k=(R=q?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&V!==void 0?V:0,padding:(j=(L=q?.bits)===null||L===void 0?void 0:L.padding)!==null&&j!==void 0?j:0,mightContain:T=>{var y;return(y=_?.mightContain(T))!==null&&y!==void 0&&y}}),le}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,c;try{o=Hn(r).toUint8Array()}catch(u){if(u instanceof iu)return ji("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Hp(o,i,s)}catch(u){return ji(u instanceof Lr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Op(c.target)){let u=new U(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Et.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ee();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new cu(e,n,this.Qe,this.ke,r);return this.ke=dn(),this.qe=fT(),this.Qe=new we(ae),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new du,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new He(ae),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new du),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function fT(){return new we(U.comparator)}function pT(){return new we(U.comparator)}var N1={asc:"ASCENDING",desc:"DESCENDING"},x1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P1={and:"AND",or:"OR"},Gp=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Wp(t,e){return t.useProto3Json||Ou(e)?e:{value:e}}function hu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function M1(t,e){return hu(t,e.toTimestamp())}function Lt(t){return de(!!t),K.fromTimestamp(function(n){let r=ln(n);return new Le(r.seconds,r.nanos)}(t))}function eg(t,e){return Kp(t,e).canonicalString()}function Kp(t,e){let n=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tD(t){let e=_e.fromString(t);return de(oD(e)),e}function Qp(t,e){return eg(t.databaseId,e.path)}function lp(t,e){let n=tD(e);if(n.get(1)!==t.databaseId.projectId)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(rD(n))}function nD(t,e){return eg(t.databaseId,e)}function k1(t){let e=tD(t);return e.length===4?_e.emptyPath():rD(e)}function Yp(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rD(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mT(t,e,n){return{name:Qp(t,e),fields:n.value.mapValue.fields}}function O1(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,f){return l.useProto3Json?(de(f===void 0||typeof f=="string"),ze.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ze.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(l){let f=l.code===void 0?N.UNKNOWN:ZT(l.code);return new O(f,l.message||"")}(o);n=new lu(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lp(t,r.document.name),s=Lt(r.document.updateTime),o=r.document.createTime?Lt(r.document.createTime):K.min(),c=new ct({mapValue:{fields:r.document.fields}}),u=Et.newFoundDocument(i,s,o,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new Vi(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lp(t,r.document),s=r.readTime?Lt(r.readTime):K.min(),o=Et.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Vi([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lp(t,r.document),s=r.removedTargetIds||[];n=new Vi([],s,i,null)}else{if(!("filter"in e))return $();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new qp(i,s),c=r.targetId;n=new uu(c,o)}}return n}function F1(t,e){let n;if(e instanceof zr)n={update:mT(t,e.key,e.value)};else if(e instanceof au)n={delete:Qp(t,e.key)};else if(e instanceof Ut)n={update:mT(t,e.key,e.data),updateMask:z1(e.fieldMask)};else{if(!(e instanceof Up))return $();n={verify:Qp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof Gi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Hr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wi)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw $()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:M1(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(t,e.precondition)),n}function L1(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Lt(i.updateTime):Lt(s);return o.isEqual(K.min())&&(o=Lt(s)),new Vp(o,i.transformResults||[])}(n,e))):[]}function V1(t,e){return{documents:[nD(t,e.path)]}}function U1(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nD(t,i);let s=function(l){if(l.length!==0)return sD(Tt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(f=>function(g){return{field:Oi(g.field),direction:$1(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=Wp(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function j1(t){let e=k1(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){de(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){let g=iD(p);return g instanceof Tt&&FT(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(A){return new $r(Fi(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Ou(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,_=p.values||[];return new Hi(_,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,_=p.values||[];return new Hi(_,g)}(n.endAt)),h1(e,i,o,s,c,"F",u,l)}function B1(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Fi(n.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Fi(n.unaryFilter.field);return Ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Fi(n.unaryFilter.field);return Ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Fi(n.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(t):t.fieldFilter!==void 0?function(n){return Ce.create(Fi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tt.create(n.compositeFilter.filters.map(r=>iD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $()}}(n.compositeFilter.op))}(t):$()}function $1(t){return N1[t]}function q1(t){return x1[t]}function H1(t){return P1[t]}function Oi(t){return{fieldPath:t.canonicalString()}}function Fi(t){return ut.fromServerFormat(t.fieldPath)}function sD(t){return t instanceof Ce?function(n){if(n.op==="=="){if(tT(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NAN"}};if(eT(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tT(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NOT_NAN"}};if(eT(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oi(n.field),op:q1(n.op),value:n.value}}}(t):t instanceof Tt?function(n){let r=n.getFilters().map(i=>sD(i));return r.length===1?r[0]:{compositeFilter:{op:H1(n.op),filters:r}}}(t):$()}function z1(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var po=class t{constructor(e,n,r,i,s=K.min(),o=K.min(),c=ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Jp=class{constructor(e){this.ct=e}};function G1(t){let e=j1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lp(e,e.limit,"L"):e}var fu=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(ye(e.integerValue));else if("doubleValue"in e){let r=ye(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),uo(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ln(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Hn(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?MT(e)?this.dt(n,Number.MAX_SAFE_INTEGER):PT(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):$()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(ye(c)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),U.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};fu.vt=new fu;var Xp=class{constructor(){this.un=new Zp}addToCollectionParentIndex(e,n){return this.un.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(jr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Zp=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new He(_e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(_e.comparator)).toArray()}};var cz=new Uint8Array(0);var Mt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(41943040,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);var mo=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var em=class{constructor(){this.changes=new Gn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var nm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&co(r.mutation,i,pt.empty(),Le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){let i=Fr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=io();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=dn(),o=ao(),c=function(){return ao()}();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Ut)?s=s.insert(l.key,l):f!==void 0?(o.set(l.key,f.mutation.getFieldMask()),co(f.mutation,l,f.mutation.getFieldMask(),Le.now())):o.set(l.key,pt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,f)=>o.set(l,f)),n.forEach((l,f)=>{var p;return c.set(l,new tm(f,(p=o.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=ao(),i=new we((o,c)=>o-c),s=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||pt.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||ee()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=zT();f.forEach(g=>{if(!s.has(g)){let _=JT(n.get(g),r.get(g));_!==null&&p.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return U.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(Fr()),c=-1,u=s;return o.next(l=>P.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ee())).next(f=>({batchId:c,changes:HT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=io();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=io();return this.indexManager.getCollectionParents(e,s).next(c=>P.forEach(c,u=>{let l=function(p,g){return new zn(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let f=l.getKey();o.get(f)===null&&(o=o.insert(f,Et.newInvalidDocument(f)))});let c=io();return o.forEach((u,l)=>{let f=s.get(u);f!==void 0&&co(f.mutation,l,pt.empty(),Le.now()),Vu(n,l)&&(c=c.insert(u,l))}),c})}};var rm=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return P.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Lt(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:G1(i.bundledQuery),readTime:Lt(i.readTime)}}(n)),P.resolve()}};var im=class{constructor(){this.overlays=new we(U.comparator),this.Ir=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Fr();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Fr(),s=n.length+1,o=new U(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new we((l,f)=>l-f),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=s.get(l.largestBatchId);f===null&&(f=Fr(),s=s.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=Fr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return P.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $p(n,r));let s=this.Ir.get(n);s===void 0&&(s=ee(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var sm=class{constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var go=class{constructor(){this.Tr=new He(be.Er),this.dr=new He(be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new U(new _e([])),r=new be(n,e),i=new be(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new U(new _e([])),r=new be(n,e),i=new be(n,e+1),s=ee();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},be=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return U.comparator(e.key,n.key)||ae(e.wr,n.wr)}static Ar(e,n){return ae(e.wr,n.wr)||U.comparator(e.key,n.key)}};var om=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new He(be.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new jp(s,n,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new be(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new be(n,0),i=new be(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(ae);return n.forEach(i=>{let s=new be(i,0),o=new be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;U.isDocumentKey(s)||(s=s.child(""));let o=new be(new U(s),0),c=new He(ae);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.wr)),!0)},o),P.resolve(this.Cr(c))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(n.mutations,i=>{let s=new be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new be(n,0),i=this.br.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var am=class{constructor(e){this.Mr=e,this.docs=function(){return new we(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=dn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Et.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=dn(),o=n.path,c=new U(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||t1(e1(f),r)<=0||(i.has(f.key)||Vu(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){$()}Or(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cm(this)}getSize(e){return P.resolve(this.size)}},cm=class extends em{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var um=class{constructor(e){this.persistence=e,this.Nr=new Gn(n=>Jm(n),Xm),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Lr=0,this.Br=new go,this.targetCount=0,this.kr=mo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),P.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new mo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Kn(n),P.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Br.containsKey(n))}};var lm=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new NT(0),this.Kr=!1,this.Kr=!0,this.$r=new sm,this.referenceDelegate=e(this),this.Ur=new um(this),this.indexManager=new Xp,this.remoteDocumentCache=function(i){return new am(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Jp(n),this.Gr=new rm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new im,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new om(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new dm(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},dm=class extends Ep{constructor(e){super(),this.currentSequenceNumber=e}},hm=class t{constructor(e){this.persistence=e,this.Jr=new go,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw $()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),P.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=U.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,K.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return P.or([()=>P.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var fm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ee(),i=ee();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var pm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mm=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jw()?8:r1(xe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new pm;return this.Xi(e,n,o).next(c=>{if(s.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ro()<=Z.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ki(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(ro()<=Z.DEBUG&&F("QueryEngine","Query:",ki(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ro()<=Z.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ki(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ft(n))):P.resolve())}Yi(e,n){if(sT(n))return P.resolve(null);let r=Ft(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lp(n,null,"F"),r=Ft(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ee(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,c);return this.ns(n,l,o,u.readTime)?this.Yi(e,Lp(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return sT(n)||i.isEqual(K.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?P.resolve(null):(ro()<=Z.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ki(n)),this.rs(e,o,n,ZO(i,-1)).next(c=>c))})}ts(e,n){let r=new He($T(e));return n.forEach((i,s)=>{Vu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ro()<=Z.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ki(n)),this.Ji.getDocumentsMatchingQuery(e,n,jr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var gm=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new we(ae),this._s=new Gn(s=>Jm(s),Xm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nm(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function W1(t,e,n,r){return new gm(t,e,n,r)}function aD(t,e){return w(this,null,function*(){let n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=ee();for(let l of i){o.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of s){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:c}))})})})}function K1(t,e){let n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,l,f){let p=l.batch,g=p.keys(),_=P.resolve();return g.forEach(A=>{_=_.next(()=>f.getEntry(u,A)).next(x=>{let R=l.docVersions.get(A);de(R!==null),x.version.compareTo(R)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),f.addEntry(x)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ee();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function cD(t){let e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Q1(t,e){let n=z(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let c=[];e.targetChanges.forEach((f,p)=>{let g=i.get(p);if(!g)return;c.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(ze.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(x,R,k){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,_,f)&&c.push(n.Ur.updateTargetData(s,_))});let u=dn(),l=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(Y1(s,o,e.documentUpdates).next(f=>{u=f.Ps,l=f.Is})),!r.isEqual(K.min())){let f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return P.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function Y1(t,e,n){let r=ee(),i=ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=dn();return n.forEach((c,u)=>{let l=s.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):F("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function J1(t,e){let n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function X1(t,e){let n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new po(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function ym(t,e,n){return w(this,null,function*(){let r=z(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!To(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function gT(t,e,n){let r=z(t),i=K.min(),s=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,f){let p=z(u),g=p._s.get(f);return g!==void 0?P.resolve(p.os.get(g)):p.Ur.getTargetData(l,f)}(r,o,Ft(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:K.min(),n?s:ee())).next(c=>(Z1(r,p1(e),c),{documents:c,Ts:s})))}function Z1(t,e,n){let r=t.us.get(e)||K.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var pu=class{constructor(){this.activeTargetIds=I1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var _m=class{constructor(){this.so=new pu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vm=class{_o(e){}shutdown(){}};var mu=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Jc=null;function dp(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}var eF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Im=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var qe="WebChannelConnection",wm=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let c=dp(),u=this.xo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(f=>(F("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw ji("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,c){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=eF[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=dp();return new Promise((o,c)=>{let u=new sp;u.setWithCredentials(!0),u.listenOnce(op.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case no.NO_ERROR:let f=u.getResponseJson();F(qe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case no.TIMEOUT:F(qe,`RPC '${e}' ${s} timed out`),c(new O(N.DEADLINE_EXCEEDED,"Request time out"));break;case no.HTTP_ERROR:let p=u.getStatus();if(F(qe,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let A=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(_.status);c(new O(A,_.message))}else c(new O(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new O(N.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{F(qe,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);F(qe,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=dp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=up(),c=cp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=s.join("");F(qe,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=o.createWebChannel(f,u),g=!1,_=!1,A=new Im({Io:R=>{_?F(qe,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(F(qe,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),F(qe,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),x=(R,k,V)=>{R.listen(k,L=>{try{V(L)}catch(j){setTimeout(()=>{throw j},0)}})};return x(p,Mi.EventType.OPEN,()=>{_||(F(qe,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),x(p,Mi.EventType.CLOSE,()=>{_||(_=!0,F(qe,`RPC '${e}' stream ${i} transport closed`),A.So())}),x(p,Mi.EventType.ERROR,R=>{_||(_=!0,ji(qe,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new O(N.UNAVAILABLE,"The operation could not be completed")))}),x(p,Mi.EventType.MESSAGE,R=>{var k;if(!_){let V=R.data[0];de(!!V);let L=V,j=L.error||((k=L[0])===null||k===void 0?void 0:k.error);if(j){F(qe,`RPC '${e}' stream ${i} received error:`,j);let le=j.status,q=function(v){let E=De[v];if(E!==void 0)return ZT(E)}(le),T=j.message;q===void 0&&(q=N.INTERNAL,T="Unknown error status: "+le+" with message "+j.message),_=!0,A.So(new O(q,T)),p.close()}else F(qe,`RPC '${e}' stream ${i} received:`,V),A.bo(V)}}),x(c,ap.STAT_EVENT,R=>{R.stat===Qc.PROXY?F(qe,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Qc.NOPROXY&&F(qe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function hp(){return typeof document<"u"?document:null}function Uu(t){return new Gp(t,!0)}var gu=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var yu=class{constructor(e,n,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gu(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(un(n.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new O(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Em=class extends yu{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=O1(this.serializer,e),r=function(s){if(!("targetChange"in s))return K.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?K.min():o.readTime?Lt(o.readTime):K.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Yp(this.serializer),n.addTarget=function(s,o){let c,u=o.target;if(c=Op(u)?{documents:V1(s,u)}:{query:U1(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=eD(s,o.resumeToken);let l=Wp(s,o.expectedCount);l!==null&&(c.expectedCount=l)}else if(o.snapshotVersion.compareTo(K.min())>0){c.readTime=hu(s,o.snapshotVersion.toTimestamp());let l=Wp(s,o.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=B1(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Yp(this.serializer),n.removeTarget=e,this.a_(n)}},Tm=class extends yu{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=L1(e.writeResults,e.commitTime),r=Lt(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Yp(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>F1(this.serializer,r))};this.a_(n)}};var Dm=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Kp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(N.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Kp(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},bm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(un(n),this.D_=!1):F("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Cm=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){Kr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=z(u);l.L_.add(4),yield Do(l),l.q_.set("Unknown"),l.L_.delete(4),yield ju(l)})}(this))}))}),this.q_=new bm(r,i)}};function ju(t){return w(this,null,function*(){if(Kr(t))for(let e of t.B_)yield e(!0)})}function Do(t){return w(this,null,function*(){for(let e of t.B_)yield e(!1)})}function uD(t,e){let n=z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ig(n)?rg(n):Zi(n).r_()&&ng(n,e))}function tg(t,e){let n=z(t),r=Zi(n);n.N_.delete(e),r.r_()&&lD(n,e),n.N_.size===0&&(r.r_()?r.o_():Kr(n)&&n.q_.set("Unknown"))}function ng(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zi(t).A_(e)}function lD(t,e){t.Q_.xe(e),Zi(t).R_(e)}function rg(t){t.Q_=new zp({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zi(t).start(),t.q_.v_()}function ig(t){return Kr(t)&&!Zi(t).n_()&&t.N_.size>0}function Kr(t){return z(t).L_.size===0}function dD(t){t.Q_=void 0}function tF(t){return w(this,null,function*(){t.q_.set("Online")})}function nF(t){return w(this,null,function*(){t.N_.forEach((e,n)=>{ng(t,e)})})}function rF(t,e){return w(this,null,function*(){dD(t),ig(t)?(t.q_.M_(e),rg(t)):t.q_.set("Unknown")})}function iF(t,e,n){return w(this,null,function*(){if(t.q_.set("Online"),e instanceof lu&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _u(t,r)}else if(e instanceof Vi?t.Q_.Ke(e):e instanceof uu?t.Q_.He(e):t.Q_.We(e),!n.isEqual(K.min()))try{let r=yield cD(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(l);f&&s.N_.set(l,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,l)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(ze.EMPTY_BYTE_STRING,f.snapshotVersion)),lD(s,u);let p=new po(f.target,u,l,f.sequenceNumber);ng(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield _u(t,r)}})}function _u(t,e,n){return w(this,null,function*(){if(!To(e))throw e;t.L_.add(1),yield Do(t),t.q_.set("Offline"),n||(n=()=>cD(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield ju(t)}))})}function hD(t,e){return e().catch(n=>_u(t,n,e))}function Bu(t){return w(this,null,function*(){let e=z(t),n=Wn(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sF(e);)try{let i=yield J1(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,oF(e,i)}catch(i){yield _u(e,i)}fD(e)&&pD(e)})}function sF(t){return Kr(t)&&t.O_.length<10}function oF(t,e){t.O_.push(e);let n=Wn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function fD(t){return Kr(t)&&!Wn(t).n_()&&t.O_.length>0}function pD(t){Wn(t).start()}function aF(t){return w(this,null,function*(){Wn(t).p_()})}function cF(t){return w(this,null,function*(){let e=Wn(t);for(let n of t.O_)e.m_(n.mutations)})}function uF(t,e,n){return w(this,null,function*(){let r=t.O_.shift(),i=Bp.from(r,e,n);yield hD(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Bu(t)})}function lF(t,e){return w(this,null,function*(){e&&Wn(t).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return A1(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();Wn(r).s_(),yield hD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Bu(r)}})}(t,e)),fD(t)&&pD(t)})}function yT(t,e){return w(this,null,function*(){let n=z(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=Kr(n);n.L_.add(3),yield Do(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield ju(n)})}function dF(t,e){return w(this,null,function*(){let n=z(t);e?(n.L_.delete(2),yield ju(n)):e||(n.L_.add(2),yield Do(n),n.q_.set("Unknown"))})}function Zi(t){return t.K_||(t.K_=function(n,r,i){let s=z(n);return s.w_(),new Em(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:tF.bind(null,t),Ro:nF.bind(null,t),mo:rF.bind(null,t),d_:iF.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.K_.s_(),ig(t)?rg(t):t.q_.set("Unknown")):(yield t.K_.stop(),dD(t))}))),t.K_}function Wn(t){return t.U_||(t.U_=function(n,r,i){let s=z(n);return s.w_(),new Tm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aF.bind(null,t),mo:lF.bind(null,t),f_:cF.bind(null,t),g_:uF.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.U_.s_(),yield Bu(t)):(yield t.U_.stop(),t.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Am=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function sg(t,e){if(un("AsyncQueue",`${e}: ${t}`),To(t))return new O(N.UNAVAILABLE,`${e}: ${t}`);throw t}var vu=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=io(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Iu=class{constructor(){this.W_=new we(U.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):$():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Qi=class t{constructor(e,n,r,i,s,o,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,vu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Sm=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Rm=class{constructor(){this.queries=_T(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=z(n),s=i.queries;i.queries=_T(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new O(N.ABORTED,"Firestore shutting down"))}};function _T(){return new Gn(t=>BT(t),Lu)}function mD(t,e){return w(this,null,function*(){let n=z(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Sm,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let c=sg(o,`Initialization of query '${ki(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&og(n)})}function gD(t,e){return w(this,null,function*(){let n=z(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function hF(t,e){let n=z(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&og(n)}function fF(t,e,n){let r=z(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function og(t){t.Y_.forEach(e=>{e.next()})}var Nm,vT;(vT=Nm||(Nm={})).ea="default",vT.Cache="cache";var wu=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Qi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nm.Cache}};var Eu=class{constructor(e){this.key=e}},Tu=class{constructor(e){this.key=e}},xm=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=$T(e),this.Ra=new vu(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Iu,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let g=i.get(f),_=Vu(this.query,p)?p:null,A=!!g&&this.mutatedKeys.has(g.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),R=!1;g&&_?g.data.isEqual(_.data)?A!==x&&(r.track({type:3,doc:_}),R=!0):this.ga(g,_)||(r.track({type:2,doc:_}),R=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),R=!0):g&&!_&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(c=!0)),R&&(_?(o=o.add(_),s=x?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,p)=>function(_,A){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return x(_)-x(A)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;let c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new Qi(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Iu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Tu(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Eu(r))}),n}ba(e){this.Ta=e.Ts,this.da=ee();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Pm=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Mm=class{constructor(e){this.key=e,this.va=!1}},km=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Gn(c=>BT(c),Lu),this.Ma=new Map,this.xa=new Set,this.Oa=new we(U.comparator),this.Na=new Map,this.La=new go,this.Ba={},this.ka=new Map,this.qa=mo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function pF(t,e,n=!0){return w(this,null,function*(){let r=ED(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield yD(r,e,n,!0),i})}function mF(t,e){return w(this,null,function*(){let n=ED(t);yield yD(n,e,!0,!1)})}function yD(t,e,n,r){return w(this,null,function*(){let i=yield X1(t.localStore,Ft(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),c;return r&&(c=yield gF(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&uD(t.remoteStore,i),c})}function gF(t,e,n,r,i){return w(this,null,function*(){t.Ka=(p,g,_)=>function(x,R,k,V){return w(this,null,function*(){let L=R.view.ma(k);L.ns&&(L=yield gT(x.localStore,R.query,!1).then(({documents:T})=>R.view.ma(T,L)));let j=V&&V.targetChanges.get(R.targetId),le=V&&V.targetMismatches.get(R.targetId)!=null,q=R.view.applyChanges(L,x.isPrimaryClient,j,le);return wT(x,R.targetId,q.wa),q.snapshot})}(t,p,g,_);let s=yield gT(t.localStore,e,!0),o=new xm(e,s.Ts),c=o.ma(s.documents),u=fo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(c,t.isPrimaryClient,u);wT(t,n,l.wa);let f=new Pm(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function yF(t,e,n){return w(this,null,function*(){let r=z(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Lu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ym(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tg(r.remoteStore,i.targetId),Om(r,i.targetId)}).catch(Eo))):(Om(r,i.targetId),yield ym(r.localStore,i.targetId,!0))})}function _F(t,e){return w(this,null,function*(){let n=z(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tg(n.remoteStore,r.targetId))})}function vF(t,e,n){return w(this,null,function*(){let r=CF(t);try{let i=yield function(o,c){let u=z(o),l=Le.now(),f=c.reduce((_,A)=>_.add(A.key),ee()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=dn(),x=ee();return u.cs.getEntries(_,f).next(R=>{A=R,A.forEach((k,V)=>{V.isValidDocument()||(x=x.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,A)).next(R=>{p=R;let k=[];for(let V of c){let L=C1(V,p.get(V.key).overlayedDocument);L!=null&&k.push(new Ut(V.key,L,kT(L.value.mapValue),$n.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,k,c)}).next(R=>{g=R;let k=R.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(_,R.batchId,k)})}).then(()=>({batchId:g.batchId,changes:HT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new we(ae)),l=l.insert(c,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield bo(r,i.changes),yield Bu(r.remoteStore)}catch(i){let s=sg(i,"Failed to persist write");n.reject(s)}})}function _D(t,e){return w(this,null,function*(){let n=z(t);try{let r=yield Q1(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?de(o.va):i.removedDocuments.size>0&&(de(o.va),o.va=!1))}),yield bo(n,r,e)}catch(r){yield Eo(r)}})}function IT(t,e,n){let r=z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=z(o);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let g of p.j_)g.Z_(c)&&(l=!0)}),l&&og(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IF(t,e,n){return w(this,null,function*(){let r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new we(U.comparator);o=o.insert(s,Et.newNoDocument(s,K.min()));let c=ee().add(s),u=new cu(K.min(),new Map,new we(ae),o,c);yield _D(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),ag(r)}else yield ym(r.localStore,e,!1).then(()=>Om(r,e,n)).catch(Eo)})}function wF(t,e){return w(this,null,function*(){let n=z(t),r=e.batch.batchId;try{let i=yield K1(n.localStore,e);ID(n,r,null),vD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield bo(n,i)}catch(i){yield Eo(i)}})}function EF(t,e,n){return w(this,null,function*(){let r=z(t);try{let i=yield function(o,c){let u=z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(de(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);ID(r,e,n),vD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield bo(r,i)}catch(i){yield Eo(i)}})}function vD(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ID(t,e,n){let r=z(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Om(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||wD(t,r)})}function wD(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(tg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ag(t))}function wT(t,e,n){for(let r of n)r instanceof Eu?(t.La.addReference(r.key,e),TF(t,r)):r instanceof Tu?(F("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||wD(t,r.key)):$()}function TF(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(F("SyncEngine","New document in limbo: "+n),t.xa.add(r),ag(t))}function ag(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new U(_e.fromString(e)),r=t.qa.next();t.Na.set(r,new Mm(n)),t.Oa=t.Oa.insert(n,r),uD(t.remoteStore,new po(Ft(Fu(n.path)),r,"TargetPurposeLimboResolution",NT.oe))}}function bo(t,e,n){return w(this,null,function*(){let r=z(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(l=>{var f;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=n?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=fm.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return w(this,null,function*(){let f=z(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.$i,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>P.forEach(g.Ui,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!To(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let _=f.os.get(g),A=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(A);f.os=f.os.insert(g,x)}}})}(r.localStore,s))})}function DF(t,e){return w(this,null,function*(){let n=z(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield aD(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new O(N.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bo(n,r.hs)}})}function bF(t,e){let n=z(t),r=n.Na.get(e);if(r&&r.va)return ee().add(r.key);{let i=ee(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function ED(t){let e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_D.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IF.bind(null,e),e.Ca.d_=hF.bind(null,e.eventManager),e.Ca.$a=fF.bind(null,e.eventManager),e}function CF(t){let e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EF.bind(null,e),e}var ET=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return w(this,null,function*(){this.serializer=Uu(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return W1(this.persistence,new mm,n.initialUser,this.serializer)}Ga(n){return new lm(hm.Zr,this.serializer)}Wa(n){return new _m}terminate(){return w(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var AF=(()=>{class t{initialize(n,r){return w(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>IT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DF.bind(null,this.syncEngine),yield dF(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Rm}()}createDatastore(n){let r=Uu(n.databaseInfo.databaseId),i=function(o){return new wm(o)}(n.databaseInfo);return function(o,c,u,l){return new Dm(o,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,c,u){return new Cm(i,s,o,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>IT(this.syncEngine,r,0),function(){return mu.D()?new mu:new vm}())}createSyncEngine(n,r){return function(s,o,c,u,l,f,p){let g=new km(s,o,c,u,l,f);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){var n,r;yield function(s){return w(this,null,function*(){let o=z(s);F("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Do(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Du=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Fm=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pe.UNAUTHENTICATED,this.clientId=tu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>w(this,null,function*(){F("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=sg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function fp(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield aD(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function TT(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield SF(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yT(e.remoteStore,i)),t._onlineComponents=e})}function SF(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fp(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ji("Error using user provided cache. Falling back to memory cache: "+n),yield fp(t,new ET)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield fp(t,new ET);return t._offlineComponents})}function TD(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield TT(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield TT(t,new AF))),t._onlineComponents})}function RF(t){return TD(t).then(e=>e.syncEngine)}function Lm(t){return w(this,null,function*(){let e=yield TD(t),n=e.eventManager;return n.onListen=pF.bind(null,e.syncEngine),n.onUnlisten=yF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_F.bind(null,e.syncEngine),n})}function NF(t,e,n={}){let r=new kt;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,c,u,l){let f=new Du({next:g=>{f.Za(),o.enqueueAndForget(()=>gD(s,p));let _=g.docs.has(c);!_&&g.fromCache?l.reject(new O(N.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new wu(Fu(c.path),f,{includeMetadataChanges:!0,_a:!0});return mD(s,p)}(yield Lm(t),t.asyncQueue,e,n,r)})),r.promise}function DD(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var DT=new Map;function bD(t,e,n){if(!n)throw new O(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xF(t,e,n,r){if(e===!0&&r===!0)throw new O(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bT(t){if(!U.isDocumentKey(t))throw new O(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function CT(t){if(U.isDocumentKey(t))throw new O(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $u(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$()}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=$u(t);throw new O(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var bu=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bu(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pp;switch(r.type){case"firstParty":return new _p(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=DT.get(n);r&&(F("ComponentProvider","Removing Datastore"),DT.delete(n),r.terminate())}(this),Promise.resolve()}};function CD(t,e,n,r={}){var i;let s=(t=cn(t,Yi))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Pe.MOCK_USER;else{c=bc(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Pe(l)}t._authCredentials=new mp(new eu(c,u))}}var Gr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ze=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},qn=class t extends Gr{constructor(e,n,r){super(e,n,Fu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function AD(t,e,...n){if(t=Te(t),bD("collection","path",e),t instanceof Yi){let r=_e.fromString(e,...n);return CT(r),new qn(t,null,r)}{if(!(t instanceof Ze||t instanceof qn))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(_e.fromString(e,...n));return CT(r),new qn(t.firestore,null,r)}}function cg(t,e,...n){if(t=Te(t),arguments.length===1&&(e=tu.newId()),bD("doc","path",e),t instanceof Yi){let r=_e.fromString(e,...n);return bT(r),new Ze(t,null,new U(r))}{if(!(t instanceof Ze||t instanceof qn))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(_e.fromString(e,...n));return bT(r),new Ze(t.firestore,t instanceof qn?t.converter:null,new U(r))}}var Cu=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gu(this,"async_queue_retry"),this.Vu=()=>{let r=hp();r&&F("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=hp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new kt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return w(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!To(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw un("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=Am.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&$()}verifyOperationInProgress(){}wu(){return w(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function AT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Kn=class extends Yi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Cu(e),this._firestoreClient=void 0,yield e}})}};function SD(t,e){let n=typeof t=="object"?t:On(),r=typeof t=="string"?t:e||"(default)",i=Sr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Dc("firestore");s&&CD(i,...s)}return i}function ug(t){if(t._terminated)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PF(t),t._firestoreClient}function PF(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,l,f){return new Tp(c,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,DD(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Fm(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var yo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ze.fromBase64String(e))}catch(n){throw new O(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ji=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _o=class{constructor(e){this._methodName=e}};var vo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var Io=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var MF=/^__.*__$/,Vm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ut(e,this.data,this.fieldMask,n,this.fieldTransforms):new zr(e,this.data,n,this.fieldTransforms)}},Au=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ut(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function RD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}var Um=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ru(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(RD(this.Cu)&&MF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},jm=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uu(e)}Qu(e,n,r,i=!1){return new Um({Cu:e,methodName:n,qu:r,path:ut.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lg(t){let e=t._freezeSettings(),n=Uu(t._databaseId);return new jm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kF(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);dg("Data must be an object, but it was:",o,r);let c=ND(r,o),u,l;if(s.merge)u=new pt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let g=Bm(e,p,n);if(!o.contains(g))throw new O(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);PD(f,g)||f.push(g)}u=new pt(f),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Vm(new ct(c),u,l)}var Su=class t extends _o{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function OF(t,e,n,r){let i=t.Qu(1,e,n);dg("Data must be an object, but it was:",i,r);let s=[],o=ct.empty();Wr(r,(u,l)=>{let f=hg(e,u,n);l=Te(l);let p=i.Nu(f);if(l instanceof Su)s.push(f);else{let g=Co(l,p);g!=null&&(s.push(f),o.set(f,g))}});let c=new pt(s);return new Au(o,c,i.fieldTransforms)}function FF(t,e,n,r,i,s){let o=t.Qu(1,e,n),c=[Bm(e,r,n)],u=[i];if(s.length%2!=0)throw new O(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)c.push(Bm(e,s[g])),u.push(s[g+1]);let l=[],f=ct.empty();for(let g=c.length-1;g>=0;--g)if(!PD(l,c[g])){let _=c[g],A=u[g];A=Te(A);let x=o.Nu(_);if(A instanceof Su)l.push(_);else{let R=Co(A,x);R!=null&&(l.push(_),f.set(_,R))}}let p=new pt(l);return new Au(f,p,o.fieldTransforms)}function LF(t,e,n,r=!1){return Co(n,t.Qu(r?4:3,e))}function Co(t,e){if(xD(t=Te(t)))return dg("Unsupported field value:",e,t),ND(t,e);if(t instanceof _o)return function(r,i){if(!RD(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=Co(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Le.fromDate(r);return{timestampValue:hu(i.serializer,s)}}if(r instanceof Le){let s=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hu(i.serializer,s)}}if(r instanceof vo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yo)return{bytesValue:eD(i.serializer,r._byteString)};if(r instanceof Ze){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:eg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Io)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Zm(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${$u(r)}`)}(t,e)}function ND(t,e){let n={};return xT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(r,i)=>{let s=Co(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof vo||t instanceof yo||t instanceof Ze||t instanceof _o||t instanceof Io)}function dg(t,e,n){if(!xD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=$u(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Bm(t,e,n){if((e=Te(e))instanceof Ji)return e._internalPath;if(typeof e=="string")return hg(t,e);throw Ru("Field path arguments must be of type string or ",t,!1,void 0,n)}var VF=new RegExp("[~\\*/\\[\\]]");function hg(t,e,n){if(e.search(VF)>=0)throw Ru(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ji(...e.split("."))._internalPath}catch{throw Ru(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ru(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new O(N.INVALID_ARGUMENT,c+t+u)}function PD(t,e){return t.some(n=>n.isEqual(e))}var Nu=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $m(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(qu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},$m=class extends Nu{data(){return super.data()}};function qu(t,e){return typeof e=="string"?hg(t,e):e instanceof Ji?e._internalPath:e._delegate._internalPath}function UF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wo=class{},xu=class extends wo{};function MD(t,e,...n){let r=[];e instanceof wo&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof qm).length,c=s.filter(u=>u instanceof Pu).length;if(o>1||o>0&&c>0)throw new O(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Pu=class t extends xu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return FD(e._query,n),new Gr(e.firestore,e.converter,Fp(e._query,n))}_parse(e){let n=lg(e.firestore);return function(s,o,c,u,l,f,p){let g;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new O(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){RT(p,f);let _=[];for(let A of p)_.push(ST(u,s,A));g={arrayValue:{values:_}}}else g=ST(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||RT(p,f),g=LF(c,o,p,f==="in"||f==="not-in");return Ce.create(l,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function kD(t,e,n){let r=e,i=qu("where",t);return Pu._create(i,r,n)}var qm=class t extends wo{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let u of c)FD(o,u),o=Fp(o,u)}(e._query,n),new Gr(e.firestore,e.converter,Fp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Hm=class t extends xu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $r(s,o)}(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new zn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function OD(t,e="asc"){let n=e,r=qu("orderBy",t);return Hm._create(r,n)}function ST(t,e,n){if(typeof(n=Te(n))=="string"){if(n==="")throw new O(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jT(e)&&n.indexOf("/")!==-1)throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(_e.fromString(n));if(!U.isDocumentKey(r))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ZE(t,new U(r))}if(n instanceof Ze)return ZE(t,n._key);throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$u(n)}.`)}function RT(t,e){if(!Array.isArray(t)||t.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FD(t,e){let n=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var zm=class{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ye(o.doubleValue));return new Io(s)}convertGeoPoint(e){return new vo(ye(e.latitude),ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Qm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lo(e));default:return null}}convertTimestamp(e){let n=ln(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=_e.fromString(e);de(oD(r));let i=new su(r.get(1),r.get(3)),s=new U(r.popFirst(5));return i.isEqual(n)||un(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function jF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Vr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mu=class extends Nu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ui(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(qu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ui=class extends Mu{data(e={}){return super.data(e)}},Gm=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ui(this._firestore,this._userDataWriter,r.key,r,new Vr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Ui(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Vr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Ui(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Vr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:BF(c.type),doc:u,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function BF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}function LD(t){t=cn(t,Ze);let e=cn(t.firestore,Kn);return NF(ug(e),t._key).then(n=>BD(e,t,n))}var ku=class extends zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}};function VD(t,e,n,...r){t=cn(t,Ze);let i=cn(t.firestore,Kn),s=lg(i),o;return o=typeof(e=Te(e))=="string"||e instanceof Ji?FF(s,"updateDoc",t._key,e,n,r):OF(s,"updateDoc",t._key,e),jD(i,[o.toMutation(t._key,$n.exists(!0))])}function UD(t,e){let n=cn(t.firestore,Kn),r=cg(t),i=jF(t.converter,e);return jD(n,[kF(lg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,$n.exists(!1))]).then(()=>r)}function fg(t,...e){var n,r,i;t=Te(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||AT(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(AT(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(t instanceof Ze)l=cn(t.firestore,Kn),f=Fu(t._key.path),u={next:p=>{e[o]&&e[o](BD(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=cn(t,Gr);l=cn(p.firestore,Kn),f=p._query;let g=new ku(l);u={next:_=>{e[o]&&e[o](new Gm(l,g,p,_))},error:e[o+1],complete:e[o+2]},UF(t._query)}return function(g,_,A,x){let R=new Du(x),k=new wu(_,R,A);return g.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return mD(yield Lm(g),k)})),()=>{R.Za(),g.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return gD(yield Lm(g),k)}))}}(ug(l),f,c,u)}function jD(t,e){return function(r,i){let s=new kt;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return vF(yield RF(r),i,s)})),s.promise}(ug(t),e)}function BD(t,e,n){let r=n.docs.get(e._key),i=new ku(t);return new Mu(t,i,e._key,r,new Vr(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Xi=i})(xt),Nt(new st("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Kn(new gp(r.getProvider("auth-internal")),new Ip(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),ge(QE,"4.7.3",e),ge(QE,"4.7.3","esm2017")})();var Hu=function(){return Hu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hu.apply(this,arguments)};var HF={includeMetadataChanges:!1};function $D(t,e){return e===void 0&&(e=HF),new J(function(n){var r=fg(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function qD(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Hu(Hu({},r),(n={},n[e.idField]=t.id,n))}function HD(t){return $D(t,{includeMetadataChanges:!0}).pipe(lt(function(e){return e.docs}))}function zD(t,e){return e===void 0&&(e={}),HD(t).pipe(lt(function(n){return n.map(function(r){return qD(r,e)})}))}var Qr=class{constructor(e){return e}},GD="firestore",pg=class{constructor(){return Nr(GD)}};var mg=new ue("angularfire2.firestore-instances");function zF(t,e){let n=Ni(GD,t,e);return n&&new Qr(n)}function GF(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Qr(r)}}var WF={provide:pg,deps:[[new Re,mg]]},KF={provide:Qr,useFactory:zF,deps:[[new Re,mg],wt]};function LG(t,...e){return ge("angularfire",nn.full,"fst"),Kt([KF,WF,{provide:mg,useFactory:GF(t),multi:!0,deps:[Ie,it,Ln,rn,[new Re,Or],[new Re,Fn],...e]}])}var WD=Fe(zD,!0);var VG=Fe(UD,!0);var KD=Fe(AD,!0);var UG=Fe(cg,!0);var jG=Fe(LD,!0);var BG=Fe(SD,!0);var $G=Fe(OD,!0);var qG=Fe(MD,!0);var HG=Fe(VD,!0);var zG=Fe(kD,!0);var eb="firebasestorage.googleapis.com",QF="storageBucket",YF=2*60*1e3,JF=10*60*1e3;var jt=class t extends Xe{constructor(e,n,r=0){super(gg(e),`Firebase Storage: ${n} (${gg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},fn=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(fn||{});function gg(t){return"storage/"+t}function XF(){let t="An unknown error occurred, please check the error payload for server response.";return new jt(fn.UNKNOWN,t)}function ZF(){return new jt(fn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eL(){return new jt(fn.CANCELED,"User canceled the upload/download.")}function tL(t){return new jt(fn.INVALID_URL,"Invalid URL '"+t+"'.")}function nL(t){return new jt(fn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function QD(t){return new jt(fn.INVALID_ARGUMENT,t)}function tb(){return new jt(fn.APP_DELETED,"The Firebase app was deleted.")}function rL(t){return new jt(fn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var hn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw nL(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(j){j.path_=decodeURIComponent(j.path)}let f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${i}/o${g}`,"i"),A={bucket:1,path:3},x=n===eb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",k=new RegExp(`^https?://${x}/${i}/${R}`,"i"),L=[{regex:c,indices:u,postModify:s},{regex:_,indices:A,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let j=0;j<L.length;j++){let le=L[j],q=le.regex.exec(e);if(q){let T=q[le.indices.bucket],y=q[le.indices.path];y||(y=""),r=new t(T,y),le.postModify(r);break}}if(r==null)throw tL(e);return r}},yg=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function iL(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let l=!1;function f(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,t(_,u())},R)}function g(){s&&clearTimeout(s)}function _(R,...k){if(l){g();return}if(R){g(),f.call(null,R,...k);return}if(u()||o){g(),f.call(null,R,...k);return}r<64&&(r*=2);let L;c===1?(c=2,L=0):L=(r+Math.random())*1e3,p(L)}let A=!1;function x(R){A||(A=!0,g(),!l&&(i!==null?(R||(c=2),clearTimeout(i),p(0)):R||(c=1)))}return p(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function sL(t){t(!1)}function oL(t){return t!==void 0}function YD(t,e,n,r){if(r<e)throw QD(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw QD(`Invalid value for '${t}'. Expected ${n} or less.`)}function aL(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var _g=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(_g||{});function cL(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var vg=class{constructor(e,n,r,i,s,o,c,u,l,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,A)=>{this.resolve_=_,this.reject_=A,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new es(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let u=c.loaded,l=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===_g.NO_ERROR,u=s.getStatus();if(!c||cL(u,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===_g.ABORT;r(!1,new es(!1,null,f));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new es(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(c,c.getResponse());oL(u)?s(u):s()}catch(u){o(u)}else if(c!==null){let u=XF();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){let u=this.appDelete_?tb():eL();o(u)}else{let u=ZF();o(u)}};this.canceled_?n(!1,new es(!1,null,!0)):this.backoffId_=iL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},es=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function uL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function lL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function hL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function fL(t,e,n,r,i,s,o=!0){let c=aL(t.urlParams),u=t.url+c,l=Object.assign({},t.headers);return dL(l,e),uL(l,n),lL(l,s),hL(l,r),new vg(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function pL(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mL(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var JG=256*1024;var Ig=class t{constructor(e,n){this._service=e,n instanceof hn?this._location=n:this._location=hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mL(this._location.path)}get storage(){return this._service}get parent(){let e=pL(this._location.path);if(e===null)return null;let n=new hn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw rL(e)}};function JD(t,e){let n=e?.[QF];return n==null?null:hn.makeFromBucketSpec(n,t)}function gL(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:bc(i,t.app.options.projectId))}var wg=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=eb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YF,this._maxUploadRetryTime=JF,this._requests=new Set,i!=null?this._bucket=hn.makeFromBucketSpec(i,this._host):this._bucket=JD(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hn.makeFromBucketSpec(this._url,e):this._bucket=JD(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){YD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){YD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return w(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return w(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ig(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new yg(tb());{let o=fL(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return w(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},XD="@firebase/storage",ZD="0.13.2";var nb="storage";function rb(t=On(),e){t=Te(t);let r=Sr(t,nb).getImmediate({identifier:e}),i=Dc("storage");return i&&ib(r,...i),r}function ib(t,e,n,r={}){gL(t,e,n,r)}function yL(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new wg(n,r,i,e,xt)}function _L(){Nt(new st(nb,yL,"PUBLIC").setMultipleInstances(!0)),ge(XD,ZD,""),ge(XD,ZD,"esm2017")}_L();var Yr=class{constructor(e){return e}},sb="storage",Eg=class{constructor(){return Nr(sb)}};var Tg=new ue("angularfire2.storage-instances");function vL(t,e){let n=Ni(sb,t,e);return n&&new Yr(n)}function IL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Yr(r)}}var wL={provide:Eg,deps:[[new Re,Tg]]},EL={provide:Yr,useFactory:vL,deps:[[new Re,Tg],wt]};function E9(t,...e){return ge("angularfire",nn.full,"gcs"),Kt([EL,wL,{provide:Tg,useFactory:IL(t),multi:!0,deps:[Ie,it,Ln,rn,[new Re,Or],[new Re,Fn],...e]}])}var T9=Fe(rb,!0);var x9=(()=>{class t{constructor(){this._firestore=ce(Qr),this._storage=ce(Yr),this._collectionMenu=KD(this._firestore,"menu"),this.cartItemsCount=Tr(0),this.totalPrice=Tr(0),this.cartItems=Tr([]),this.getMenu=Yh(WD(this._collectionMenu,{idField:"id"}),{initialValue:[]}),this.cartItems.set(this.getCartItems()),this.cartItemsCount.set(this.getTotalItems()),this.totalPrice.set(this.getTotalPrice())}get cartItemsValue(){return this.cartItems()}getTotalItems(){return this.getCartItems().reduce((r,i)=>r+i.quantity,0)}getTotalPrice(){return this.getCartItems().reduce((r,i)=>r+i.price*i.quantity,0)}getCartItems(){let n=localStorage.getItem("cart");return n?JSON.parse(n):[]}getCartItemsToOrder(){return JSON.parse(localStorage.getItem("cart")||"[]").map(r=>({id:r.id,name:r.name,quantity:r.quantity,price:r.price}))}saveCartItems(n){localStorage.setItem("cart",JSON.stringify(n)),this.cartItems.set(n),this.cartItemsCount.set(this.getTotalItems()),this.totalPrice.set(this.getTotalPrice())}addToCart(n,r,i,s){let o=this.cartItemsValue,c=o.find(u=>u.id===n);c?c.quantity+=1:o.push({id:n,name:r,description:i,price:s,image:"",quantity:1}),this.saveCartItems(o)}updateCartItemsWithImage(){let n=this.getMenu(),r=this.cartItemsValue;r.forEach(i=>{let s=n.find(o=>o.id===i.id);s&&(i.image=s.image)}),this.saveCartItems(r)}clearCart(){localStorage.removeItem("cart"),this.cartItems.set([]),this.cartItemsCount.set(0),this.totalPrice.set(0)}incrementQuantity(n){let r=this.getCartItems(),i=r.find(s=>s.id===n);i&&(i.quantity+=1,this.saveCartItems(r))}decrementQuantity(n){let r=this.getCartItems(),i=r.find(s=>s.id===n);if(i){if(i.quantity=Math.max(0,i.quantity-1),i.quantity===0){let s=r.indexOf(i);s>-1&&r.splice(s,1)}this.saveCartItems(r)}}getCartItemsCount(){return $s(()=>this.cartItemsCount())}getTotalPriceSignal(){return $s(()=>this.totalPrice())}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{Ht as a,zt as b,w as c,Ae as d,Gy as e,xl as f,Pl as g,In as h,Es as i,Ds as j,Gt as k,dC as l,hC as m,fC as n,rr as o,lt as p,wC as q,ir as r,ya as s,TC as t,DC as u,sr as v,h_ as w,bC as x,bs as y,Ll as z,CC as A,SC as B,p_ as C,Vl as D,RC as E,m_ as F,g_ as G,NC as H,xC as I,Ul as J,Y as K,rv as L,me as M,sv as N,B$ as O,ue as P,te as Q,$e as R,ce as S,Ss as T,Cn as U,$$ as V,vv as W,nc as X,rc as Y,Kt as Z,Sv as _,An as $,N0 as aa,kv as ba,q$ as ca,H$ as da,z$ as ea,G$ as fa,W$ as ga,EA as ha,it as ia,yr as ja,Er as ka,ar as la,K$ as ma,Q$ as na,kA as oa,dc as pa,Y$ as qa,qA as ra,J$ as sa,Ba as ta,X$ as ua,Je as va,Ad as wa,Mh as xa,Ie as ya,wR as za,Si as Aa,QR as Ba,tN as Ca,Ud as Da,nN as Ea,YI as Fa,cN as Ga,dN as Ha,_N as Ia,vN as Ja,nq as Ka,ZI as La,ew as Ma,MN as Na,FN as Oa,LN as Pa,rq as Qa,zN as Ra,iq as Sa,KN as Ta,sq as Ua,oq as Va,aq as Wa,cq as Xa,uq as Ya,JN as Za,nw as _a,lq as $a,dq as ab,hq as bb,fq as cb,pq as db,mq as eb,gq as fb,yq as gb,_q as hb,vq as ib,Uh as jb,ox as kb,dw as lb,Iq as mb,pw as nb,wq as ob,bx as pb,qh as qb,Bq as rb,mw as sb,Cw as tb,Qh as ub,Nx as vb,$q as wb,qq as xb,Hq as yb,zq as zb,Gq as Ab,Wq as Bb,Kq as Cb,Qq as Db,Yq as Eb,Jq as Fb,Dw as Gb,zH as Hb,GH as Ib,H4 as Jb,z4 as Kb,Qr as Lb,LG as Mb,WD as Nb,VG as Ob,KD as Pb,UG as Qb,jG as Rb,BG as Sb,$G as Tb,qG as Ub,HG as Vb,zG as Wb,E9 as Xb,T9 as Yb,x9 as Zb};
